"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _logger = _interopRequireDefault(require("../logger.js"));

var _helpers = require("../helpers.js");

var _path = _interopRequireDefault(require("path"));

var _lodash = _interopRequireDefault(require("lodash"));

var _appiumSupport = require("appium-support");

var _net = _interopRequireDefault(require("net"));

var _os = require("os");

var _logcat = _interopRequireDefault(require("../logcat"));

var _asyncbox = require("asyncbox");

var _teen_process = require("teen_process");

var _bluebird = _interopRequireDefault(require("bluebird"));

var _shellQuote = require("shell-quote");

const SETTINGS_HELPER_ID = 'io.appium.settings';
const WIFI_CONNECTION_SETTING_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.WiFiConnectionSettingReceiver`;
const WIFI_CONNECTION_SETTING_ACTION = `${SETTINGS_HELPER_ID}.wifi`;
const DATA_CONNECTION_SETTING_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.DataConnectionSettingReceiver`;
const DATA_CONNECTION_SETTING_ACTION = `${SETTINGS_HELPER_ID}.data_connection`;
const ANIMATION_SETTING_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.AnimationSettingReceiver`;
const ANIMATION_SETTING_ACTION = `${SETTINGS_HELPER_ID}.animation`;
const LOCALE_SETTING_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.LocaleSettingReceiver`;
const LOCALE_SETTING_ACTION = `${SETTINGS_HELPER_ID}.locale`;
const LOCATION_SERVICE = `${SETTINGS_HELPER_ID}/.LocationService`;
const LOCATION_RECEIVER = `${SETTINGS_HELPER_ID}/.receivers.LocationInfoReceiver`;
const LOCATION_RETRIEVAL_ACTION = `${SETTINGS_HELPER_ID}.location`;
const APPIUM_IME = `${SETTINGS_HELPER_ID}/.AppiumIME`;
const MAX_SHELL_BUFFER_LENGTH = 1000;
const NOT_CHANGEABLE_PERM_ERROR = 'not a changeable permission type';
let methods = {};

methods.getAdbWithCorrectAdbPath = function () {
  var _getAdbWithCorrectAdbPath = (0, _asyncToGenerator2.default)(function* () {
    this.executable.path = yield this.getSdkBinaryPath('adb');
    return this.adb;
  });

  return function getAdbWithCorrectAdbPath() {
    return _getAdbWithCorrectAdbPath.apply(this, arguments);
  };
}();

methods.initAapt = function () {
  var _initAapt = (0, _asyncToGenerator2.default)(function* () {
    yield this.getSdkBinaryPath('aapt');
  });

  return function initAapt() {
    return _initAapt.apply(this, arguments);
  };
}();

methods.initZipAlign = function () {
  var _initZipAlign = (0, _asyncToGenerator2.default)(function* () {
    yield this.getSdkBinaryPath('zipalign');
  });

  return function initZipAlign() {
    return _initZipAlign.apply(this, arguments);
  };
}();

methods.initBundletool = function () {
  var _initBundletool = (0, _asyncToGenerator2.default)(function* () {
    try {
      this.binaries.bundletool = yield _appiumSupport.fs.which('bundletool.jar');
    } catch (err) {
      throw new Error('bundletool.jar binary is expected to be present in PATH. ' + 'Visit https://github.com/google/bundletool for more details.');
    }
  });

  return function initBundletool() {
    return _initBundletool.apply(this, arguments);
  };
}();

methods.getApiLevel = function () {
  var _getApiLevel = (0, _asyncToGenerator2.default)(function* () {
    if (!_lodash.default.isInteger(this._apiLevel)) {
      try {
        const strOutput = yield this.getDeviceProperty('ro.build.version.sdk');
        let apiLevel = parseInt(strOutput.trim(), 10);

        if (apiLevel === 28 && (yield this.getDeviceProperty('ro.build.version.release')).toLowerCase() === 'q') {
          _logger.default.debug('Release version is Q but found API Level 28. Setting API Level to 29');

          apiLevel = 29;
        }

        this._apiLevel = apiLevel;

        _logger.default.debug(`Device API level: ${this._apiLevel}`);

        if (isNaN(this._apiLevel)) {
          throw new Error(`The actual output '${strOutput}' cannot be converted to an integer`);
        }
      } catch (e) {
        throw new Error(`Error getting device API level. Original error: ${e.message}`);
      }
    }

    return this._apiLevel;
  });

  return function getApiLevel() {
    return _getApiLevel.apply(this, arguments);
  };
}();

methods.getPlatformVersion = function () {
  var _getPlatformVersion = (0, _asyncToGenerator2.default)(function* () {
    _logger.default.info('Getting device platform version');

    try {
      return yield this.getDeviceProperty('ro.build.version.release');
    } catch (e) {
      throw new Error(`Error getting device platform version. Original error: ${e.message}`);
    }
  });

  return function getPlatformVersion() {
    return _getPlatformVersion.apply(this, arguments);
  };
}();

methods.isDeviceConnected = function () {
  var _isDeviceConnected = (0, _asyncToGenerator2.default)(function* () {
    let devices = yield this.getConnectedDevices();
    return devices.length > 0;
  });

  return function isDeviceConnected() {
    return _isDeviceConnected.apply(this, arguments);
  };
}();

methods.mkdir = function () {
  var _mkdir = (0, _asyncToGenerator2.default)(function* (remotePath) {
    return yield this.shell(['mkdir', '-p', remotePath]);
  });

  return function mkdir(_x) {
    return _mkdir.apply(this, arguments);
  };
}();

methods.isValidClass = function isValidClass(classString) {
  return new RegExp(/^[a-zA-Z0-9./_]+$/).exec(classString);
};

methods.forceStop = function () {
  var _forceStop = (0, _asyncToGenerator2.default)(function* (pkg) {
    return yield this.shell(['am', 'force-stop', pkg]);
  });

  return function forceStop(_x2) {
    return _forceStop.apply(this, arguments);
  };
}();

methods.killPackage = function () {
  var _killPackage = (0, _asyncToGenerator2.default)(function* (pkg) {
    return yield this.shell(['am', 'kill', pkg]);
  });

  return function killPackage(_x3) {
    return _killPackage.apply(this, arguments);
  };
}();

methods.clear = function () {
  var _clear = (0, _asyncToGenerator2.default)(function* (pkg) {
    return yield this.shell(['pm', 'clear', pkg]);
  });

  return function clear(_x4) {
    return _clear.apply(this, arguments);
  };
}();

methods.grantAllPermissions = function () {
  var _grantAllPermissions = (0, _asyncToGenerator2.default)(function* (pkg, apk) {
    const apiLevel = yield this.getApiLevel();
    let targetSdk = 0;
    let dumpsysOutput = null;

    try {
      if (!apk) {
        dumpsysOutput = yield this.shell(['dumpsys', 'package', pkg]);
        targetSdk = yield this.targetSdkVersionUsingPKG(pkg, dumpsysOutput);
      } else {
        targetSdk = yield this.targetSdkVersionFromManifest(apk);
      }
    } catch (e) {
      _logger.default.warn(`Ran into problem getting target SDK version; ignoring...`);
    }

    if (apiLevel >= 23 && targetSdk >= 23) {
      dumpsysOutput = dumpsysOutput || (yield this.shell(['dumpsys', 'package', pkg]));
      const requestedPermissions = yield this.getReqPermissions(pkg, dumpsysOutput);
      const grantedPermissions = yield this.getGrantedPermissions(pkg, dumpsysOutput);

      const permissionsToGrant = _lodash.default.difference(requestedPermissions, grantedPermissions);

      if (_lodash.default.isEmpty(permissionsToGrant)) {
        _logger.default.info(`${pkg} contains no permissions available for granting`);
      } else {
        yield this.grantPermissions(pkg, permissionsToGrant);
      }
    }
  });

  return function grantAllPermissions(_x5, _x6) {
    return _grantAllPermissions.apply(this, arguments);
  };
}();

methods.grantPermissions = function () {
  var _grantPermissions = (0, _asyncToGenerator2.default)(function* (pkg, permissions) {
    _logger.default.debug(`Granting permissions ${JSON.stringify(permissions)} to '${pkg}'`);

    const commands = [];
    let cmdChunk = [];
    var _iteratorNormalCompletion = true;
    var _didIteratorError = false;
    var _iteratorError = undefined;

    try {
      for (var _iterator = permissions[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
        const permission = _step.value;
        const nextCmd = ['pm', 'grant', pkg, permission, ';'];

        if (nextCmd.join(' ').length + cmdChunk.join(' ').length >= MAX_SHELL_BUFFER_LENGTH) {
          commands.push(cmdChunk);
          cmdChunk = [];
        }

        cmdChunk = [...cmdChunk, ...nextCmd];
      }
    } catch (err) {
      _didIteratorError = true;
      _iteratorError = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion && _iterator.return != null) {
          _iterator.return();
        }
      } finally {
        if (_didIteratorError) {
          throw _iteratorError;
        }
      }
    }

    if (!_lodash.default.isEmpty(cmdChunk)) {
      commands.push(cmdChunk);
    }

    _logger.default.debug(`Got the following command chunks to execute: ${JSON.stringify(commands)}`);

    let lastError = null;

    for (var _i = 0; _i < commands.length; _i++) {
      const cmd = commands[_i];

      try {
        yield this.shell(cmd);
      } catch (e) {
        if (!e.message.includes(NOT_CHANGEABLE_PERM_ERROR)) {
          lastError = e;
        }
      }
    }

    if (lastError) {
      throw lastError;
    }
  });

  return function grantPermissions(_x7, _x8) {
    return _grantPermissions.apply(this, arguments);
  };
}();

methods.grantPermission = function () {
  var _grantPermission = (0, _asyncToGenerator2.default)(function* (pkg, permission) {
    try {
      yield this.shell(['pm', 'grant', pkg, permission]);
    } catch (error) {
      if (!error.message.includes(NOT_CHANGEABLE_PERM_ERROR)) {
        throw error;
      }
    }
  });

  return function grantPermission(_x9, _x10) {
    return _grantPermission.apply(this, arguments);
  };
}();

methods.revokePermission = function () {
  var _revokePermission = (0, _asyncToGenerator2.default)(function* (pkg, permission) {
    try {
      yield this.shell(['pm', 'revoke', pkg, permission]);
    } catch (error) {
      if (!error.message.includes(NOT_CHANGEABLE_PERM_ERROR)) {
        throw error;
      }
    }
  });

  return function revokePermission(_x11, _x12) {
    return _revokePermission.apply(this, arguments);
  };
}();

methods.getGrantedPermissions = function () {
  var _getGrantedPermissions = (0, _asyncToGenerator2.default)(function* (pkg, cmdOutput = null) {
    _logger.default.debug('Retrieving granted permissions');

    const stdout = cmdOutput || (yield this.shell(['dumpsys', 'package', pkg]));
    return (0, _helpers.extractMatchingPermissions)(stdout, ['install', 'runtime'], true);
  });

  return function getGrantedPermissions(_x13) {
    return _getGrantedPermissions.apply(this, arguments);
  };
}();

methods.getDeniedPermissions = function () {
  var _getDeniedPermissions = (0, _asyncToGenerator2.default)(function* (pkg, cmdOutput = null) {
    _logger.default.debug('Retrieving denied permissions');

    const stdout = cmdOutput || (yield this.shell(['dumpsys', 'package', pkg]));
    return (0, _helpers.extractMatchingPermissions)(stdout, ['install', 'runtime'], false);
  });

  return function getDeniedPermissions(_x14) {
    return _getDeniedPermissions.apply(this, arguments);
  };
}();

methods.getReqPermissions = function () {
  var _getReqPermissions = (0, _asyncToGenerator2.default)(function* (pkg, cmdOutput = null) {
    _logger.default.debug('Retrieving requested permissions');

    const stdout = cmdOutput || (yield this.shell(['dumpsys', 'package', pkg]));
    return (0, _helpers.extractMatchingPermissions)(stdout, ['requested']);
  });

  return function getReqPermissions(_x15) {
    return _getReqPermissions.apply(this, arguments);
  };
}();

methods.getLocationProviders = function () {
  var _getLocationProviders = (0, _asyncToGenerator2.default)(function* () {
    let stdout = yield this.getSetting('secure', 'location_providers_allowed');
    return stdout.trim().split(',').map(p => p.trim()).filter(Boolean);
  });

  return function getLocationProviders() {
    return _getLocationProviders.apply(this, arguments);
  };
}();

methods.toggleGPSLocationProvider = function () {
  var _toggleGPSLocationProvider = (0, _asyncToGenerator2.default)(function* (enabled) {
    yield this.setSetting('secure', 'location_providers_allowed', `${enabled ? '+' : '-'}gps`);
  });

  return function toggleGPSLocationProvider(_x16) {
    return _toggleGPSLocationProvider.apply(this, arguments);
  };
}();

methods.setHiddenApiPolicy = function () {
  var _setHiddenApiPolicy = (0, _asyncToGenerator2.default)(function* (value) {
    yield this.setSetting('global', 'hidden_api_policy_pre_p_apps', value);
    yield this.setSetting('global', 'hidden_api_policy_p_apps', value);
    yield this.setSetting('global', 'hidden_api_policy', value);
  });

  return function setHiddenApiPolicy(_x17) {
    return _setHiddenApiPolicy.apply(this, arguments);
  };
}();

methods.setDefaultHiddenApiPolicy = function () {
  var _setDefaultHiddenApiPolicy = (0, _asyncToGenerator2.default)(function* () {
    yield this.shell(['settings', 'delete', 'global', 'hidden_api_policy_pre_p_apps']);
    yield this.shell(['settings', 'delete', 'global', 'hidden_api_policy_p_apps']);
    yield this.shell(['settings', 'delete', 'global', 'hidden_api_policy']);
  });

  return function setDefaultHiddenApiPolicy() {
    return _setDefaultHiddenApiPolicy.apply(this, arguments);
  };
}();

methods.stopAndClear = function () {
  var _stopAndClear = (0, _asyncToGenerator2.default)(function* (pkg) {
    try {
      yield this.forceStop(pkg);
      yield this.clear(pkg);
    } catch (e) {
      throw new Error(`Cannot stop and clear ${pkg}. Original error: ${e.message}`);
    }
  });

  return function stopAndClear(_x18) {
    return _stopAndClear.apply(this, arguments);
  };
}();

methods.availableIMEs = function () {
  var _availableIMEs = (0, _asyncToGenerator2.default)(function* () {
    try {
      return (0, _helpers.getIMEListFromOutput)((yield this.shell(['ime', 'list', '-a'])));
    } catch (e) {
      throw new Error(`Error getting available IME's. Original error: ${e.message}`);
    }
  });

  return function availableIMEs() {
    return _availableIMEs.apply(this, arguments);
  };
}();

methods.enabledIMEs = function () {
  var _enabledIMEs = (0, _asyncToGenerator2.default)(function* () {
    try {
      return (0, _helpers.getIMEListFromOutput)((yield this.shell(['ime', 'list'])));
    } catch (e) {
      throw new Error(`Error getting enabled IME's. Original error: ${e.message}`);
    }
  });

  return function enabledIMEs() {
    return _enabledIMEs.apply(this, arguments);
  };
}();

methods.enableIME = function () {
  var _enableIME = (0, _asyncToGenerator2.default)(function* (imeId) {
    yield this.shell(['ime', 'enable', imeId]);
  });

  return function enableIME(_x19) {
    return _enableIME.apply(this, arguments);
  };
}();

methods.disableIME = function () {
  var _disableIME = (0, _asyncToGenerator2.default)(function* (imeId) {
    yield this.shell(['ime', 'disable', imeId]);
  });

  return function disableIME(_x20) {
    return _disableIME.apply(this, arguments);
  };
}();

methods.setIME = function () {
  var _setIME = (0, _asyncToGenerator2.default)(function* (imeId) {
    yield this.shell(['ime', 'set', imeId]);
  });

  return function setIME(_x21) {
    return _setIME.apply(this, arguments);
  };
}();

methods.defaultIME = function () {
  var _defaultIME = (0, _asyncToGenerator2.default)(function* () {
    try {
      let engine = yield this.getSetting('secure', 'default_input_method');

      if (engine === 'null') {
        return null;
      }

      return engine.trim();
    } catch (e) {
      throw new Error(`Error getting default IME. Original error: ${e.message}`);
    }
  });

  return function defaultIME() {
    return _defaultIME.apply(this, arguments);
  };
}();

methods.keyevent = function () {
  var _keyevent = (0, _asyncToGenerator2.default)(function* (keycode) {
    let code = parseInt(keycode, 10);
    yield this.shell(['input', 'keyevent', code]);
  });

  return function keyevent(_x22) {
    return _keyevent.apply(this, arguments);
  };
}();

methods.inputText = function () {
  var _inputText = (0, _asyncToGenerator2.default)(function* (text) {
    text = text.replace(/\\/g, '\\\\').replace(/\(/g, '\(').replace(/\)/g, '\)').replace(/</g, '\<').replace(/>/g, '\>').replace(/\|/g, '\|').replace(/;/g, '\;').replace(/&/g, '\&').replace(/\*/g, '\*').replace(/~/g, '\~').replace(/"/g, '\"').replace(/'/g, "\'").replace(/ /g, '%s');
    yield this.shell(['input', 'text', text]);
  });

  return function inputText(_x23) {
    return _inputText.apply(this, arguments);
  };
}();

methods.clearTextField = function () {
  var _clearTextField = (0, _asyncToGenerator2.default)(function* (length = 100) {
    _logger.default.debug(`Clearing up to ${length} characters`);

    if (length === 0) {
      return;
    }

    let args = ['input', 'keyevent'];

    for (let i = 0; i < length; i++) {
      args.push('67', '112');
    }

    yield this.shell(args);
  });

  return function clearTextField() {
    return _clearTextField.apply(this, arguments);
  };
}();

methods.lock = function () {
  var _lock = (0, _asyncToGenerator2.default)(function* () {
    var _this = this;

    if (yield this.isScreenLocked()) {
      _logger.default.debug('Screen is already locked. Doing nothing.');

      return;
    }

    _logger.default.debug('Pressing the KEYCODE_POWER button to lock screen');

    yield this.keyevent(26);
    const timeoutMs = 5000;

    try {
      yield (0, _asyncbox.waitForCondition)((0, _asyncToGenerator2.default)(function* () {
        return yield _this.isScreenLocked();
      }), {
        waitMs: timeoutMs,
        intervalMs: 500
      });
    } catch (e) {
      throw new Error(`The device screen is still locked after ${timeoutMs}ms timeout`);
    }
  });

  return function lock() {
    return _lock.apply(this, arguments);
  };
}();

methods.back = function () {
  var _back = (0, _asyncToGenerator2.default)(function* () {
    _logger.default.debug('Pressing the BACK button');

    yield this.keyevent(4);
  });

  return function back() {
    return _back.apply(this, arguments);
  };
}();

methods.goToHome = function () {
  var _goToHome = (0, _asyncToGenerator2.default)(function* () {
    _logger.default.debug('Pressing the HOME button');

    yield this.keyevent(3);
  });

  return function goToHome() {
    return _goToHome.apply(this, arguments);
  };
}();

methods.getAdbPath = function getAdbPath() {
  return this.executable.path;
};

methods.getScreenOrientation = function () {
  var _getScreenOrientation = (0, _asyncToGenerator2.default)(function* () {
    let stdout = yield this.shell(['dumpsys', 'input']);
    return (0, _helpers.getSurfaceOrientation)(stdout);
  });

  return function getScreenOrientation() {
    return _getScreenOrientation.apply(this, arguments);
  };
}();

methods.isScreenLocked = function () {
  var _isScreenLocked = (0, _asyncToGenerator2.default)(function* () {
    let stdout = yield this.shell(['dumpsys', 'window']);

    if (process.env.APPIUM_LOG_DUMPSYS) {
      let dumpsysFile = _path.default.resolve(process.cwd(), 'dumpsys.log');

      _logger.default.debug(`Writing dumpsys output to ${dumpsysFile}`);

      yield _appiumSupport.fs.writeFile(dumpsysFile, stdout);
    }

    return (0, _helpers.isShowingLockscreen)(stdout) || (0, _helpers.isCurrentFocusOnKeyguard)(stdout) || !(0, _helpers.isScreenOnFully)(stdout);
  });

  return function isScreenLocked() {
    return _isScreenLocked.apply(this, arguments);
  };
}();

methods.isSoftKeyboardPresent = function () {
  var _isSoftKeyboardPresent = (0, _asyncToGenerator2.default)(function* () {
    try {
      const stdout = yield this.shell(['dumpsys', 'input_method']);
      const inputShownMatch = /mInputShown=(\w+)/.exec(stdout);
      const inputViewShownMatch = /mIsInputViewShown=(\w+)/.exec(stdout);
      return {
        isKeyboardShown: !!(inputShownMatch && inputShownMatch[1] === 'true'),
        canCloseKeyboard: !!(inputViewShownMatch && inputViewShownMatch[1] === 'true')
      };
    } catch (e) {
      throw new Error(`Error finding softkeyboard. Original error: ${e.message}`);
    }
  });

  return function isSoftKeyboardPresent() {
    return _isSoftKeyboardPresent.apply(this, arguments);
  };
}();

methods.sendTelnetCommand = function () {
  var _sendTelnetCommand = (0, _asyncToGenerator2.default)(function* (command) {
    _logger.default.debug(`Sending telnet command to device: ${command}`);

    let port = yield this.getEmulatorPort();
    return yield new _bluebird.default((resolve, reject) => {
      let conn = _net.default.createConnection(port, 'localhost'),
          connected = false,
          readyRegex = /^OK$/m,
          dataStream = '',
          res = null;

      conn.on('connect', () => {
        _logger.default.debug('Socket connection to device created');
      });
      conn.on('data', data => {
        data = data.toString('utf8');

        if (!connected) {
          if (readyRegex.test(data)) {
            connected = true;

            _logger.default.debug('Socket connection to device ready');

            conn.write(`${command}\n`);
          }
        } else {
          dataStream += data;

          if (readyRegex.test(data)) {
            res = dataStream.replace(readyRegex, '').trim();
            res = _lodash.default.last(res.trim().split('\n'));

            _logger.default.debug(`Telnet command got response: ${res}`);

            conn.write('quit\n');
          }
        }
      });
      conn.on('error', err => {
        _logger.default.debug(`Telnet command error: ${err.message}`);

        reject(err);
      });
      conn.on('close', () => {
        if (res === null) {
          reject(new Error('Never got a response from command'));
        } else {
          resolve(res);
        }
      });
    });
  });

  return function sendTelnetCommand(_x24) {
    return _sendTelnetCommand.apply(this, arguments);
  };
}();

methods.isAirplaneModeOn = function () {
  var _isAirplaneModeOn = (0, _asyncToGenerator2.default)(function* () {
    let stdout = yield this.getSetting('global', 'airplane_mode_on');
    return parseInt(stdout, 10) !== 0;
  });

  return function isAirplaneModeOn() {
    return _isAirplaneModeOn.apply(this, arguments);
  };
}();

methods.setAirplaneMode = function () {
  var _setAirplaneMode = (0, _asyncToGenerator2.default)(function* (on) {
    yield this.setSetting('global', 'airplane_mode_on', on ? 1 : 0);
  });

  return function setAirplaneMode(_x25) {
    return _setAirplaneMode.apply(this, arguments);
  };
}();

methods.broadcastAirplaneMode = function () {
  var _broadcastAirplaneMode = (0, _asyncToGenerator2.default)(function* (on) {
    yield this.shell(['am', 'broadcast', '-a', 'android.intent.action.AIRPLANE_MODE', '--ez', 'state', on ? 'true' : 'false']);
  });

  return function broadcastAirplaneMode(_x26) {
    return _broadcastAirplaneMode.apply(this, arguments);
  };
}();

methods.isWifiOn = function () {
  var _isWifiOn = (0, _asyncToGenerator2.default)(function* () {
    let stdout = yield this.getSetting('global', 'wifi_on');
    return parseInt(stdout, 10) !== 0;
  });

  return function isWifiOn() {
    return _isWifiOn.apply(this, arguments);
  };
}();

methods.setWifiState = function () {
  var _setWifiState = (0, _asyncToGenerator2.default)(function* (on, isEmulator = false) {
    if (isEmulator) {
      yield this.shell(['svc', 'wifi', on ? 'enable' : 'disable'], {
        privileged: true
      });
    } else {
      yield this.shell(['am', 'broadcast', '-a', WIFI_CONNECTION_SETTING_ACTION, '-n', WIFI_CONNECTION_SETTING_RECEIVER, '--es', 'setstatus', on ? 'enable' : 'disable']);
    }
  });

  return function setWifiState(_x27) {
    return _setWifiState.apply(this, arguments);
  };
}();

methods.isDataOn = function () {
  var _isDataOn = (0, _asyncToGenerator2.default)(function* () {
    let stdout = yield this.getSetting('global', 'mobile_data');
    return parseInt(stdout, 10) !== 0;
  });

  return function isDataOn() {
    return _isDataOn.apply(this, arguments);
  };
}();

methods.setDataState = function () {
  var _setDataState = (0, _asyncToGenerator2.default)(function* (on, isEmulator = false) {
    if (isEmulator) {
      yield this.shell(['svc', 'data', on ? 'enable' : 'disable'], {
        privileged: true
      });
    } else {
      yield this.shell(['am', 'broadcast', '-a', DATA_CONNECTION_SETTING_ACTION, '-n', DATA_CONNECTION_SETTING_RECEIVER, '--es', 'setstatus', on ? 'enable' : 'disable']);
    }
  });

  return function setDataState(_x28) {
    return _setDataState.apply(this, arguments);
  };
}();

methods.setWifiAndData = function () {
  var _setWifiAndData = (0, _asyncToGenerator2.default)(function* ({
    wifi,
    data
  }, isEmulator = false) {
    if (_appiumSupport.util.hasValue(wifi)) {
      yield this.setWifiState(wifi, isEmulator);
    }

    if (_appiumSupport.util.hasValue(data)) {
      yield this.setDataState(data, isEmulator);
    }
  });

  return function setWifiAndData(_x29) {
    return _setWifiAndData.apply(this, arguments);
  };
}();

methods.setAnimationState = function () {
  var _setAnimationState = (0, _asyncToGenerator2.default)(function* (on) {
    yield this.shell(['am', 'broadcast', '-a', ANIMATION_SETTING_ACTION, '-n', ANIMATION_SETTING_RECEIVER, '--es', 'setstatus', on ? 'enable' : 'disable']);
  });

  return function setAnimationState(_x30) {
    return _setAnimationState.apply(this, arguments);
  };
}();

methods.isAnimationOn = function () {
  var _isAnimationOn = (0, _asyncToGenerator2.default)(function* () {
    let animator_duration_scale = yield this.getSetting('global', 'animator_duration_scale');
    let transition_animation_scale = yield this.getSetting('global', 'transition_animation_scale');
    let window_animation_scale = yield this.getSetting('global', 'window_animation_scale');
    return _lodash.default.some([animator_duration_scale, transition_animation_scale, window_animation_scale], setting => setting !== '0.0');
  });

  return function isAnimationOn() {
    return _isAnimationOn.apply(this, arguments);
  };
}();

methods.setDeviceSysLocaleViaSettingApp = function () {
  var _setDeviceSysLocaleViaSettingApp = (0, _asyncToGenerator2.default)(function* (language, country, script = null) {
    const params = ['am', 'broadcast', '-a', LOCALE_SETTING_ACTION, '-n', LOCALE_SETTING_RECEIVER, '--es', 'lang', language.toLowerCase(), '--es', 'country', country.toUpperCase()];

    if (script) {
      params.push('--es', 'script', script);
    }

    yield this.shell(params);
  });

  return function setDeviceSysLocaleViaSettingApp(_x31, _x32) {
    return _setDeviceSysLocaleViaSettingApp.apply(this, arguments);
  };
}();

methods.setGeoLocation = function () {
  var _setGeoLocation = (0, _asyncToGenerator2.default)(function* (location, isEmulator = false) {
    let longitude = parseFloat(location.longitude);

    if (isNaN(longitude)) {
      throw new Error(`location.longitude is expected to be a valid float number. '${location.longitude}' is given instead`);
    }

    longitude = `${_lodash.default.ceil(longitude, 5)}`;
    let latitude = parseFloat(location.latitude);

    if (isNaN(latitude)) {
      throw new Error(`location.latitude is expected to be a valid float number. '${location.latitude}' is given instead`);
    }

    latitude = `${_lodash.default.ceil(latitude, 5)}`;

    if (isEmulator) {
      yield this.resetTelnetAuthToken();
      yield this.adbExec(['emu', 'geo', 'fix', longitude, latitude]);
      yield this.adbExec(['emu', 'geo', 'fix', longitude.replace('.', ','), latitude.replace('.', ',')]);
    } else {
      return yield this.shell(['am', 'startservice', '-e', 'longitude', longitude, '-e', 'latitude', latitude, LOCATION_SERVICE]);
    }
  });

  return function setGeoLocation(_x33) {
    return _setGeoLocation.apply(this, arguments);
  };
}();

methods.getGeoLocation = function () {
  var _getGeoLocation = (0, _asyncToGenerator2.default)(function* () {
    let output;

    try {
      output = yield this.shell(['am', 'broadcast', '-n', LOCATION_RECEIVER, '-a', LOCATION_RETRIEVAL_ACTION]);
    } catch (err) {
      throw new Error(`Cannot retrieve the current geo coordinates from the device. ` + `Make sure the Appium Settings application is up to date and has location permissions. Also the location ` + `services must be enabled on the device. Original error: ${err.message}`);
    }

    const match = /data="(-?[\d\.]+)\s+(-?[\d\.]+)\s+(-?[\d\.]+)"/.exec(output);

    if (!match) {
      throw new Error(`Cannot parse the actual location values from the command output: ${output}`);
    }

    const location = {
      latitude: match[1],
      longitude: match[2],
      altitude: match[3]
    };

    _logger.default.debug(`Got geo coordinates: ${JSON.stringify(location)}`);

    return location;
  });

  return function getGeoLocation() {
    return _getGeoLocation.apply(this, arguments);
  };
}();

methods.rimraf = function () {
  var _rimraf = (0, _asyncToGenerator2.default)(function* (path) {
    yield this.shell(['rm', '-rf', path]);
  });

  return function rimraf(_x34) {
    return _rimraf.apply(this, arguments);
  };
}();

methods.push = function () {
  var _push = (0, _asyncToGenerator2.default)(function* (localPath, remotePath, opts) {
    yield this.mkdir(_path.default.posix.dirname(remotePath));
    yield this.adbExec(['push', localPath, remotePath], opts);
  });

  return function push(_x35, _x36, _x37) {
    return _push.apply(this, arguments);
  };
}();

methods.pull = function () {
  var _pull = (0, _asyncToGenerator2.default)(function* (remotePath, localPath) {
    yield this.adbExec(['pull', remotePath, localPath], {
      timeout: 60000
    });
  });

  return function pull(_x38, _x39) {
    return _pull.apply(this, arguments);
  };
}();

methods.processExists = function () {
  var _processExists = (0, _asyncToGenerator2.default)(function* (processName) {
    if (!this.isValidClass(processName)) {
      throw new Error(`Invalid process name: ${processName}`);
    }

    return !_lodash.default.isEmpty((yield this.getPIDsByName(processName)));
  });

  return function processExists(_x40) {
    return _processExists.apply(this, arguments);
  };
}();

methods.getForwardList = function () {
  var _getForwardList = (0, _asyncToGenerator2.default)(function* () {
    _logger.default.debug(`List forwarding ports`);

    const connections = yield this.adbExec(['forward', '--list']);
    return connections.split(_os.EOL).filter(line => Boolean(line.trim()));
  });

  return function getForwardList() {
    return _getForwardList.apply(this, arguments);
  };
}();

methods.forwardPort = function () {
  var _forwardPort = (0, _asyncToGenerator2.default)(function* (systemPort, devicePort) {
    _logger.default.debug(`Forwarding system: ${systemPort} to device: ${devicePort}`);

    yield this.adbExec(['forward', `tcp:${systemPort}`, `tcp:${devicePort}`]);
  });

  return function forwardPort(_x41, _x42) {
    return _forwardPort.apply(this, arguments);
  };
}();

methods.removePortForward = function () {
  var _removePortForward = (0, _asyncToGenerator2.default)(function* (systemPort) {
    _logger.default.debug(`Removing forwarded port socket connection: ${systemPort} `);

    yield this.adbExec(['forward', `--remove`, `tcp:${systemPort}`]);
  });

  return function removePortForward(_x43) {
    return _removePortForward.apply(this, arguments);
  };
}();

methods.getReverseList = function () {
  var _getReverseList = (0, _asyncToGenerator2.default)(function* () {
    _logger.default.debug(`List reverse forwarding ports`);

    const connections = yield this.adbExec(['reverse', '--list']);
    return connections.split(_os.EOL).filter(line => Boolean(line.trim()));
  });

  return function getReverseList() {
    return _getReverseList.apply(this, arguments);
  };
}();

methods.reversePort = function () {
  var _reversePort = (0, _asyncToGenerator2.default)(function* (devicePort, systemPort) {
    _logger.default.debug(`Forwarding device: ${devicePort} to system: ${systemPort}`);

    yield this.adbExec(['reverse', `tcp:${devicePort}`, `tcp:${systemPort}`]);
  });

  return function reversePort(_x44, _x45) {
    return _reversePort.apply(this, arguments);
  };
}();

methods.removePortReverse = function () {
  var _removePortReverse = (0, _asyncToGenerator2.default)(function* (devicePort) {
    _logger.default.debug(`Removing reverse forwarded port socket connection: ${devicePort} `);

    yield this.adbExec(['reverse', `--remove`, `tcp:${devicePort}`]);
  });

  return function removePortReverse(_x46) {
    return _removePortReverse.apply(this, arguments);
  };
}();

methods.forwardAbstractPort = function () {
  var _forwardAbstractPort = (0, _asyncToGenerator2.default)(function* (systemPort, devicePort) {
    _logger.default.debug(`Forwarding system: ${systemPort} to abstract device: ${devicePort}`);

    yield this.adbExec(['forward', `tcp:${systemPort}`, `localabstract:${devicePort}`]);
  });

  return function forwardAbstractPort(_x47, _x48) {
    return _forwardAbstractPort.apply(this, arguments);
  };
}();

methods.ping = function () {
  var _ping = (0, _asyncToGenerator2.default)(function* () {
    let stdout = yield this.shell(['echo', 'ping']);

    if (stdout.indexOf('ping') === 0) {
      return true;
    }

    throw new Error(`ADB ping failed, returned ${stdout}`);
  });

  return function ping() {
    return _ping.apply(this, arguments);
  };
}();

methods.restart = function () {
  var _restart = (0, _asyncToGenerator2.default)(function* () {
    try {
      yield this.stopLogcat();
      yield this.restartAdb();
      yield this.waitForDevice(60);
      yield this.startLogcat();
    } catch (e) {
      throw new Error(`Restart failed. Original error: ${e.message}`);
    }
  });

  return function restart() {
    return _restart.apply(this, arguments);
  };
}();

methods.startLogcat = function () {
  var _startLogcat = (0, _asyncToGenerator2.default)(function* () {
    if (!_lodash.default.isEmpty(this.logcat)) {
      throw new Error("Trying to start logcat capture but it's already started!");
    }

    this.logcat = new _logcat.default({
      adb: this.executable,
      debug: false,
      debugTrace: false,
      clearDeviceLogsOnStart: !!this.clearDeviceLogsOnStart
    });
    yield this.logcat.startCapture();
  });

  return function startLogcat() {
    return _startLogcat.apply(this, arguments);
  };
}();

methods.stopLogcat = function () {
  var _stopLogcat = (0, _asyncToGenerator2.default)(function* () {
    if (_lodash.default.isEmpty(this.logcat)) {
      return;
    }

    try {
      yield this.logcat.stopCapture();
    } finally {
      this.logcat = null;
    }
  });

  return function stopLogcat() {
    return _stopLogcat.apply(this, arguments);
  };
}();

methods.getLogcatLogs = function getLogcatLogs() {
  if (_lodash.default.isEmpty(this.logcat)) {
    throw new Error("Can't get logcat logs since logcat hasn't started");
  }

  return this.logcat.getLogs();
};

methods.setLogcatListener = function setLogcatListener(listener) {
  if (_lodash.default.isEmpty(this.logcat)) {
    throw new Error("Logcat process hasn't been started");
  }

  this.logcat.on('output', listener);
};

methods.removeLogcatListener = function removeLogcatListener(listener) {
  if (_lodash.default.isEmpty(this.logcat)) {
    throw new Error("Logcat process hasn't been started");
  }

  this.logcat.removeListener('output', listener);
};

methods.getPIDsByName = function () {
  var _getPIDsByName = (0, _asyncToGenerator2.default)(function* (name) {
    _logger.default.debug(`Getting IDs of all '${name}' processes`);

    if (!_lodash.default.isBoolean(this._isPgrepAvailable)) {
      const pgrepOutput = _lodash.default.trim((yield this.shell(['pgrep --help; echo $?'])));

      this._isPgrepAvailable = parseInt(_lodash.default.last(pgrepOutput.split(/\s+/)), 10) === 0;

      if (this._isPgrepAvailable) {
        this._canPgrepUseFullCmdLineSearch = /^-f\b/m.test(pgrepOutput);
      } else {
        this._isPidofAvailable = parseInt((yield this.shell(['pidof --help > /dev/null; echo $?'])), 10) === 0;
      }
    }

    if (this._isPgrepAvailable || this._isPidofAvailable) {
      const shellCommand = this._isPgrepAvailable ? this._canPgrepUseFullCmdLineSearch ? ['pgrep', '-f', _lodash.default.escapeRegExp(name)] : ['pgrep', `^${_lodash.default.escapeRegExp(name.slice(-15))}$`] : ['pidof', name];

      try {
        return (yield this.shell(shellCommand)).split(/\s+/).map(x => parseInt(x, 10)).filter(x => _lodash.default.isInteger(x));
      } catch (e) {
        if (e.code === 1) {
          return [];
        }

        throw new Error(`Could not extract process ID of '${name}': ${e.message}`);
      }
    }

    _logger.default.debug('Using ps-based PID detection');

    const pidColumnTitle = 'PID';
    const processNameColumnTitle = 'NAME';
    const stdout = yield this.shell(['ps']);
    const titleMatch = new RegExp(`^(.*\\b${pidColumnTitle}\\b.*\\b${processNameColumnTitle}\\b.*)$`, 'm').exec(stdout);

    if (!titleMatch) {
      throw new Error(`Could not extract PID of '${name}' from ps output: ${stdout}`);
    }

    const allTitles = titleMatch[1].trim().split(/\s+/);
    const pidIndex = allTitles.indexOf(pidColumnTitle);
    const pids = [];
    const processNameRegex = new RegExp(`^(.*\\b\\d+\\b.*\\b${_lodash.default.escapeRegExp(name)}\\b.*)$`, 'gm');
    let matchedLine;

    while (matchedLine = processNameRegex.exec(stdout)) {
      const items = matchedLine[1].trim().split(/\s+/);

      if (pidIndex >= allTitles.length || isNaN(items[pidIndex])) {
        throw new Error(`Could not extract PID of '${name}' from '${matchedLine[1].trim()}'. ps output: ${stdout}`);
      }

      pids.push(parseInt(items[pidIndex], 10));
    }

    return pids;
  });

  return function getPIDsByName(_x49) {
    return _getPIDsByName.apply(this, arguments);
  };
}();

methods.killProcessesByName = function () {
  var _killProcessesByName = (0, _asyncToGenerator2.default)(function* (name) {
    try {
      _logger.default.debug(`Attempting to kill all ${name} processes`);

      let pids = yield this.getPIDsByName(name);

      if (_lodash.default.isEmpty(pids)) {
        _logger.default.info(`No '${name}' process has been found`);

        return;
      }

      var _iteratorNormalCompletion2 = true;
      var _didIteratorError2 = false;
      var _iteratorError2 = undefined;

      try {
        for (var _iterator2 = pids[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
          let pid = _step2.value;
          yield this.killProcessByPID(pid);
        }
      } catch (err) {
        _didIteratorError2 = true;
        _iteratorError2 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {
            _iterator2.return();
          }
        } finally {
          if (_didIteratorError2) {
            throw _iteratorError2;
          }
        }
      }
    } catch (e) {
      throw new Error(`Unable to kill ${name} processes. Original error: ${e.message}`);
    }
  });

  return function killProcessesByName(_x50) {
    return _killProcessesByName.apply(this, arguments);
  };
}();

methods.killProcessByPID = function () {
  var _killProcessByPID = (0, _asyncToGenerator2.default)(function* (pid) {
    var _this2 = this;

    _logger.default.debug(`Attempting to kill process ${pid}`);

    let wasRoot = false;
    let becameRoot = false;

    try {
      try {
        yield this.shell(['kill', '-0', pid]);
      } catch (e) {
        if (!e.message.includes('Operation not permitted')) {
          throw e;
        }

        try {
          wasRoot = yield this.isRoot();
        } catch (ign) {}

        if (wasRoot) {
          throw e;
        }

        _logger.default.info(`Cannot kill PID ${pid} due to insufficient permissions. Retrying as root`);

        let _ref2 = yield this.root(),
            isSuccessful = _ref2.isSuccessful;

        becameRoot = isSuccessful;
        yield this.shell(['kill', '-0', pid]);
      }

      const timeoutMs = 1000;
      let stdout;

      try {
        yield (0, _asyncbox.waitForCondition)((0, _asyncToGenerator2.default)(function* () {
          try {
            stdout = yield _this2.shell(['kill', pid]);
            return false;
          } catch (e) {
            return true;
          }
        }), {
          waitMs: timeoutMs,
          intervalMs: 300
        });
      } catch (err) {
        _logger.default.warn(`Cannot kill process ${pid} in ${timeoutMs} ms. Trying to force kill...`);

        stdout = yield this.shell(['kill', '-9', pid]);
      }

      return stdout;
    } finally {
      if (becameRoot) {
        yield this.unroot();
      }
    }
  });

  return function killProcessByPID(_x51) {
    return _killProcessByPID.apply(this, arguments);
  };
}();

methods.broadcastProcessEnd = function () {
  var _broadcastProcessEnd = (0, _asyncToGenerator2.default)(function* (intent, processName) {
    this.broadcast(intent);
    let start = Date.now();
    let timeoutMs = 40000;

    try {
      while (Date.now() - start < timeoutMs) {
        if (yield this.processExists(processName)) {
          yield (0, _asyncbox.sleep)(400);
          continue;
        }

        return;
      }

      throw new Error(`Process never died within ${timeoutMs} ms`);
    } catch (e) {
      throw new Error(`Unable to broadcast process end. Original error: ${e.message}`);
    }
  });

  return function broadcastProcessEnd(_x52, _x53) {
    return _broadcastProcessEnd.apply(this, arguments);
  };
}();

methods.broadcast = function () {
  var _broadcast = (0, _asyncToGenerator2.default)(function* (intent) {
    if (!this.isValidClass(intent)) {
      throw new Error(`Invalid intent ${intent}`);
    }

    _logger.default.debug(`Broadcasting: ${intent}`);

    yield this.shell(['am', 'broadcast', '-a', intent]);
  });

  return function broadcast(_x54) {
    return _broadcast.apply(this, arguments);
  };
}();

methods.endAndroidCoverage = function () {
  var _endAndroidCoverage = (0, _asyncToGenerator2.default)(function* () {
    if (this.instrumentProc && this.instrumentProc.isRunning) {
      yield this.instrumentProc.stop();
    }
  });

  return function endAndroidCoverage() {
    return _endAndroidCoverage.apply(this, arguments);
  };
}();

methods.instrument = function () {
  var _instrument = (0, _asyncToGenerator2.default)(function* (pkg, activity, instrumentWith) {
    if (activity[0] !== '.') {
      pkg = '';
    }

    let pkgActivity = (pkg + activity).replace(/\.+/g, '.');
    let stdout = yield this.shell(['am', 'instrument', '-e', 'main_activity', pkgActivity, instrumentWith]);

    if (stdout.indexOf('Exception') !== -1) {
      throw new Error(`Unknown exception during instrumentation. Original error ${stdout.split('\n')[0]}`);
    }
  });

  return function instrument(_x55, _x56, _x57) {
    return _instrument.apply(this, arguments);
  };
}();

methods.androidCoverage = function () {
  var _androidCoverage = (0, _asyncToGenerator2.default)(function* (instrumentClass, waitPkg, waitActivity) {
    var _this3 = this;

    if (!this.isValidClass(instrumentClass)) {
      throw new Error(`Invalid class ${instrumentClass}`);
    }

    return yield new _bluebird.default(function () {
      var _ref4 = (0, _asyncToGenerator2.default)(function* (resolve, reject) {
        let args = _this3.executable.defaultArgs.concat(['shell', 'am', 'instrument', '-e', 'coverage', 'true', '-w']).concat([instrumentClass]);

        _logger.default.debug(`Collecting coverage data with: ${[_this3.executable.path].concat(args).join(' ')}`);

        try {
          _this3.instrumentProc = new _teen_process.SubProcess(_this3.executable.path, args);
          yield _this3.instrumentProc.start(0);

          _this3.instrumentProc.on('output', (stdout, stderr) => {
            if (stderr) {
              reject(new Error(`Failed to run instrumentation. Original error: ${stderr}`));
            }
          });

          yield _this3.waitForActivity(waitPkg, waitActivity);
          resolve();
        } catch (e) {
          reject(new Error(`Android coverage failed. Original error: ${e.message}`));
        }
      });

      return function (_x61, _x62) {
        return _ref4.apply(this, arguments);
      };
    }());
  });

  return function androidCoverage(_x58, _x59, _x60) {
    return _androidCoverage.apply(this, arguments);
  };
}();

methods.getDeviceProperty = function () {
  var _getDeviceProperty = (0, _asyncToGenerator2.default)(function* (property) {
    let stdout = yield this.shell(['getprop', property]);
    let val = stdout.trim();

    _logger.default.debug(`Current device property '${property}': ${val}`);

    return val;
  });

  return function getDeviceProperty(_x63) {
    return _getDeviceProperty.apply(this, arguments);
  };
}();

methods.setDeviceProperty = function () {
  var _setDeviceProperty = (0, _asyncToGenerator2.default)(function* (prop, val, opts = {}) {
    const _opts$privileged = opts.privileged,
          privileged = _opts$privileged === void 0 ? true : _opts$privileged;

    _logger.default.debug(`Setting device property '${prop}' to '${val}'`);

    yield this.shell(['setprop', prop, val], {
      privileged
    });
  });

  return function setDeviceProperty(_x64, _x65) {
    return _setDeviceProperty.apply(this, arguments);
  };
}();

methods.getDeviceSysLanguage = function () {
  var _getDeviceSysLanguage = (0, _asyncToGenerator2.default)(function* () {
    return yield this.getDeviceProperty('persist.sys.language');
  });

  return function getDeviceSysLanguage() {
    return _getDeviceSysLanguage.apply(this, arguments);
  };
}();

methods.getDeviceSysCountry = function () {
  var _getDeviceSysCountry = (0, _asyncToGenerator2.default)(function* () {
    return yield this.getDeviceProperty('persist.sys.country');
  });

  return function getDeviceSysCountry() {
    return _getDeviceSysCountry.apply(this, arguments);
  };
}();

methods.getDeviceSysLocale = function () {
  var _getDeviceSysLocale = (0, _asyncToGenerator2.default)(function* () {
    return yield this.getDeviceProperty('persist.sys.locale');
  });

  return function getDeviceSysLocale() {
    return _getDeviceSysLocale.apply(this, arguments);
  };
}();

methods.getDeviceProductLanguage = function () {
  var _getDeviceProductLanguage = (0, _asyncToGenerator2.default)(function* () {
    return yield this.getDeviceProperty('ro.product.locale.language');
  });

  return function getDeviceProductLanguage() {
    return _getDeviceProductLanguage.apply(this, arguments);
  };
}();

methods.getDeviceProductCountry = function () {
  var _getDeviceProductCountry = (0, _asyncToGenerator2.default)(function* () {
    return yield this.getDeviceProperty('ro.product.locale.region');
  });

  return function getDeviceProductCountry() {
    return _getDeviceProductCountry.apply(this, arguments);
  };
}();

methods.getDeviceProductLocale = function () {
  var _getDeviceProductLocale = (0, _asyncToGenerator2.default)(function* () {
    return yield this.getDeviceProperty('ro.product.locale');
  });

  return function getDeviceProductLocale() {
    return _getDeviceProductLocale.apply(this, arguments);
  };
}();

methods.getModel = function () {
  var _getModel = (0, _asyncToGenerator2.default)(function* () {
    return yield this.getDeviceProperty('ro.product.model');
  });

  return function getModel() {
    return _getModel.apply(this, arguments);
  };
}();

methods.getManufacturer = function () {
  var _getManufacturer = (0, _asyncToGenerator2.default)(function* () {
    return yield this.getDeviceProperty('ro.product.manufacturer');
  });

  return function getManufacturer() {
    return _getManufacturer.apply(this, arguments);
  };
}();

methods.getScreenSize = function () {
  var _getScreenSize = (0, _asyncToGenerator2.default)(function* () {
    let stdout = yield this.shell(['wm', 'size']);
    let size = new RegExp(/Physical size: ([^\r?\n]+)*/g).exec(stdout);

    if (size && size.length >= 2) {
      return size[1].trim();
    }

    return null;
  });

  return function getScreenSize() {
    return _getScreenSize.apply(this, arguments);
  };
}();

methods.getScreenDensity = function () {
  var _getScreenDensity = (0, _asyncToGenerator2.default)(function* () {
    let stdout = yield this.shell(['wm', 'density']);
    let density = new RegExp(/Physical density: ([^\r?\n]+)*/g).exec(stdout);

    if (density && density.length >= 2) {
      let densityNumber = parseInt(density[1].trim(), 10);
      return isNaN(densityNumber) ? null : densityNumber;
    }

    return null;
  });

  return function getScreenDensity() {
    return _getScreenDensity.apply(this, arguments);
  };
}();

methods.setHttpProxy = function () {
  var _setHttpProxy = (0, _asyncToGenerator2.default)(function* (proxyHost, proxyPort) {
    let proxy = `${proxyHost}:${proxyPort}`;

    if (_lodash.default.isUndefined(proxyHost)) {
      throw new Error(`Call to setHttpProxy method with undefined proxy_host: ${proxy}`);
    }

    if (_lodash.default.isUndefined(proxyPort)) {
      throw new Error(`Call to setHttpProxy method with undefined proxy_port ${proxy}`);
    }

    const httpProxySettins = [['http_proxy', proxy], ['global_http_proxy_host', proxyHost], ['global_http_proxy_port', proxyPort]];

    for (var _i2 = 0; _i2 < httpProxySettins.length; _i2++) {
      const _httpProxySettins$_i = (0, _slicedToArray2.default)(httpProxySettins[_i2], 2),
            settingKey = _httpProxySettins$_i[0],
            settingValue = _httpProxySettins$_i[1];

      yield this.setSetting('global', settingKey, settingValue);
    }
  });

  return function setHttpProxy(_x66, _x67) {
    return _setHttpProxy.apply(this, arguments);
  };
}();

methods.deleteHttpProxy = function () {
  var _deleteHttpProxy = (0, _asyncToGenerator2.default)(function* () {
    const httpProxySettins = ['http_proxy', 'global_http_proxy_host', 'global_http_proxy_port', 'global_http_proxy_exclusion_list'];

    for (var _i3 = 0; _i3 < httpProxySettins.length; _i3++) {
      const setting = httpProxySettins[_i3];
      yield this.shell(['settings', 'delete', 'global', setting]);
    }
  });

  return function deleteHttpProxy() {
    return _deleteHttpProxy.apply(this, arguments);
  };
}();

methods.setSetting = function () {
  var _setSetting = (0, _asyncToGenerator2.default)(function* (namespace, setting, value) {
    return yield this.shell(['settings', 'put', namespace, setting, value]);
  });

  return function setSetting(_x68, _x69, _x70) {
    return _setSetting.apply(this, arguments);
  };
}();

methods.getSetting = function () {
  var _getSetting = (0, _asyncToGenerator2.default)(function* (namespace, setting) {
    return yield this.shell(['settings', 'get', namespace, setting]);
  });

  return function getSetting(_x71, _x72) {
    return _getSetting.apply(this, arguments);
  };
}();

methods.bugreport = function () {
  var _bugreport = (0, _asyncToGenerator2.default)(function* (timeout = 120000) {
    return yield this.adbExec(['bugreport'], {
      timeout
    });
  });

  return function bugreport() {
    return _bugreport.apply(this, arguments);
  };
}();

methods.screenrecord = function screenrecord(destination, options = {}) {
  const cmd = ['screenrecord'];
  const videoSize = options.videoSize,
        bitRate = options.bitRate,
        timeLimit = options.timeLimit,
        bugReport = options.bugReport;

  if (_appiumSupport.util.hasValue(videoSize)) {
    cmd.push('--size', videoSize);
  }

  if (_appiumSupport.util.hasValue(timeLimit)) {
    cmd.push('--time-limit', timeLimit);
  }

  if (_appiumSupport.util.hasValue(bitRate)) {
    cmd.push('--bit-rate', bitRate);
  }

  if (bugReport) {
    cmd.push('--bugreport');
  }

  cmd.push(destination);
  const fullCmd = [...this.executable.defaultArgs, 'shell', ...cmd];

  _logger.default.debug(`Building screenrecord process with the command line: adb ${(0, _shellQuote.quote)(fullCmd)}`);

  return new _teen_process.SubProcess(this.executable.path, fullCmd);
};

methods.performEditorAction = function () {
  var _performEditorAction = (0, _asyncToGenerator2.default)(function* (action) {
    _logger.default.debug(`Performing editor action: ${action}`);

    const defaultIME = yield this.defaultIME();
    yield this.enableIME(APPIUM_IME);

    try {
      yield this.setIME(APPIUM_IME);
      yield this.shell(['input', 'text', `/${action}/`]);
    } finally {
      yield this.setIME(defaultIME);
    }
  });

  return function performEditorAction(_x73) {
    return _performEditorAction.apply(this, arguments);
  };
}();

var _default = methods;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi90b29scy9hZGItY29tbWFuZHMuanMiXSwibmFtZXMiOlsiU0VUVElOR1NfSEVMUEVSX0lEIiwiV0lGSV9DT05ORUNUSU9OX1NFVFRJTkdfUkVDRUlWRVIiLCJXSUZJX0NPTk5FQ1RJT05fU0VUVElOR19BQ1RJT04iLCJEQVRBX0NPTk5FQ1RJT05fU0VUVElOR19SRUNFSVZFUiIsIkRBVEFfQ09OTkVDVElPTl9TRVRUSU5HX0FDVElPTiIsIkFOSU1BVElPTl9TRVRUSU5HX1JFQ0VJVkVSIiwiQU5JTUFUSU9OX1NFVFRJTkdfQUNUSU9OIiwiTE9DQUxFX1NFVFRJTkdfUkVDRUlWRVIiLCJMT0NBTEVfU0VUVElOR19BQ1RJT04iLCJMT0NBVElPTl9TRVJWSUNFIiwiTE9DQVRJT05fUkVDRUlWRVIiLCJMT0NBVElPTl9SRVRSSUVWQUxfQUNUSU9OIiwiQVBQSVVNX0lNRSIsIk1BWF9TSEVMTF9CVUZGRVJfTEVOR1RIIiwiTk9UX0NIQU5HRUFCTEVfUEVSTV9FUlJPUiIsIm1ldGhvZHMiLCJnZXRBZGJXaXRoQ29ycmVjdEFkYlBhdGgiLCJleGVjdXRhYmxlIiwicGF0aCIsImdldFNka0JpbmFyeVBhdGgiLCJhZGIiLCJpbml0QWFwdCIsImluaXRaaXBBbGlnbiIsImluaXRCdW5kbGV0b29sIiwiYmluYXJpZXMiLCJidW5kbGV0b29sIiwiZnMiLCJ3aGljaCIsImVyciIsIkVycm9yIiwiZ2V0QXBpTGV2ZWwiLCJfIiwiaXNJbnRlZ2VyIiwiX2FwaUxldmVsIiwic3RyT3V0cHV0IiwiZ2V0RGV2aWNlUHJvcGVydHkiLCJhcGlMZXZlbCIsInBhcnNlSW50IiwidHJpbSIsInRvTG93ZXJDYXNlIiwibG9nIiwiZGVidWciLCJpc05hTiIsImUiLCJtZXNzYWdlIiwiZ2V0UGxhdGZvcm1WZXJzaW9uIiwiaW5mbyIsImlzRGV2aWNlQ29ubmVjdGVkIiwiZGV2aWNlcyIsImdldENvbm5lY3RlZERldmljZXMiLCJsZW5ndGgiLCJta2RpciIsInJlbW90ZVBhdGgiLCJzaGVsbCIsImlzVmFsaWRDbGFzcyIsImNsYXNzU3RyaW5nIiwiUmVnRXhwIiwiZXhlYyIsImZvcmNlU3RvcCIsInBrZyIsImtpbGxQYWNrYWdlIiwiY2xlYXIiLCJncmFudEFsbFBlcm1pc3Npb25zIiwiYXBrIiwidGFyZ2V0U2RrIiwiZHVtcHN5c091dHB1dCIsInRhcmdldFNka1ZlcnNpb25Vc2luZ1BLRyIsInRhcmdldFNka1ZlcnNpb25Gcm9tTWFuaWZlc3QiLCJ3YXJuIiwicmVxdWVzdGVkUGVybWlzc2lvbnMiLCJnZXRSZXFQZXJtaXNzaW9ucyIsImdyYW50ZWRQZXJtaXNzaW9ucyIsImdldEdyYW50ZWRQZXJtaXNzaW9ucyIsInBlcm1pc3Npb25zVG9HcmFudCIsImRpZmZlcmVuY2UiLCJpc0VtcHR5IiwiZ3JhbnRQZXJtaXNzaW9ucyIsInBlcm1pc3Npb25zIiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbW1hbmRzIiwiY21kQ2h1bmsiLCJwZXJtaXNzaW9uIiwibmV4dENtZCIsImpvaW4iLCJwdXNoIiwibGFzdEVycm9yIiwiY21kIiwiaW5jbHVkZXMiLCJncmFudFBlcm1pc3Npb24iLCJlcnJvciIsInJldm9rZVBlcm1pc3Npb24iLCJjbWRPdXRwdXQiLCJzdGRvdXQiLCJnZXREZW5pZWRQZXJtaXNzaW9ucyIsImdldExvY2F0aW9uUHJvdmlkZXJzIiwiZ2V0U2V0dGluZyIsInNwbGl0IiwibWFwIiwicCIsImZpbHRlciIsIkJvb2xlYW4iLCJ0b2dnbGVHUFNMb2NhdGlvblByb3ZpZGVyIiwiZW5hYmxlZCIsInNldFNldHRpbmciLCJzZXRIaWRkZW5BcGlQb2xpY3kiLCJ2YWx1ZSIsInNldERlZmF1bHRIaWRkZW5BcGlQb2xpY3kiLCJzdG9wQW5kQ2xlYXIiLCJhdmFpbGFibGVJTUVzIiwiZW5hYmxlZElNRXMiLCJlbmFibGVJTUUiLCJpbWVJZCIsImRpc2FibGVJTUUiLCJzZXRJTUUiLCJkZWZhdWx0SU1FIiwiZW5naW5lIiwia2V5ZXZlbnQiLCJrZXljb2RlIiwiY29kZSIsImlucHV0VGV4dCIsInRleHQiLCJyZXBsYWNlIiwiY2xlYXJUZXh0RmllbGQiLCJhcmdzIiwiaSIsImxvY2siLCJpc1NjcmVlbkxvY2tlZCIsInRpbWVvdXRNcyIsIndhaXRNcyIsImludGVydmFsTXMiLCJiYWNrIiwiZ29Ub0hvbWUiLCJnZXRBZGJQYXRoIiwiZ2V0U2NyZWVuT3JpZW50YXRpb24iLCJwcm9jZXNzIiwiZW52IiwiQVBQSVVNX0xPR19EVU1QU1lTIiwiZHVtcHN5c0ZpbGUiLCJyZXNvbHZlIiwiY3dkIiwid3JpdGVGaWxlIiwiaXNTb2Z0S2V5Ym9hcmRQcmVzZW50IiwiaW5wdXRTaG93bk1hdGNoIiwiaW5wdXRWaWV3U2hvd25NYXRjaCIsImlzS2V5Ym9hcmRTaG93biIsImNhbkNsb3NlS2V5Ym9hcmQiLCJzZW5kVGVsbmV0Q29tbWFuZCIsImNvbW1hbmQiLCJwb3J0IiwiZ2V0RW11bGF0b3JQb3J0IiwiQiIsInJlamVjdCIsImNvbm4iLCJuZXQiLCJjcmVhdGVDb25uZWN0aW9uIiwiY29ubmVjdGVkIiwicmVhZHlSZWdleCIsImRhdGFTdHJlYW0iLCJyZXMiLCJvbiIsImRhdGEiLCJ0b1N0cmluZyIsInRlc3QiLCJ3cml0ZSIsImxhc3QiLCJpc0FpcnBsYW5lTW9kZU9uIiwic2V0QWlycGxhbmVNb2RlIiwiYnJvYWRjYXN0QWlycGxhbmVNb2RlIiwiaXNXaWZpT24iLCJzZXRXaWZpU3RhdGUiLCJpc0VtdWxhdG9yIiwicHJpdmlsZWdlZCIsImlzRGF0YU9uIiwic2V0RGF0YVN0YXRlIiwic2V0V2lmaUFuZERhdGEiLCJ3aWZpIiwidXRpbCIsImhhc1ZhbHVlIiwic2V0QW5pbWF0aW9uU3RhdGUiLCJpc0FuaW1hdGlvbk9uIiwiYW5pbWF0b3JfZHVyYXRpb25fc2NhbGUiLCJ0cmFuc2l0aW9uX2FuaW1hdGlvbl9zY2FsZSIsIndpbmRvd19hbmltYXRpb25fc2NhbGUiLCJzb21lIiwic2V0dGluZyIsInNldERldmljZVN5c0xvY2FsZVZpYVNldHRpbmdBcHAiLCJsYW5ndWFnZSIsImNvdW50cnkiLCJzY3JpcHQiLCJwYXJhbXMiLCJ0b1VwcGVyQ2FzZSIsInNldEdlb0xvY2F0aW9uIiwibG9jYXRpb24iLCJsb25naXR1ZGUiLCJwYXJzZUZsb2F0IiwiY2VpbCIsImxhdGl0dWRlIiwicmVzZXRUZWxuZXRBdXRoVG9rZW4iLCJhZGJFeGVjIiwiZ2V0R2VvTG9jYXRpb24iLCJvdXRwdXQiLCJtYXRjaCIsImFsdGl0dWRlIiwicmltcmFmIiwibG9jYWxQYXRoIiwib3B0cyIsInBvc2l4IiwiZGlybmFtZSIsInB1bGwiLCJ0aW1lb3V0IiwicHJvY2Vzc0V4aXN0cyIsInByb2Nlc3NOYW1lIiwiZ2V0UElEc0J5TmFtZSIsImdldEZvcndhcmRMaXN0IiwiY29ubmVjdGlvbnMiLCJFT0wiLCJsaW5lIiwiZm9yd2FyZFBvcnQiLCJzeXN0ZW1Qb3J0IiwiZGV2aWNlUG9ydCIsInJlbW92ZVBvcnRGb3J3YXJkIiwiZ2V0UmV2ZXJzZUxpc3QiLCJyZXZlcnNlUG9ydCIsInJlbW92ZVBvcnRSZXZlcnNlIiwiZm9yd2FyZEFic3RyYWN0UG9ydCIsInBpbmciLCJpbmRleE9mIiwicmVzdGFydCIsInN0b3BMb2djYXQiLCJyZXN0YXJ0QWRiIiwid2FpdEZvckRldmljZSIsInN0YXJ0TG9nY2F0IiwibG9nY2F0IiwiTG9nY2F0IiwiZGVidWdUcmFjZSIsImNsZWFyRGV2aWNlTG9nc09uU3RhcnQiLCJzdGFydENhcHR1cmUiLCJzdG9wQ2FwdHVyZSIsImdldExvZ2NhdExvZ3MiLCJnZXRMb2dzIiwic2V0TG9nY2F0TGlzdGVuZXIiLCJsaXN0ZW5lciIsInJlbW92ZUxvZ2NhdExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJuYW1lIiwiaXNCb29sZWFuIiwiX2lzUGdyZXBBdmFpbGFibGUiLCJwZ3JlcE91dHB1dCIsIl9jYW5QZ3JlcFVzZUZ1bGxDbWRMaW5lU2VhcmNoIiwiX2lzUGlkb2ZBdmFpbGFibGUiLCJzaGVsbENvbW1hbmQiLCJlc2NhcGVSZWdFeHAiLCJzbGljZSIsIngiLCJwaWRDb2x1bW5UaXRsZSIsInByb2Nlc3NOYW1lQ29sdW1uVGl0bGUiLCJ0aXRsZU1hdGNoIiwiYWxsVGl0bGVzIiwicGlkSW5kZXgiLCJwaWRzIiwicHJvY2Vzc05hbWVSZWdleCIsIm1hdGNoZWRMaW5lIiwiaXRlbXMiLCJraWxsUHJvY2Vzc2VzQnlOYW1lIiwicGlkIiwia2lsbFByb2Nlc3NCeVBJRCIsIndhc1Jvb3QiLCJiZWNhbWVSb290IiwiaXNSb290IiwiaWduIiwicm9vdCIsImlzU3VjY2Vzc2Z1bCIsInVucm9vdCIsImJyb2FkY2FzdFByb2Nlc3NFbmQiLCJpbnRlbnQiLCJicm9hZGNhc3QiLCJzdGFydCIsIkRhdGUiLCJub3ciLCJlbmRBbmRyb2lkQ292ZXJhZ2UiLCJpbnN0cnVtZW50UHJvYyIsImlzUnVubmluZyIsInN0b3AiLCJpbnN0cnVtZW50IiwiYWN0aXZpdHkiLCJpbnN0cnVtZW50V2l0aCIsInBrZ0FjdGl2aXR5IiwiYW5kcm9pZENvdmVyYWdlIiwiaW5zdHJ1bWVudENsYXNzIiwid2FpdFBrZyIsIndhaXRBY3Rpdml0eSIsImRlZmF1bHRBcmdzIiwiY29uY2F0IiwiU3ViUHJvY2VzcyIsInN0ZGVyciIsIndhaXRGb3JBY3Rpdml0eSIsInByb3BlcnR5IiwidmFsIiwic2V0RGV2aWNlUHJvcGVydHkiLCJwcm9wIiwiZ2V0RGV2aWNlU3lzTGFuZ3VhZ2UiLCJnZXREZXZpY2VTeXNDb3VudHJ5IiwiZ2V0RGV2aWNlU3lzTG9jYWxlIiwiZ2V0RGV2aWNlUHJvZHVjdExhbmd1YWdlIiwiZ2V0RGV2aWNlUHJvZHVjdENvdW50cnkiLCJnZXREZXZpY2VQcm9kdWN0TG9jYWxlIiwiZ2V0TW9kZWwiLCJnZXRNYW51ZmFjdHVyZXIiLCJnZXRTY3JlZW5TaXplIiwic2l6ZSIsImdldFNjcmVlbkRlbnNpdHkiLCJkZW5zaXR5IiwiZGVuc2l0eU51bWJlciIsInNldEh0dHBQcm94eSIsInByb3h5SG9zdCIsInByb3h5UG9ydCIsInByb3h5IiwiaXNVbmRlZmluZWQiLCJodHRwUHJveHlTZXR0aW5zIiwic2V0dGluZ0tleSIsInNldHRpbmdWYWx1ZSIsImRlbGV0ZUh0dHBQcm94eSIsIm5hbWVzcGFjZSIsImJ1Z3JlcG9ydCIsInNjcmVlbnJlY29yZCIsImRlc3RpbmF0aW9uIiwib3B0aW9ucyIsInZpZGVvU2l6ZSIsImJpdFJhdGUiLCJ0aW1lTGltaXQiLCJidWdSZXBvcnQiLCJmdWxsQ21kIiwicGVyZm9ybUVkaXRvckFjdGlvbiIsImFjdGlvbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUdBLE1BQU1BLGtCQUFrQixHQUFHLG9CQUEzQjtBQUNBLE1BQU1DLGdDQUFnQyxHQUFJLEdBQUVELGtCQUFtQiwyQ0FBL0Q7QUFDQSxNQUFNRSw4QkFBOEIsR0FBSSxHQUFFRixrQkFBbUIsT0FBN0Q7QUFDQSxNQUFNRyxnQ0FBZ0MsR0FBSSxHQUFFSCxrQkFBbUIsMkNBQS9EO0FBQ0EsTUFBTUksOEJBQThCLEdBQUksR0FBRUosa0JBQW1CLGtCQUE3RDtBQUNBLE1BQU1LLDBCQUEwQixHQUFJLEdBQUVMLGtCQUFtQixzQ0FBekQ7QUFDQSxNQUFNTSx3QkFBd0IsR0FBSSxHQUFFTixrQkFBbUIsWUFBdkQ7QUFDQSxNQUFNTyx1QkFBdUIsR0FBSSxHQUFFUCxrQkFBbUIsbUNBQXREO0FBQ0EsTUFBTVEscUJBQXFCLEdBQUksR0FBRVIsa0JBQW1CLFNBQXBEO0FBQ0EsTUFBTVMsZ0JBQWdCLEdBQUksR0FBRVQsa0JBQW1CLG1CQUEvQztBQUNBLE1BQU1VLGlCQUFpQixHQUFJLEdBQUVWLGtCQUFtQixrQ0FBaEQ7QUFDQSxNQUFNVyx5QkFBeUIsR0FBSSxHQUFFWCxrQkFBbUIsV0FBeEQ7QUFDQSxNQUFNWSxVQUFVLEdBQUksR0FBRVosa0JBQW1CLGFBQXpDO0FBQ0EsTUFBTWEsdUJBQXVCLEdBQUcsSUFBaEM7QUFDQSxNQUFNQyx5QkFBeUIsR0FBRyxrQ0FBbEM7QUFFQSxJQUFJQyxPQUFPLEdBQUcsRUFB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R0FBRzdNLEdBSFcsQ0FBaEI7O0FBS0EvQyxrQkFBSUMsS0FBSixDQUFXLDREQUEyRCx1QkFBTW1TLE9BQU4sQ0FBZSxFQUFyRjs7QUFDQSxTQUFPLElBQUl0Qyx3QkFBSixDQUFlLEtBQUtyUixVQUFMLENBQWdCQyxJQUEvQixFQUFxQzBULE9BQXJDLENBQVA7QUFDRCxDQTdCRDs7QUF5Q0E3VCxPQUFPLENBQUM4VCxtQkFBUjtBQUFBLDZEQUE4QixXQUFvQ0MsTUFBcEMsRUFBNEM7QUFDeEV0UyxvQkFBSUMsS0FBSixDQUFXLDZCQUE0QnFTLE1BQU8sRUFBOUM7O0FBQ0EsVUFBTTNOLFVBQVUsU0FBUyxLQUFLQSxVQUFMLEVBQXpCO0FBQ0EsVUFBTSxLQUFLSixTQUFMLENBQWVuRyxVQUFmLENBQU47O0FBQ0EsUUFBSTtBQUNGLFlBQU0sS0FBS3NHLE1BQUwsQ0FBWXRHLFVBQVosQ0FBTjtBQUNBLFlBQU0sS0FBS3lDLEtBQUwsQ0FBVyxDQUFDLE9BQUQsRUFBVSxNQUFWLEVBQW1CLElBQUd5UixNQUFPLEdBQTdCLENBQVgsQ0FBTjtBQUNELEtBSEQsU0FHVTtBQUNSLFlBQU0sS0FBSzVOLE1BQUwsQ0FBWUMsVUFBWixDQUFOO0FBQ0Q7QUFDRixHQVZEOztBQUFBLGtCQUE2QzBOLG1CQUE3QztBQUFBO0FBQUE7QUFBQTs7ZUFZZTlULE8iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbG9nIGZyb20gJy4uL2xvZ2dlci5qcyc7XG5pbXBvcnQgeyBnZXRJTUVMaXN0RnJvbU91dHB1dCwgaXNTaG93aW5nTG9ja3NjcmVlbiwgaXNDdXJyZW50Rm9jdXNPbktleWd1YXJkLFxuICAgICAgICAgZ2V0U3VyZmFjZU9yaWVudGF0aW9uLCBpc1NjcmVlbk9uRnVsbHksIGV4dHJhY3RNYXRjaGluZ1Blcm1pc3Npb25zIH0gZnJvbSAnLi4vaGVscGVycy5qcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBmcywgdXRpbCB9IGZyb20gJ2FwcGl1bS1zdXBwb3J0JztcbmltcG9ydCBuZXQgZnJvbSAnbmV0JztcbmltcG9ydCB7IEVPTCB9IGZyb20gJ29zJztcbmltcG9ydCBMb2djYXQgZnJvbSAnLi4vbG9nY2F0JztcbmltcG9ydCB7IHNsZWVwLCB3YWl0Rm9yQ29uZGl0aW9uIH0gZnJvbSAnYXN5bmNib3gnO1xuaW1wb3J0IHsgU3ViUHJvY2VzcyB9IGZyb20gJ3RlZW5fcHJvY2Vzcyc7XG5pbXBvcnQgQiBmcm9tICdibHVlYmlyZCc7XG5pbXBvcnQgeyBxdW90ZSB9IGZyb20gJ3NoZWxsLXF1b3RlJztcblxuXG5jb25zdCBTRVRUSU5HU19IRUxQRVJfSUQgPSAnaW8uYXBwaXVtLnNldHRpbmdzJztcbmNvbnN0IFdJRklfQ09OTkVDVElPTl9TRVRUSU5HX1JFQ0VJVkVSID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS8ucmVjZWl2ZXJzLldpRmlDb25uZWN0aW9uU2V0dGluZ1JlY2VpdmVyYDtcbmNvbnN0IFdJRklfQ09OTkVDVElPTl9TRVRUSU5HX0FDVElPTiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0ud2lmaWA7XG5jb25zdCBEQVRBX0NPTk5FQ1RJT05fU0VUVElOR19SRUNFSVZFUiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0vLnJlY2VpdmVycy5EYXRhQ29ubmVjdGlvblNldHRpbmdSZWNlaXZlcmA7XG5jb25zdCBEQVRBX0NPTk5FQ1RJT05fU0VUVElOR19BQ1RJT04gPSBgJHtTRVRUSU5HU19IRUxQRVJfSUR9LmRhdGFfY29ubmVjdGlvbmA7XG5jb25zdCBBTklNQVRJT05fU0VUVElOR19SRUNFSVZFUiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0vLnJlY2VpdmVycy5BbmltYXRpb25TZXR0aW5nUmVjZWl2ZXJgO1xuY29uc3QgQU5JTUFUSU9OX1NFVFRJTkdfQUNUSU9OID0gYCR7U0VUVElOR1NfSEVMUEVSX0lEfS5hbmltYXRpb25gO1xuY29uc3QgTE9DQUxFX1NFVFRJTkdfUkVDRUlWRVIgPSBgJHtTRVRUSU5HU19IRUxQRVJfSUR9Ly5yZWNlaXZlcnMuTG9jYWxlU2V0dGluZ1JlY2VpdmVyYDtcbmNvbnN0IExPQ0FMRV9TRVRUSU5HX0FDVElPTiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0ubG9jYWxlYDtcbmNvbnN0IExPQ0FUSU9OX1NFUlZJQ0UgPSBgJHtTRVRUSU5HU19IRUxQRVJfSUR9Ly5Mb2NhdGlvblNlcnZpY2VgO1xuY29uc3QgTE9DQVRJT05fUkVDRUlWRVIgPSBgJHtTRVRUSU5HU19IRUxQRVJfSUR9Ly5yZWNlaXZlcnMuTG9jYXRpb25JbmZvUmVjZWl2ZXJgO1xuY29uc3QgTE9DQVRJT05fUkVUUklFVkFMX0FDVElPTiA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0ubG9jYXRpb25gO1xuY29uc3QgQVBQSVVNX0lNRSA9IGAke1NFVFRJTkdTX0hFTFBFUl9JRH0vLkFwcGl1bUlNRWA7XG5jb25zdCBNQVhfU0hFTExfQlVGRkVSX0xFTkdUSCA9IDEwMDA7XG5jb25zdCBOT1RfQ0hBTkdFQUJMRV9QRVJNX0VSUk9SID0gJ25vdCBhIGNoYW5nZWFibGUgcGVybWlzc2lvbiB0eXBlJztcblxubGV0IG1ldGhvZHMgPSB7fTtcblxuLyoqXG4gKiBHZXQgdGhlIHBhdGggdG8gYWRiIGV4ZWN1dGFibGUgYW1kIGFzc2lnbiBpdFxuICogdG8gdGhpcy5leGVjdXRhYmxlLnBhdGggYW5kIHRoaXMuYmluYXJpZXMuYWRiIHByb3BlcnRpZXMuXG4gKlxuICogQHJldHVybiB7c3RyaW5nfSBGdWxsIHBhdGggdG8gYWRiIGV4ZWN1dGFibGUuXG4gKi9cbm1ldGhvZHMuZ2V0QWRiV2l0aENvcnJlY3RBZGJQYXRoID0gYXN5bmMgZnVuY3Rpb24gZ2V0QWRiV2l0aENvcnJlY3RBZGJQYXRoICgpIHtcbiAgdGhpcy5leGVjdXRhYmxlLnBhdGggPSBhd2FpdCB0aGlzLmdldFNka0JpbmFyeVBhdGgoJ2FkYicpO1xuICByZXR1cm4gdGhpcy5hZGI7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgZnVsbCBwYXRoIHRvIGFhcHQgdG9vbCBhbmQgYXNzaWduIGl0IHRvXG4gKiB0aGlzLmJpbmFyaWVzLmFhcHQgcHJvcGVydHlcbiAqL1xubWV0aG9kcy5pbml0QWFwdCA9IGFzeW5jIGZ1bmN0aW9uIGluaXRBYXB0ICgpIHtcbiAgYXdhaXQgdGhpcy5nZXRTZGtCaW5hcnlQYXRoKCdhYXB0Jyk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgZnVsbCBwYXRoIHRvIHppcGFsaWduIHRvb2wgYW5kIGFzc2lnbiBpdCB0b1xuICogdGhpcy5iaW5hcmllcy56aXBhbGlnbiBwcm9wZXJ0eVxuICovXG5tZXRob2RzLmluaXRaaXBBbGlnbiA9IGFzeW5jIGZ1bmN0aW9uIGluaXRaaXBBbGlnbiAoKSB7XG4gIGF3YWl0IHRoaXMuZ2V0U2RrQmluYXJ5UGF0aCgnemlwYWxpZ24nKTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBmdWxsIHBhdGggdG8gYnVuZGxldG9vbCBiaW5hcnkgYW5kIGFzc2lnbiBpdCB0b1xuICogdGhpcy5iaW5hcmllcy5idW5kbGV0b29sIHByb3BlcnR5XG4gKi9cbm1ldGhvZHMuaW5pdEJ1bmRsZXRvb2wgPSBhc3luYyBmdW5jdGlvbiBpbml0QnVuZGxldG9vbCAoKSB7XG4gIHRyeSB7XG4gICAgdGhpcy5iaW5hcmllcy5idW5kbGV0b29sID0gYXdhaXQgZnMud2hpY2goJ2J1bmRsZXRvb2wuamFyJyk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHRocm93IG5ldyBFcnJvcignYnVuZGxldG9vbC5qYXIgYmluYXJ5IGlzIGV4cGVjdGVkIHRvIGJlIHByZXNlbnQgaW4gUEFUSC4gJyArXG4gICAgICAnVmlzaXQgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9idW5kbGV0b29sIGZvciBtb3JlIGRldGFpbHMuJyk7XG4gIH1cbn07XG5cbi8qKlxuICogUmV0cmlldmUgdGhlIEFQSSBsZXZlbCBvZiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgQVBJIGxldmVsIGFzIGludGVnZXIgbnVtYmVyLCBmb3IgZXhhbXBsZSAyMSBmb3JcbiAqICAgICAgICAgICAgICAgICAgQW5kcm9pZCBMb2xsaXBvcC4gVGhlIHJlc3VsdCBvZiB0aGlzIG1ldGhvZCBpcyBjYWNoZWQsIHNvIGFsbCB0aGUgZnVydGhlclxuICogY2FsbHMgcmV0dXJuIHRoZSBzYW1lIHZhbHVlIGFzIHRoZSBmaXJzdCBvbmUuXG4gKi9cbm1ldGhvZHMuZ2V0QXBpTGV2ZWwgPSBhc3luYyBmdW5jdGlvbiBnZXRBcGlMZXZlbCAoKSB7XG4gIGlmICghXy5pc0ludGVnZXIodGhpcy5fYXBpTGV2ZWwpKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHN0ck91dHB1dCA9IGF3YWl0IHRoaXMuZ2V0RGV2aWNlUHJvcGVydHkoJ3JvLmJ1aWxkLnZlcnNpb24uc2RrJyk7XG4gICAgICBsZXQgYXBpTGV2ZWwgPSBwYXJzZUludChzdHJPdXRwdXQudHJpbSgpLCAxMCk7XG5cbiAgICAgIC8vIFRlbXAgd29ya2Fyb3VuZC4gQW5kcm9pZCBRIGJldGEgZW11bGF0b3JzIHJlcG9ydCBTREsgMjggd2hlbiB0aGV5IHNob3VsZCBiZSAyOVxuICAgICAgaWYgKGFwaUxldmVsID09PSAyOCAmJiAoYXdhaXQgdGhpcy5nZXREZXZpY2VQcm9wZXJ0eSgncm8uYnVpbGQudmVyc2lvbi5yZWxlYXNlJykpLnRvTG93ZXJDYXNlKCkgPT09ICdxJykge1xuICAgICAgICBsb2cuZGVidWcoJ1JlbGVhc2UgdmVyc2lvbiBpcyBRIGJ1dCBmb3VuZCBBUEkgTGV2ZWwgMjguIFNldHRpbmcgQVBJIExldmVsIHRvIDI5Jyk7XG4gICAgICAgIGFwaUxldmVsID0gMjk7XG4gICAgICB9XG4gICAgICB0aGlzLl9hcGlMZXZlbCA9IGFwaUxldmVsO1xuICAgICAgbG9nLmRlYnVnKGBEZXZpY2UgQVBJIGxldmVsOiAke3RoaXMuX2FwaUxldmVsfWApO1xuICAgICAgaWYgKGlzTmFOKHRoaXMuX2FwaUxldmVsKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBhY3R1YWwgb3V0cHV0ICcke3N0ck91dHB1dH0nIGNhbm5vdCBiZSBjb252ZXJ0ZWQgdG8gYW4gaW50ZWdlcmApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZ2V0dGluZyBkZXZpY2UgQVBJIGxldmVsLiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG4gIHJldHVybiB0aGlzLl9hcGlMZXZlbDtcbn07XG5cbi8qKlxuICogUmV0cmlldmUgdGhlIHBsYXRmb3JtIHZlcnNpb24gb2YgdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHBsYXRmb3JtIHZlcnNpb24gYXMgYSBzdHJpbmcsIGZvciBleGFtcGxlICc1LjAnIGZvclxuICogQW5kcm9pZCBMb2xsaXBvcC5cbiAqL1xubWV0aG9kcy5nZXRQbGF0Zm9ybVZlcnNpb24gPSBhc3luYyBmdW5jdGlvbiBnZXRQbGF0Zm9ybVZlcnNpb24gKCkge1xuICBsb2cuaW5mbygnR2V0dGluZyBkZXZpY2UgcGxhdGZvcm0gdmVyc2lvbicpO1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmdldERldmljZVByb3BlcnR5KCdyby5idWlsZC52ZXJzaW9uLnJlbGVhc2UnKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZ2V0dGluZyBkZXZpY2UgcGxhdGZvcm0gdmVyc2lvbi4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICB9XG59O1xuXG4vKipcbiAqIFZlcmlmeSB3aGV0aGVyIGEgZGV2aWNlIGlzIGNvbm5lY3RlZC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGF0IGxlYXN0IG9uZSBkZXZpY2UgaXMgdmlzaWJsZSB0byBhZGIuXG4gKi9cbm1ldGhvZHMuaXNEZXZpY2VDb25uZWN0ZWQgPSBhc3luYyBmdW5jdGlvbiBpc0RldmljZUNvbm5lY3RlZCAoKSB7XG4gIGxldCBkZXZpY2VzID0gYXdhaXQgdGhpcy5nZXRDb25uZWN0ZWREZXZpY2VzKCk7XG4gIHJldHVybiBkZXZpY2VzLmxlbmd0aCA+IDA7XG59O1xuXG4vKipcbiAqIFJlY3Vyc2l2ZWx5IGNyZWF0ZSBhIG5ldyBmb2xkZXIgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSByZW1vdGVQYXRoIC0gVGhlIG5ldyBwYXRoIHRvIGJlIGNyZWF0ZWQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IG1rZGlyIGNvbW1hbmQgb3V0cHV0LlxuICovXG5tZXRob2RzLm1rZGlyID0gYXN5bmMgZnVuY3Rpb24gbWtkaXIgKHJlbW90ZVBhdGgpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuc2hlbGwoWydta2RpcicsICctcCcsIHJlbW90ZVBhdGhdKTtcbn07XG5cbi8qKlxuICogVmVyaWZ5IHdoZXRoZXIgdGhlIGdpdmVuIGFyZ3VtZW50IGlzIGFcbiAqIHZhbGlkIGNsYXNzIG5hbWUuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzU3RyaW5nIC0gVGhlIGFjdHVhbCBjbGFzcyBuYW1lIHRvIGJlIHZlcmlmaWVkLlxuICogQHJldHVybiB7P0FycmF5LjxNYXRjaD59IFRoZSByZXN1bHQgb2YgUmVnZXhwLmV4ZWMgb3BlcmF0aW9uXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgX251bGxfIGlmIG5vIG1hdGNoZXMgYXJlIGZvdW5kLlxuICovXG5tZXRob2RzLmlzVmFsaWRDbGFzcyA9IGZ1bmN0aW9uIGlzVmFsaWRDbGFzcyAoY2xhc3NTdHJpbmcpIHtcbiAgLy8gc29tZS5wYWNrYWdlL3NvbWUucGFja2FnZS5BY3Rpdml0eVxuICByZXR1cm4gbmV3IFJlZ0V4cCgvXlthLXpBLVowLTkuL19dKyQvKS5leGVjKGNsYXNzU3RyaW5nKTtcbn07XG5cbi8qKlxuICogRm9yY2UgYXBwbGljYXRpb24gdG8gc3RvcCBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBwYWNrYWdlIG5hbWUgdG8gYmUgc3RvcHBlZC5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIG91dHB1dCBvZiB0aGUgY29ycmVzcG9uZGluZyBhZGIgY29tbWFuZC5cbiAqL1xubWV0aG9kcy5mb3JjZVN0b3AgPSBhc3luYyBmdW5jdGlvbiBmb3JjZVN0b3AgKHBrZykge1xuICByZXR1cm4gYXdhaXQgdGhpcy5zaGVsbChbJ2FtJywgJ2ZvcmNlLXN0b3AnLCBwa2ddKTtcbn07XG5cbi8qXG4gKiBLaWxsIGFwcGxpY2F0aW9uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBwYWNrYWdlIG5hbWUgdG8gYmUgc3RvcHBlZC5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIG91dHB1dCBvZiB0aGUgY29ycmVzcG9uZGluZyBhZGIgY29tbWFuZC5cbiAqL1xubWV0aG9kcy5raWxsUGFja2FnZSA9IGFzeW5jIGZ1bmN0aW9uIGtpbGxQYWNrYWdlIChwa2cpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuc2hlbGwoWydhbScsICdraWxsJywgcGtnXSk7XG59O1xuXG4vKipcbiAqIENsZWFyIHRoZSB1c2VyIGRhdGEgb2YgdGhlIHBhcnRpY3VsYXIgYXBwbGljYXRpb24gb24gdGhlIGRldmljZVxuICogdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGtnIC0gVGhlIHBhY2thZ2UgbmFtZSB0byBiZSBjbGVhcmVkLlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgb3V0cHV0IG9mIHRoZSBjb3JyZXNwb25kaW5nIGFkYiBjb21tYW5kLlxuICovXG5tZXRob2RzLmNsZWFyID0gYXN5bmMgZnVuY3Rpb24gY2xlYXIgKHBrZykge1xuICByZXR1cm4gYXdhaXQgdGhpcy5zaGVsbChbJ3BtJywgJ2NsZWFyJywgcGtnXSk7XG59O1xuXG4vKipcbiAqIEdyYW50IGFsbCBwZXJtaXNzaW9ucyByZXF1ZXN0ZWQgYnkgdGhlIHBhcnRpY3VsYXIgcGFja2FnZS5cbiAqIFRoaXMgbWV0aG9kIGlzIG9ubHkgdXNlZnVsIG9uIEFuZHJvaWQgNi4wKyBhbmQgZm9yIGFwcGxpY2F0aW9uc1xuICogdGhhdCBzdXBwb3J0IGNvbXBvbmVudHMtYmFzZWQgcGVybWlzc2lvbnMgc2V0dGluZy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGtnIC0gVGhlIHBhY2thZ2UgbmFtZSB0byBiZSBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gYXBrIC0gVGhlIHBhdGggdG8gdGhlIGFjdHVhbCBhcGsgZmlsZS5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGVyZSB3YXMgYW4gZXJyb3Igd2hpbGUgZ3JhbnRpbmcgcGVybWlzc2lvbnNcbiAqL1xubWV0aG9kcy5ncmFudEFsbFBlcm1pc3Npb25zID0gYXN5bmMgZnVuY3Rpb24gZ3JhbnRBbGxQZXJtaXNzaW9ucyAocGtnLCBhcGspIHtcbiAgY29uc3QgYXBpTGV2ZWwgPSBhd2FpdCB0aGlzLmdldEFwaUxldmVsKCk7XG4gIGxldCB0YXJnZXRTZGsgPSAwO1xuICBsZXQgZHVtcHN5c091dHB1dCA9IG51bGw7XG4gIHRyeSB7XG4gICAgaWYgKCFhcGspIHtcbiAgICAgIC8qKlxuICAgICAgICogSWYgYXBrIG5vdCBwcm92aWRlZCwgY29uc2lkZXJpbmcgYXBrIGFscmVhZHkgaW5zdGFsbGVkIG9uIHRoZSBkZXZpY2VcbiAgICAgICAqIGFuZCBmZXRjaGluZyB0YXJnZXRTZGsgdXNpbmcgcGFja2FnZSBuYW1lLlxuICAgICAgICovXG4gICAgICBkdW1wc3lzT3V0cHV0ID0gYXdhaXQgdGhpcy5zaGVsbChbJ2R1bXBzeXMnLCAncGFja2FnZScsIHBrZ10pO1xuICAgICAgdGFyZ2V0U2RrID0gYXdhaXQgdGhpcy50YXJnZXRTZGtWZXJzaW9uVXNpbmdQS0cocGtnLCBkdW1wc3lzT3V0cHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0U2RrID0gYXdhaXQgdGhpcy50YXJnZXRTZGtWZXJzaW9uRnJvbU1hbmlmZXN0KGFwayk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgLy9hdm9pZGluZyBsb2dnaW5nIGVycm9yIHN0YWNrLCBhcyBjYWxsaW5nIGxpYnJhcnkgZnVuY3Rpb24gd291bGQgaGF2ZSBsb2dnZWRcbiAgICBsb2cud2FybihgUmFuIGludG8gcHJvYmxlbSBnZXR0aW5nIHRhcmdldCBTREsgdmVyc2lvbjsgaWdub3JpbmcuLi5gKTtcbiAgfVxuICBpZiAoYXBpTGV2ZWwgPj0gMjMgJiYgdGFyZ2V0U2RrID49IDIzKSB7XG4gICAgLyoqXG4gICAgICogSWYgdGhlIGRldmljZSBpcyBydW5uaW5nIEFuZHJvaWQgNi4wKEFQSSAyMykgb3IgaGlnaGVyLCBhbmQgeW91ciBhcHAncyB0YXJnZXQgU0RLIGlzIDIzIG9yIGhpZ2hlcjpcbiAgICAgKiBUaGUgYXBwIGhhcyB0byBsaXN0IHRoZSBwZXJtaXNzaW9ucyBpbiB0aGUgbWFuaWZlc3QuXG4gICAgICogcmVmZXI6IGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3RyYWluaW5nL3Blcm1pc3Npb25zL3JlcXVlc3RpbmcuaHRtbFxuICAgICAqL1xuICAgIGR1bXBzeXNPdXRwdXQgPSBkdW1wc3lzT3V0cHV0IHx8IGF3YWl0IHRoaXMuc2hlbGwoWydkdW1wc3lzJywgJ3BhY2thZ2UnLCBwa2ddKTtcbiAgICBjb25zdCByZXF1ZXN0ZWRQZXJtaXNzaW9ucyA9IGF3YWl0IHRoaXMuZ2V0UmVxUGVybWlzc2lvbnMocGtnLCBkdW1wc3lzT3V0cHV0KTtcbiAgICBjb25zdCBncmFudGVkUGVybWlzc2lvbnMgPSBhd2FpdCB0aGlzLmdldEdyYW50ZWRQZXJtaXNzaW9ucyhwa2csIGR1bXBzeXNPdXRwdXQpO1xuICAgIGNvbnN0IHBlcm1pc3Npb25zVG9HcmFudCA9IF8uZGlmZmVyZW5jZShyZXF1ZXN0ZWRQZXJtaXNzaW9ucywgZ3JhbnRlZFBlcm1pc3Npb25zKTtcbiAgICBpZiAoXy5pc0VtcHR5KHBlcm1pc3Npb25zVG9HcmFudCkpIHtcbiAgICAgIGxvZy5pbmZvKGAke3BrZ30gY29udGFpbnMgbm8gcGVybWlzc2lvbnMgYXZhaWxhYmxlIGZvciBncmFudGluZ2ApO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCB0aGlzLmdyYW50UGVybWlzc2lvbnMocGtnLCBwZXJtaXNzaW9uc1RvR3JhbnQpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBHcmFudCBtdWx0aXBsZSBwZXJtaXNzaW9ucyBmb3IgdGhlIHBhcnRpY3VsYXIgcGFja2FnZS5cbiAqIFRoaXMgY2FsbCBpcyBtb3JlIHBlcmZvcm1hbnQgdGhhbiBgZ3JhbnRQZXJtaXNzaW9uYCBvbmUsIHNpbmNlIGl0IGNvbWJpbmVzXG4gKiBtdWx0aXBsZSBgYWRiIHNoZWxsYCBjYWxscyBpbnRvIGEgc2luZ2xlIGNvbW1hbmQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBwYWNrYWdlIG5hbWUgdG8gYmUgcHJvY2Vzc2VkLlxuICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBwZXJtaXNzaW9ucyAtIFRoZSBsaXN0IG9mIHBlcm1pc3Npb25zIHRvIGJlIGdyYW50ZWQuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIGNoYW5naW5nIHBlcm1pc3Npb25zLlxuICovXG5tZXRob2RzLmdyYW50UGVybWlzc2lvbnMgPSBhc3luYyBmdW5jdGlvbiBncmFudFBlcm1pc3Npb25zIChwa2csIHBlcm1pc3Npb25zKSB7XG4gIC8vIEFzIGl0IGNvbnN1bWVzIG1vcmUgdGltZSBmb3IgZ3JhbnRpbmcgZWFjaCBwZXJtaXNzaW9uLFxuICAvLyB0cnlpbmcgdG8gZ3JhbnQgYWxsIHBlcm1pc3Npb24gYnkgZm9ybWluZyBlcXVpdmFsZW50IGNvbW1hbmQuXG4gIC8vIEFsc28sIGl0IGlzIG5lY2Vzc2FyeSB0byBzcGxpdCBsb25nIGNvbW1hbmRzIGludG8gY2h1bmtzLCBzaW5jZSB0aGUgbWF4aW11bSBsZW5ndGggb2ZcbiAgLy8gYWRiIHNoZWxsIGJ1ZmZlciBpcyBsaW1pdGVkXG4gIGxvZy5kZWJ1ZyhgR3JhbnRpbmcgcGVybWlzc2lvbnMgJHtKU09OLnN0cmluZ2lmeShwZXJtaXNzaW9ucyl9IHRvICcke3BrZ30nYCk7XG4gIGNvbnN0IGNvbW1hbmRzID0gW107XG4gIGxldCBjbWRDaHVuayA9IFtdO1xuICBmb3IgKGNvbnN0IHBlcm1pc3Npb24gb2YgcGVybWlzc2lvbnMpIHtcbiAgICBjb25zdCBuZXh0Q21kID0gWydwbScsICdncmFudCcsIHBrZywgcGVybWlzc2lvbiwgJzsnXTtcbiAgICBpZiAobmV4dENtZC5qb2luKCcgJykubGVuZ3RoICsgY21kQ2h1bmsuam9pbignICcpLmxlbmd0aCA+PSBNQVhfU0hFTExfQlVGRkVSX0xFTkdUSCkge1xuICAgICAgY29tbWFuZHMucHVzaChjbWRDaHVuayk7XG4gICAgICBjbWRDaHVuayA9IFtdO1xuICAgIH1cbiAgICBjbWRDaHVuayA9IFsuLi5jbWRDaHVuaywgLi4ubmV4dENtZF07XG4gIH1cbiAgaWYgKCFfLmlzRW1wdHkoY21kQ2h1bmspKSB7XG4gICAgY29tbWFuZHMucHVzaChjbWRDaHVuayk7XG4gIH1cbiAgbG9nLmRlYnVnKGBHb3QgdGhlIGZvbGxvd2luZyBjb21tYW5kIGNodW5rcyB0byBleGVjdXRlOiAke0pTT04uc3RyaW5naWZ5KGNvbW1hbmRzKX1gKTtcbiAgbGV0IGxhc3RFcnJvciA9IG51bGw7XG4gIGZvciAoY29uc3QgY21kIG9mIGNvbW1hbmRzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuc2hlbGwoY21kKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyB0aGlzIGlzIHRvIGdpdmUgdGhlIG1ldGhvZCBhIGNoYW5jZSB0byBhc3NpZ24gYWxsIHRoZSByZXF1ZXN0ZWQgcGVybWlzc2lvbnNcbiAgICAgIC8vIGJlZm9yZSB0byBxdWl0IGluIGNhc2Ugd2UnZCBsaWtlIHRvIGlnbm9yZSB0aGUgZXJyb3Igb24gdGhlIGhpZ2hlciBsZXZlbFxuICAgICAgaWYgKCFlLm1lc3NhZ2UuaW5jbHVkZXMoTk9UX0NIQU5HRUFCTEVfUEVSTV9FUlJPUikpIHtcbiAgICAgICAgbGFzdEVycm9yID0gZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGxhc3RFcnJvcikge1xuICAgIHRocm93IGxhc3RFcnJvcjtcbiAgfVxufTtcblxuLyoqXG4gKiBHcmFudCBzaW5nbGUgcGVybWlzc2lvbiBmb3IgdGhlIHBhcnRpY3VsYXIgcGFja2FnZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGtnIC0gVGhlIHBhY2thZ2UgbmFtZSB0byBiZSBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gcGVybWlzc2lvbiAtIFRoZSBmdWxsIG5hbWUgb2YgdGhlIHBlcm1pc3Npb24gdG8gYmUgZ3JhbnRlZC5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGVyZSB3YXMgYW4gZXJyb3Igd2hpbGUgY2hhbmdpbmcgcGVybWlzc2lvbnMuXG4gKi9cbm1ldGhvZHMuZ3JhbnRQZXJtaXNzaW9uID0gYXN5bmMgZnVuY3Rpb24gZ3JhbnRQZXJtaXNzaW9uIChwa2csIHBlcm1pc3Npb24pIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCB0aGlzLnNoZWxsKFsncG0nLCAnZ3JhbnQnLCBwa2csIHBlcm1pc3Npb25dKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoIWVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoTk9UX0NIQU5HRUFCTEVfUEVSTV9FUlJPUikpIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBSZXZva2Ugc2luZ2xlIHBlcm1pc3Npb24gZnJvbSB0aGUgcGFydGljdWxhciBwYWNrYWdlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwa2cgLSBUaGUgcGFja2FnZSBuYW1lIHRvIGJlIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBwZXJtaXNzaW9uIC0gVGhlIGZ1bGwgbmFtZSBvZiB0aGUgcGVybWlzc2lvbiB0byBiZSByZXZva2VkLlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZXJlIHdhcyBhbiBlcnJvciB3aGlsZSBjaGFuZ2luZyBwZXJtaXNzaW9ucy5cbiAqL1xubWV0aG9kcy5yZXZva2VQZXJtaXNzaW9uID0gYXN5bmMgZnVuY3Rpb24gcmV2b2tlUGVybWlzc2lvbiAocGtnLCBwZXJtaXNzaW9uKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgdGhpcy5zaGVsbChbJ3BtJywgJ3Jldm9rZScsIHBrZywgcGVybWlzc2lvbl0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGlmICghZXJyb3IubWVzc2FnZS5pbmNsdWRlcyhOT1RfQ0hBTkdFQUJMRV9QRVJNX0VSUk9SKSkge1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIFJldHJpZXZlIHRoZSBsaXN0IG9mIGdyYW50ZWQgcGVybWlzc2lvbnMgZm9yIHRoZSBwYXJ0aWN1bGFyIHBhY2thZ2UuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBwYWNrYWdlIG5hbWUgdG8gYmUgcHJvY2Vzc2VkLlxuICogQHBhcmFtIHtzdHJpbmd9IGNtZE91dHB1dCBbbnVsbF0gLSBPcHRpb25hbCBwYXJhbWV0ZXIgY29udGFpbmluZyBjb21tYW5kIG91dHB1dCBvZlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZHVtcHN5cyBwYWNrYWdlXyBjb21tYW5kLiBJdCBtYXkgc3BlZWQgdXAgdGhlIG1ldGhvZCBleGVjdXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxTdHJpbmc+fSBUaGUgbGlzdCBvZiBncmFudGVkIHBlcm1pc3Npb25zIG9yIGFuIGVtcHR5IGxpc3QuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIGNoYW5naW5nIHBlcm1pc3Npb25zLlxuICovXG5tZXRob2RzLmdldEdyYW50ZWRQZXJtaXNzaW9ucyA9IGFzeW5jIGZ1bmN0aW9uIGdldEdyYW50ZWRQZXJtaXNzaW9ucyAocGtnLCBjbWRPdXRwdXQgPSBudWxsKSB7XG4gIGxvZy5kZWJ1ZygnUmV0cmlldmluZyBncmFudGVkIHBlcm1pc3Npb25zJyk7XG4gIGNvbnN0IHN0ZG91dCA9IGNtZE91dHB1dCB8fCBhd2FpdCB0aGlzLnNoZWxsKFsnZHVtcHN5cycsICdwYWNrYWdlJywgcGtnXSk7XG4gIHJldHVybiBleHRyYWN0TWF0Y2hpbmdQZXJtaXNzaW9ucyhzdGRvdXQsIFsnaW5zdGFsbCcsICdydW50aW1lJ10sIHRydWUpO1xufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgbGlzdCBvZiBkZW5pZWQgcGVybWlzc2lvbnMgZm9yIHRoZSBwYXJ0aWN1bGFyIHBhY2thZ2UuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBwYWNrYWdlIG5hbWUgdG8gYmUgcHJvY2Vzc2VkLlxuICogQHBhcmFtIHtzdHJpbmd9IGNtZE91dHB1dCBbbnVsbF0gLSBPcHRpb25hbCBwYXJhbWV0ZXIgY29udGFpbmluZyBjb21tYW5kIG91dHB1dCBvZlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZHVtcHN5cyBwYWNrYWdlXyBjb21tYW5kLiBJdCBtYXkgc3BlZWQgdXAgdGhlIG1ldGhvZCBleGVjdXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxTdHJpbmc+fSBUaGUgbGlzdCBvZiBkZW5pZWQgcGVybWlzc2lvbnMgb3IgYW4gZW1wdHkgbGlzdC5cbiAqL1xubWV0aG9kcy5nZXREZW5pZWRQZXJtaXNzaW9ucyA9IGFzeW5jIGZ1bmN0aW9uIGdldERlbmllZFBlcm1pc3Npb25zIChwa2csIGNtZE91dHB1dCA9IG51bGwpIHtcbiAgbG9nLmRlYnVnKCdSZXRyaWV2aW5nIGRlbmllZCBwZXJtaXNzaW9ucycpO1xuICBjb25zdCBzdGRvdXQgPSBjbWRPdXRwdXQgfHwgYXdhaXQgdGhpcy5zaGVsbChbJ2R1bXBzeXMnLCAncGFja2FnZScsIHBrZ10pO1xuICByZXR1cm4gZXh0cmFjdE1hdGNoaW5nUGVybWlzc2lvbnMoc3Rkb3V0LCBbJ2luc3RhbGwnLCAncnVudGltZSddLCBmYWxzZSk7XG59O1xuXG4vKipcbiAqIFJldHJpZXZlIHRoZSBsaXN0IG9mIHJlcXVlc3RlZCBwZXJtaXNzaW9ucyBmb3IgdGhlIHBhcnRpY3VsYXIgcGFja2FnZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGtnIC0gVGhlIHBhY2thZ2UgbmFtZSB0byBiZSBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gY21kT3V0cHV0IFtudWxsXSAtIE9wdGlvbmFsIHBhcmFtZXRlciBjb250YWluaW5nIGNvbW1hbmQgb3V0cHV0IG9mXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kdW1wc3lzIHBhY2thZ2VfIGNvbW1hbmQuIEl0IG1heSBzcGVlZCB1cCB0aGUgbWV0aG9kIGV4ZWN1dGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PFN0cmluZz59IFRoZSBsaXN0IG9mIHJlcXVlc3RlZCBwZXJtaXNzaW9ucyBvciBhbiBlbXB0eSBsaXN0LlxuICovXG5tZXRob2RzLmdldFJlcVBlcm1pc3Npb25zID0gYXN5bmMgZnVuY3Rpb24gZ2V0UmVxUGVybWlzc2lvbnMgKHBrZywgY21kT3V0cHV0ID0gbnVsbCkge1xuICBsb2cuZGVidWcoJ1JldHJpZXZpbmcgcmVxdWVzdGVkIHBlcm1pc3Npb25zJyk7XG4gIGNvbnN0IHN0ZG91dCA9IGNtZE91dHB1dCB8fCBhd2FpdCB0aGlzLnNoZWxsKFsnZHVtcHN5cycsICdwYWNrYWdlJywgcGtnXSk7XG4gIHJldHVybiBleHRyYWN0TWF0Y2hpbmdQZXJtaXNzaW9ucyhzdGRvdXQsIFsncmVxdWVzdGVkJ10pO1xufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgbGlzdCBvZiBsb2NhdGlvbiBwcm92aWRlcnMgZm9yIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcmV0dXJuIHtBcnJheS48U3RyaW5nPn0gVGhlIGxpc3Qgb2YgYXZhaWxhYmxlIGxvY2F0aW9uIHByb3ZpZGVycyBvciBhbiBlbXB0eSBsaXN0LlxuICovXG5tZXRob2RzLmdldExvY2F0aW9uUHJvdmlkZXJzID0gYXN5bmMgZnVuY3Rpb24gZ2V0TG9jYXRpb25Qcm92aWRlcnMgKCkge1xuICBsZXQgc3Rkb3V0ID0gYXdhaXQgdGhpcy5nZXRTZXR0aW5nKCdzZWN1cmUnLCAnbG9jYXRpb25fcHJvdmlkZXJzX2FsbG93ZWQnKTtcbiAgcmV0dXJuIHN0ZG91dC50cmltKCkuc3BsaXQoJywnKVxuICAgIC5tYXAoKHApID0+IHAudHJpbSgpKVxuICAgIC5maWx0ZXIoQm9vbGVhbik7XG59O1xuXG4vKipcbiAqIFRvZ2dsZSB0aGUgc3RhdGUgb2YgR1BTIGxvY2F0aW9uIHByb3ZpZGVyLlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlZCAtIFdoZXRoZXIgdG8gZW5hYmxlICh0cnVlKSBvciBkaXNhYmxlIChmYWxzZSkgdGhlIEdQUyBwcm92aWRlci5cbiAqL1xubWV0aG9kcy50b2dnbGVHUFNMb2NhdGlvblByb3ZpZGVyID0gYXN5bmMgZnVuY3Rpb24gdG9nZ2xlR1BTTG9jYXRpb25Qcm92aWRlciAoZW5hYmxlZCkge1xuICBhd2FpdCB0aGlzLnNldFNldHRpbmcoJ3NlY3VyZScsICdsb2NhdGlvbl9wcm92aWRlcnNfYWxsb3dlZCcsIGAke2VuYWJsZWQgPyAnKycgOiAnLSd9Z3BzYCk7XG59O1xuXG4vKipcbiAqIFNldCBoaWRkZW4gYXBpIHBvbGljeSB0byBtYW5hZ2UgYWNjZXNzIHRvIG5vbi1TREsgQVBJcy5cbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3ByZXZpZXcvcmVzdHJpY3Rpb25zLW5vbi1zZGstaW50ZXJmYWNlc1xuICpcbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gdmFsdWUgLSBUaGUgQVBJIGVuZm9yY2VtZW50IHBvbGljeS5cbiAqICAgICBGb3IgQW5kcm9pZCBQXG4gKiAgICAgMDogRGlzYWJsZSBub24tU0RLIEFQSSB1c2FnZSBkZXRlY3Rpb24uIFRoaXMgd2lsbCBhbHNvIGRpc2FibGUgbG9nZ2luZywgYW5kIGFsc28gYnJlYWsgdGhlIHN0cmljdCBtb2RlIEFQSSxcbiAqICAgICAgICBkZXRlY3ROb25TZGtBcGlVc2FnZSgpLiBOb3QgcmVjb21tZW5kZWQuXG4gKiAgICAgMTogXCJKdXN0IHdhcm5cIiAtIHBlcm1pdCBhY2Nlc3MgdG8gYWxsIG5vbi1TREsgQVBJcywgYnV0IGtlZXAgd2FybmluZ3MgaW4gdGhlIGxvZy5cbiAqICAgICAgICBUaGUgc3RyaWN0IG1vZGUgQVBJIHdpbGwga2VlcCB3b3JraW5nLlxuICogICAgIDI6IERpc2FsbG93IHVzYWdlIG9mIGRhcmsgZ3JleSBhbmQgYmxhY2sgbGlzdGVkIEFQSXMuXG4gKiAgICAgMzogRGlzYWxsb3cgdXNhZ2Ugb2YgYmxhY2tsaXN0ZWQgQVBJcywgYnV0IGFsbG93IHVzYWdlIG9mIGRhcmsgZ3JleSBsaXN0ZWQgQVBJcy5cbiAqXG4gKiAgICAgRm9yIEFuZHJvaWQgUVxuICogICAgIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3ByZXZpZXcvbm9uLXNkay1xI2VuYWJsZS1ub24tc2RrLWFjY2Vzc1xuICogICAgIDA6IERpc2FibGUgYWxsIGRldGVjdGlvbiBvZiBub24tU0RLIGludGVyZmFjZXMuIFVzaW5nIHRoaXMgc2V0dGluZyBkaXNhYmxlcyBhbGwgbG9nIG1lc3NhZ2VzIGZvciBub24tU0RLIGludGVyZmFjZSB1c2FnZVxuICogICAgICAgIGFuZCBwcmV2ZW50cyB5b3UgZnJvbSB0ZXN0aW5nIHlvdXIgYXBwIHVzaW5nIHRoZSBTdHJpY3RNb2RlIEFQSS4gVGhpcyBzZXR0aW5nIGlzIG5vdCByZWNvbW1lbmRlZC5cbiAqICAgICAxOiBFbmFibGUgYWNjZXNzIHRvIGFsbCBub24tU0RLIGludGVyZmFjZXMsIGJ1dCBwcmludCBsb2cgbWVzc2FnZXMgd2l0aCB3YXJuaW5ncyBmb3IgYW55IG5vbi1TREsgaW50ZXJmYWNlIHVzYWdlLlxuICogICAgICAgIFVzaW5nIHRoaXMgc2V0dGluZyBhbHNvIGFsbG93cyB5b3UgdG8gdGVzdCB5b3VyIGFwcCB1c2luZyB0aGUgU3RyaWN0TW9kZSBBUEkuXG4gKiAgICAgMjogRGlzYWxsb3cgdXNhZ2Ugb2Ygbm9uLVNESyBpbnRlcmZhY2VzIHRoYXQgYmVsb25nIHRvIGVpdGhlciB0aGUgYmxhY2sgbGlzdFxuICogICAgICAgIG9yIHRvIGEgcmVzdHJpY3RlZCBncmV5bGlzdCBmb3IgeW91ciB0YXJnZXQgQVBJIGxldmVsLlxuICovXG5tZXRob2RzLnNldEhpZGRlbkFwaVBvbGljeSA9IGFzeW5jIGZ1bmN0aW9uIHNldEhpZGRlbkFwaVBvbGljeSAodmFsdWUpIHtcbiAgYXdhaXQgdGhpcy5zZXRTZXR0aW5nKCdnbG9iYWwnLCAnaGlkZGVuX2FwaV9wb2xpY3lfcHJlX3BfYXBwcycsIHZhbHVlKTtcbiAgYXdhaXQgdGhpcy5zZXRTZXR0aW5nKCdnbG9iYWwnLCAnaGlkZGVuX2FwaV9wb2xpY3lfcF9hcHBzJywgdmFsdWUpO1xuICBhd2FpdCB0aGlzLnNldFNldHRpbmcoJ2dsb2JhbCcsICdoaWRkZW5fYXBpX3BvbGljeScsIHZhbHVlKTtcbn07XG5cbi8qKlxuICogUmVzZXQgYWNjZXNzIHRvIG5vbi1TREsgQVBJcyB0byBpdHMgZGVmYXVsdCBzZXR0aW5nLlxuICogaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcHJldmlldy9yZXN0cmljdGlvbnMtbm9uLXNkay1pbnRlcmZhY2VzXG4gKi9cbm1ldGhvZHMuc2V0RGVmYXVsdEhpZGRlbkFwaVBvbGljeSA9IGFzeW5jIGZ1bmN0aW9uIHNldERlZmF1bHRIaWRkZW5BcGlQb2xpY3kgKCkge1xuICBhd2FpdCB0aGlzLnNoZWxsKFsnc2V0dGluZ3MnLCAnZGVsZXRlJywgJ2dsb2JhbCcsICdoaWRkZW5fYXBpX3BvbGljeV9wcmVfcF9hcHBzJ10pO1xuICBhd2FpdCB0aGlzLnNoZWxsKFsnc2V0dGluZ3MnLCAnZGVsZXRlJywgJ2dsb2JhbCcsICdoaWRkZW5fYXBpX3BvbGljeV9wX2FwcHMnXSk7XG4gIGF3YWl0IHRoaXMuc2hlbGwoWydzZXR0aW5ncycsICdkZWxldGUnLCAnZ2xvYmFsJywgJ2hpZGRlbl9hcGlfcG9saWN5J10pO1xufTtcblxuLyoqXG4gKiBTdG9wIHRoZSBwYXJ0aWN1bGFyIHBhY2thZ2UgaWYgaXQgaXMgcnVubmluZyBhbmQgY2xlYXJzIGl0cyBhcHBsaWNhdGlvbiBkYXRhLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwa2cgLSBUaGUgcGFja2FnZSBuYW1lIHRvIGJlIHByb2Nlc3NlZC5cbiAqL1xubWV0aG9kcy5zdG9wQW5kQ2xlYXIgPSBhc3luYyBmdW5jdGlvbiBzdG9wQW5kQ2xlYXIgKHBrZykge1xuICB0cnkge1xuICAgIGF3YWl0IHRoaXMuZm9yY2VTdG9wKHBrZyk7XG4gICAgYXdhaXQgdGhpcy5jbGVhcihwa2cpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3Qgc3RvcCBhbmQgY2xlYXIgJHtwa2d9LiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gIH1cbn07XG5cbi8qKlxuICogUmV0cmlldmUgdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIGlucHV0IG1ldGhvZHMgKElNRXMpIGZvciB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHJldHVybiB7QXJyYXkuPFN0cmluZz59IFRoZSBsaXN0IG9mIElNRSBuYW1lcyBvciBhbiBlbXB0eSBsaXN0LlxuICovXG5tZXRob2RzLmF2YWlsYWJsZUlNRXMgPSBhc3luYyBmdW5jdGlvbiBhdmFpbGFibGVJTUVzICgpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZ2V0SU1FTGlzdEZyb21PdXRwdXQoYXdhaXQgdGhpcy5zaGVsbChbJ2ltZScsICdsaXN0JywgJy1hJ10pKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZ2V0dGluZyBhdmFpbGFibGUgSU1FJ3MuIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgbGlzdCBvZiBlbmFibGVkIGlucHV0IG1ldGhvZHMgKElNRXMpIGZvciB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHJldHVybiB7QXJyYXkuPFN0cmluZz59IFRoZSBsaXN0IG9mIGVuYWJsZWQgSU1FIG5hbWVzIG9yIGFuIGVtcHR5IGxpc3QuXG4gKi9cbm1ldGhvZHMuZW5hYmxlZElNRXMgPSBhc3luYyBmdW5jdGlvbiBlbmFibGVkSU1FcyAoKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGdldElNRUxpc3RGcm9tT3V0cHV0KGF3YWl0IHRoaXMuc2hlbGwoWydpbWUnLCAnbGlzdCddKSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGdldHRpbmcgZW5hYmxlZCBJTUUncy4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICB9XG59O1xuXG4vKipcbiAqIEVuYWJsZSB0aGUgcGFydGljdWxhciBpbnB1dCBtZXRob2Qgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpbWVJZCAtIE9uZSBvZiBleGlzdGluZyBJTUUgaWRzLlxuICovXG5tZXRob2RzLmVuYWJsZUlNRSA9IGFzeW5jIGZ1bmN0aW9uIGVuYWJsZUlNRSAoaW1lSWQpIHtcbiAgYXdhaXQgdGhpcy5zaGVsbChbJ2ltZScsICdlbmFibGUnLCBpbWVJZF0pO1xufTtcblxuLyoqXG4gKiBEaXNhYmxlIHRoZSBwYXJ0aWN1bGFyIGlucHV0IG1ldGhvZCBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGltZUlkIC0gT25lIG9mIGV4aXN0aW5nIElNRSBpZHMuXG4gKi9cbm1ldGhvZHMuZGlzYWJsZUlNRSA9IGFzeW5jIGZ1bmN0aW9uIGRpc2FibGVJTUUgKGltZUlkKSB7XG4gIGF3YWl0IHRoaXMuc2hlbGwoWydpbWUnLCAnZGlzYWJsZScsIGltZUlkXSk7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgcGFydGljdWxhciBpbnB1dCBtZXRob2Qgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpbWVJZCAtIE9uZSBvZiBleGlzdGluZyBJTUUgaWRzLlxuICovXG5tZXRob2RzLnNldElNRSA9IGFzeW5jIGZ1bmN0aW9uIHNldElNRSAoaW1lSWQpIHtcbiAgYXdhaXQgdGhpcy5zaGVsbChbJ2ltZScsICdzZXQnLCBpbWVJZF0pO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGRlZmF1bHQgaW5wdXQgbWV0aG9kIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBUaGUgbmFtZSBvZiB0aGUgZGVmYXVsdCBpbnB1dCBtZXRob2RcbiAqL1xubWV0aG9kcy5kZWZhdWx0SU1FID0gYXN5bmMgZnVuY3Rpb24gZGVmYXVsdElNRSAoKSB7XG4gIHRyeSB7XG4gICAgbGV0IGVuZ2luZSA9IGF3YWl0IHRoaXMuZ2V0U2V0dGluZygnc2VjdXJlJywgJ2RlZmF1bHRfaW5wdXRfbWV0aG9kJyk7XG4gICAgaWYgKGVuZ2luZSA9PT0gJ251bGwnKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGVuZ2luZS50cmltKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGdldHRpbmcgZGVmYXVsdCBJTUUuIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgfVxufTtcblxuLyoqXG4gKiBTZW5kIHRoZSBwYXJ0aWN1bGFyIGtleWNvZGUgdG8gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0ga2V5Y29kZSAtIFRoZSBhY3R1YWwga2V5IGNvZGUgdG8gYmUgc2VudC5cbiAqL1xubWV0aG9kcy5rZXlldmVudCA9IGFzeW5jIGZ1bmN0aW9uIGtleWV2ZW50IChrZXljb2RlKSB7XG4gIC8vIGtleWNvZGUgbXVzdCBiZSBhbiBpbnQuXG4gIGxldCBjb2RlID0gcGFyc2VJbnQoa2V5Y29kZSwgMTApO1xuICBhd2FpdCB0aGlzLnNoZWxsKFsnaW5wdXQnLCAna2V5ZXZlbnQnLCBjb2RlXSk7XG59O1xuXG4vKipcbiAqIFNlbmQgdGhlIHBhcnRpY3VsYXIgdGV4dCB0byB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHQgLSBUaGUgYWN0dWFsIHRleHQgdG8gYmUgc2VudC5cbiAqL1xubWV0aG9kcy5pbnB1dFRleHQgPSBhc3luYyBmdW5jdGlvbiBpbnB1dFRleHQgKHRleHQpIHtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tdXNlbGVzcy1lc2NhcGUgKi9cbiAgLy8gbmVlZCB0byBlc2NhcGUgd2hpdGVzcGFjZSBhbmQgKCApIDwgPiB8IDsgJiAqIFxcIH4gXCIgJ1xuICB0ZXh0ID0gdGV4dFxuICAgICAgICAgIC5yZXBsYWNlKC9cXFxcL2csICdcXFxcXFxcXCcpXG4gICAgICAgICAgLnJlcGxhY2UoL1xcKC9nLCAnXFwoJylcbiAgICAgICAgICAucmVwbGFjZSgvXFwpL2csICdcXCknKVxuICAgICAgICAgIC5yZXBsYWNlKC88L2csICdcXDwnKVxuICAgICAgICAgIC5yZXBsYWNlKC8+L2csICdcXD4nKVxuICAgICAgICAgIC5yZXBsYWNlKC9cXHwvZywgJ1xcfCcpXG4gICAgICAgICAgLnJlcGxhY2UoLzsvZywgJ1xcOycpXG4gICAgICAgICAgLnJlcGxhY2UoLyYvZywgJ1xcJicpXG4gICAgICAgICAgLnJlcGxhY2UoL1xcKi9nLCAnXFwqJylcbiAgICAgICAgICAucmVwbGFjZSgvfi9nLCAnXFx+JylcbiAgICAgICAgICAucmVwbGFjZSgvXCIvZywgJ1xcXCInKVxuICAgICAgICAgIC5yZXBsYWNlKC8nL2csIFwiXFwnXCIpXG4gICAgICAgICAgLnJlcGxhY2UoLyAvZywgJyVzJyk7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLXVzZWxlc3MtZXNjYXBlICovXG4gIGF3YWl0IHRoaXMuc2hlbGwoWydpbnB1dCcsICd0ZXh0JywgdGV4dF0pO1xufTtcblxuLyoqXG4gKiBDbGVhciB0aGUgYWN0aXZlIHRleHQgZmllbGQgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0IGJ5IHNlbmRpbmdcbiAqIHNwZWNpYWwga2V5ZXZlbnRzIHRvIGl0LlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBsZW5ndGggWzEwMF0gLSBUaGUgbWF4aW11bSBsZW5ndGggb2YgdGhlIHRleHQgaW4gdGhlIGZpZWxkIHRvIGJlIGNsZWFyZWQuXG4gKi9cbm1ldGhvZHMuY2xlYXJUZXh0RmllbGQgPSBhc3luYyBmdW5jdGlvbiBjbGVhclRleHRGaWVsZCAobGVuZ3RoID0gMTAwKSB7XG4gIC8vIGFzc3VtZXMgdGhhdCB0aGUgRWRpdFRleHQgZmllbGQgYWxyZWFkeSBoYXMgZm9jdXNcbiAgbG9nLmRlYnVnKGBDbGVhcmluZyB1cCB0byAke2xlbmd0aH0gY2hhcmFjdGVyc2ApO1xuICBpZiAobGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxldCBhcmdzID0gWydpbnB1dCcsICdrZXlldmVudCddO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgLy8gd2UgY2Fubm90IGtub3cgd2hlcmUgdGhlIGN1cnNvciBpcyBpbiB0aGUgdGV4dCBmaWVsZCwgc28gZGVsZXRlIGJvdGggYmVmb3JlXG4gICAgLy8gYW5kIGFmdGVyIHNvIHRoYXQgd2UgZ2V0IHJpZCBvZiBldmVyeXRoaW5nXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcmVmZXJlbmNlL2FuZHJvaWQvdmlldy9LZXlFdmVudC5odG1sI0tFWUNPREVfREVMXG4gICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcmVmZXJlbmNlL2FuZHJvaWQvdmlldy9LZXlFdmVudC5odG1sI0tFWUNPREVfRk9SV0FSRF9ERUxcbiAgICBhcmdzLnB1c2goJzY3JywgJzExMicpO1xuICB9XG4gIGF3YWl0IHRoaXMuc2hlbGwoYXJncyk7XG59O1xuXG4vKipcbiAqIFNlbmQgdGhlIHNwZWNpYWwga2V5Y29kZSB0byB0aGUgZGV2aWNlIHVuZGVyIHRlc3QgaW4gb3JkZXIgdG8gbG9jayBpdC5cbiAqL1xubWV0aG9kcy5sb2NrID0gYXN5bmMgZnVuY3Rpb24gbG9jayAoKSB7XG4gIGlmIChhd2FpdCB0aGlzLmlzU2NyZWVuTG9ja2VkKCkpIHtcbiAgICBsb2cuZGVidWcoJ1NjcmVlbiBpcyBhbHJlYWR5IGxvY2tlZC4gRG9pbmcgbm90aGluZy4nKTtcbiAgICByZXR1cm47XG4gIH1cbiAgbG9nLmRlYnVnKCdQcmVzc2luZyB0aGUgS0VZQ09ERV9QT1dFUiBidXR0b24gdG8gbG9jayBzY3JlZW4nKTtcbiAgYXdhaXQgdGhpcy5rZXlldmVudCgyNik7XG5cbiAgY29uc3QgdGltZW91dE1zID0gNTAwMDtcbiAgdHJ5IHtcbiAgICBhd2FpdCB3YWl0Rm9yQ29uZGl0aW9uKGFzeW5jICgpID0+IGF3YWl0IHRoaXMuaXNTY3JlZW5Mb2NrZWQoKSwge1xuICAgICAgd2FpdE1zOiB0aW1lb3V0TXMsXG4gICAgICBpbnRlcnZhbE1zOiA1MDAsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBkZXZpY2Ugc2NyZWVuIGlzIHN0aWxsIGxvY2tlZCBhZnRlciAke3RpbWVvdXRNc31tcyB0aW1lb3V0YCk7XG4gIH1cbn07XG5cbi8qKlxuICogU2VuZCB0aGUgc3BlY2lhbCBrZXljb2RlIHRvIHRoZSBkZXZpY2UgdW5kZXIgdGVzdCBpbiBvcmRlciB0byBlbXVsYXRlXG4gKiBCYWNrIGJ1dHRvbiB0YXAuXG4gKi9cbm1ldGhvZHMuYmFjayA9IGFzeW5jIGZ1bmN0aW9uIGJhY2sgKCkge1xuICBsb2cuZGVidWcoJ1ByZXNzaW5nIHRoZSBCQUNLIGJ1dHRvbicpO1xuICBhd2FpdCB0aGlzLmtleWV2ZW50KDQpO1xufTtcblxuLyoqXG4gKiBTZW5kIHRoZSBzcGVjaWFsIGtleWNvZGUgdG8gdGhlIGRldmljZSB1bmRlciB0ZXN0IGluIG9yZGVyIHRvIGVtdWxhdGVcbiAqIEhvbWUgYnV0dG9uIHRhcC5cbiAqL1xubWV0aG9kcy5nb1RvSG9tZSA9IGFzeW5jIGZ1bmN0aW9uIGdvVG9Ib21lICgpIHtcbiAgbG9nLmRlYnVnKCdQcmVzc2luZyB0aGUgSE9NRSBidXR0b24nKTtcbiAgYXdhaXQgdGhpcy5rZXlldmVudCgzKTtcbn07XG5cbi8qKlxuICogQHJldHVybiB7c3RyaW5nfSB0aGUgYWN0dWFsIHBhdGggdG8gYWRiIGV4ZWN1dGFibGUuXG4gKi9cbm1ldGhvZHMuZ2V0QWRiUGF0aCA9IGZ1bmN0aW9uIGdldEFkYlBhdGggKCkge1xuICByZXR1cm4gdGhpcy5leGVjdXRhYmxlLnBhdGg7XG59O1xuXG4vKipcbiAqIFJldHJpZXZlIGN1cnJlbnQgc2NyZWVuIG9yaWVudGF0aW9uIG9mIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBjdXJyZW50IG9yaWVudGF0aW9uIGVuY29kZWQgYXMgYW4gaW50ZWdlciBudW1iZXIuXG4gKi9cbm1ldGhvZHMuZ2V0U2NyZWVuT3JpZW50YXRpb24gPSBhc3luYyBmdW5jdGlvbiBnZXRTY3JlZW5PcmllbnRhdGlvbiAoKSB7XG4gIGxldCBzdGRvdXQgPSBhd2FpdCB0aGlzLnNoZWxsKFsnZHVtcHN5cycsICdpbnB1dCddKTtcbiAgcmV0dXJuIGdldFN1cmZhY2VPcmllbnRhdGlvbihzdGRvdXQpO1xufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgc2NyZWVuIGxvY2sgc3RhdGUgb2YgdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGRldmljZSBpcyBsb2NrZWQuXG4gKi9cbm1ldGhvZHMuaXNTY3JlZW5Mb2NrZWQgPSBhc3luYyBmdW5jdGlvbiBpc1NjcmVlbkxvY2tlZCAoKSB7XG4gIGxldCBzdGRvdXQgPSBhd2FpdCB0aGlzLnNoZWxsKFsnZHVtcHN5cycsICd3aW5kb3cnXSk7XG4gIGlmIChwcm9jZXNzLmVudi5BUFBJVU1fTE9HX0RVTVBTWVMpIHtcbiAgICAvLyBvcHRpb25hbCBkZWJ1Z2dpbmdcbiAgICAvLyBpZiB0aGUgbWV0aG9kIGlzIG5vdCB3b3JraW5nLCB0dXJuIGl0IG9uIGFuZCBzZW5kIHVzIHRoZSBvdXRwdXRcbiAgICBsZXQgZHVtcHN5c0ZpbGUgPSBwYXRoLnJlc29sdmUocHJvY2Vzcy5jd2QoKSwgJ2R1bXBzeXMubG9nJyk7XG4gICAgbG9nLmRlYnVnKGBXcml0aW5nIGR1bXBzeXMgb3V0cHV0IHRvICR7ZHVtcHN5c0ZpbGV9YCk7XG4gICAgYXdhaXQgZnMud3JpdGVGaWxlKGR1bXBzeXNGaWxlLCBzdGRvdXQpO1xuICB9XG4gIHJldHVybiAoaXNTaG93aW5nTG9ja3NjcmVlbihzdGRvdXQpIHx8IGlzQ3VycmVudEZvY3VzT25LZXlndWFyZChzdGRvdXQpIHx8XG4gICAgICAgICAgIWlzU2NyZWVuT25GdWxseShzdGRvdXQpKTtcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gS2V5Ym9hcmRTdGF0ZVxuICogQHByb3BlcnR5IHtib29sZWFufSBpc0tleWJvYXJkU2hvd24gLSBXaGV0aGVyIHNvZnQga2V5Ym9hcmQgaXMgY3VycmVudGx5IHZpc2libGUuXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IGNhbkNsb3NlS2V5Ym9hcmQgLSBXaGV0aGVyIHRoZSBrZXlib2FyZCBjYW4gYmUgY2xvc2VkLlxuICovXG5cbi8qKlxuICogUmV0cmlldmUgdGhlIHN0YXRlIG9mIHRoZSBzb2Z0d2FyZSBrZXlib2FyZCBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHJldHVybiB7S2V5Ym9hcmRTdGF0ZX0gVGhlIGtleWJvYXJkIHN0YXRlLlxuICovXG5tZXRob2RzLmlzU29mdEtleWJvYXJkUHJlc2VudCA9IGFzeW5jIGZ1bmN0aW9uIGlzU29mdEtleWJvYXJkUHJlc2VudCAoKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc3Rkb3V0ID0gYXdhaXQgdGhpcy5zaGVsbChbJ2R1bXBzeXMnLCAnaW5wdXRfbWV0aG9kJ10pO1xuICAgIGNvbnN0IGlucHV0U2hvd25NYXRjaCA9IC9tSW5wdXRTaG93bj0oXFx3KykvLmV4ZWMoc3Rkb3V0KTtcbiAgICBjb25zdCBpbnB1dFZpZXdTaG93bk1hdGNoID0gL21Jc0lucHV0Vmlld1Nob3duPShcXHcrKS8uZXhlYyhzdGRvdXQpO1xuICAgIHJldHVybiB7XG4gICAgICBpc0tleWJvYXJkU2hvd246ICEhKGlucHV0U2hvd25NYXRjaCAmJiBpbnB1dFNob3duTWF0Y2hbMV0gPT09ICd0cnVlJyksXG4gICAgICBjYW5DbG9zZUtleWJvYXJkOiAhIShpbnB1dFZpZXdTaG93bk1hdGNoICYmIGlucHV0Vmlld1Nob3duTWF0Y2hbMV0gPT09ICd0cnVlJyksXG4gICAgfTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZmluZGluZyBzb2Z0a2V5Ym9hcmQuIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgfVxufTtcblxuLyoqXG4gKiBTZW5kIGFuIGFyYml0cmFyeSBUZWxuZXQgY29tbWFuZCB0byB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbW1hbmQgLSBUaGUgY29tbWFuZCB0byBiZSBzZW50LlxuICpcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGFjdHVhbCBvdXRwdXQgb2YgdGhlIGdpdmVuIGNvbW1hbmQuXG4gKi9cbm1ldGhvZHMuc2VuZFRlbG5ldENvbW1hbmQgPSBhc3luYyBmdW5jdGlvbiBzZW5kVGVsbmV0Q29tbWFuZCAoY29tbWFuZCkge1xuICBsb2cuZGVidWcoYFNlbmRpbmcgdGVsbmV0IGNvbW1hbmQgdG8gZGV2aWNlOiAke2NvbW1hbmR9YCk7XG4gIGxldCBwb3J0ID0gYXdhaXQgdGhpcy5nZXRFbXVsYXRvclBvcnQoKTtcbiAgcmV0dXJuIGF3YWl0IG5ldyBCKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBsZXQgY29ubiA9IG5ldC5jcmVhdGVDb25uZWN0aW9uKHBvcnQsICdsb2NhbGhvc3QnKSxcbiAgICAgICAgY29ubmVjdGVkID0gZmFsc2UsXG4gICAgICAgIHJlYWR5UmVnZXggPSAvXk9LJC9tLFxuICAgICAgICBkYXRhU3RyZWFtID0gJycsXG4gICAgICAgIHJlcyA9IG51bGw7XG4gICAgY29ubi5vbignY29ubmVjdCcsICgpID0+IHtcbiAgICAgIGxvZy5kZWJ1ZygnU29ja2V0IGNvbm5lY3Rpb24gdG8gZGV2aWNlIGNyZWF0ZWQnKTtcbiAgICB9KTtcbiAgICBjb25uLm9uKCdkYXRhJywgKGRhdGEpID0+IHtcbiAgICAgIGRhdGEgPSBkYXRhLnRvU3RyaW5nKCd1dGY4Jyk7XG4gICAgICBpZiAoIWNvbm5lY3RlZCkge1xuICAgICAgICBpZiAocmVhZHlSZWdleC50ZXN0KGRhdGEpKSB7XG4gICAgICAgICAgY29ubmVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICBsb2cuZGVidWcoJ1NvY2tldCBjb25uZWN0aW9uIHRvIGRldmljZSByZWFkeScpO1xuICAgICAgICAgIGNvbm4ud3JpdGUoYCR7Y29tbWFuZH1cXG5gKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YVN0cmVhbSArPSBkYXRhO1xuICAgICAgICBpZiAocmVhZHlSZWdleC50ZXN0KGRhdGEpKSB7XG4gICAgICAgICAgcmVzID0gZGF0YVN0cmVhbS5yZXBsYWNlKHJlYWR5UmVnZXgsICcnKS50cmltKCk7XG4gICAgICAgICAgcmVzID0gXy5sYXN0KHJlcy50cmltKCkuc3BsaXQoJ1xcbicpKTtcbiAgICAgICAgICBsb2cuZGVidWcoYFRlbG5ldCBjb21tYW5kIGdvdCByZXNwb25zZTogJHtyZXN9YCk7XG4gICAgICAgICAgY29ubi53cml0ZSgncXVpdFxcbicpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29ubi5vbignZXJyb3InLCAoZXJyKSA9PiB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcHJvbWlzZS9wcmVmZXItYXdhaXQtdG8tY2FsbGJhY2tzXG4gICAgICBsb2cuZGVidWcoYFRlbG5ldCBjb21tYW5kIGVycm9yOiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgcmVqZWN0KGVycik7XG4gICAgfSk7XG4gICAgY29ubi5vbignY2xvc2UnLCAoKSA9PiB7XG4gICAgICBpZiAocmVzID09PSBudWxsKSB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ05ldmVyIGdvdCBhIHJlc3BvbnNlIGZyb20gY29tbWFuZCcpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc29sdmUocmVzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIENoZWNrIHRoZSBzdGF0ZSBvZiBBaXJwbGFuZSBtb2RlIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIEFpcnBsYW5lIG1vZGUgaXMgZW5hYmxlZC5cbiAqL1xubWV0aG9kcy5pc0FpcnBsYW5lTW9kZU9uID0gYXN5bmMgZnVuY3Rpb24gaXNBaXJwbGFuZU1vZGVPbiAoKSB7XG4gIGxldCBzdGRvdXQgPSBhd2FpdCB0aGlzLmdldFNldHRpbmcoJ2dsb2JhbCcsICdhaXJwbGFuZV9tb2RlX29uJyk7XG4gIHJldHVybiBwYXJzZUludChzdGRvdXQsIDEwKSAhPT0gMDtcbn07XG5cbi8qKlxuICogQ2hhbmdlIHRoZSBzdGF0ZSBvZiBBaXJwbGFuZSBtb2RlIGluIFNldHRpbmdzIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9uIC0gVHJ1ZSB0byBlbmFibGUgdGhlIEFpcnBsYW5lIG1vZGUgaW4gU2V0dGluZ3MgYW5kIGZhbHNlIHRvIGRpc2FibGUgaXQuXG4gKi9cbm1ldGhvZHMuc2V0QWlycGxhbmVNb2RlID0gYXN5bmMgZnVuY3Rpb24gc2V0QWlycGxhbmVNb2RlIChvbikge1xuICBhd2FpdCB0aGlzLnNldFNldHRpbmcoJ2dsb2JhbCcsICdhaXJwbGFuZV9tb2RlX29uJywgb24gPyAxIDogMCk7XG59O1xuXG4vKipcbiAqIEJyb2FkY2FzdCB0aGUgc3RhdGUgb2YgQWlycGxhbmUgbW9kZSBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKiBUaGlzIG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIHtAbGluayAjc2V0QWlycGxhbmVNb2RlfSwgb3RoZXJ3aXNlXG4gKiB0aGUgbW9kZSBjaGFuZ2UgaXMgbm90IGdvaW5nIHRvIGJlIGFwcGxpZWQgZm9yIHRoZSBkZXZpY2UuXG4gKlxuICogQHBhcmFtIHtib29sZWFufSBvbiAtIFRydWUgdG8gYnJvYWRjYXN0IGVuYWJsZSBhbmQgZmFsc2UgdG8gYnJvYWRjYXN0IGRpc2FibGUuXG4gKi9cbm1ldGhvZHMuYnJvYWRjYXN0QWlycGxhbmVNb2RlID0gYXN5bmMgZnVuY3Rpb24gYnJvYWRjYXN0QWlycGxhbmVNb2RlIChvbikge1xuICBhd2FpdCB0aGlzLnNoZWxsKFtcbiAgICAnYW0nLCAnYnJvYWRjYXN0JyxcbiAgICAnLWEnLCAnYW5kcm9pZC5pbnRlbnQuYWN0aW9uLkFJUlBMQU5FX01PREUnLFxuICAgICctLWV6JywgJ3N0YXRlJywgb24gPyAndHJ1ZScgOiAnZmFsc2UnXG4gIF0pO1xufTtcblxuLyoqXG4gKiBDaGVjayB0aGUgc3RhdGUgb2YgV2lGaSBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBXaUZpIGlzIGVuYWJsZWQuXG4gKi9cbm1ldGhvZHMuaXNXaWZpT24gPSBhc3luYyBmdW5jdGlvbiBpc1dpZmlPbiAoKSB7XG4gIGxldCBzdGRvdXQgPSBhd2FpdCB0aGlzLmdldFNldHRpbmcoJ2dsb2JhbCcsICd3aWZpX29uJyk7XG4gIHJldHVybiAocGFyc2VJbnQoc3Rkb3V0LCAxMCkgIT09IDApO1xufTtcblxuLyoqXG4gKiBDaGFuZ2UgdGhlIHN0YXRlIG9mIFdpRmkgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb24gLSBUcnVlIHRvIGVuYWJsZSBhbmQgZmFsc2UgdG8gZGlzYWJsZSBpdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNFbXVsYXRvciBbZmFsc2VdIC0gU2V0IGl0IHRvIHRydWUgaWYgdGhlIGRldmljZSB1bmRlciB0ZXN0XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzIGFuIGVtdWxhdG9yIHJhdGhlciB0aGFuIGEgcmVhbCBkZXZpY2UuXG4gKi9cbm1ldGhvZHMuc2V0V2lmaVN0YXRlID0gYXN5bmMgZnVuY3Rpb24gc2V0V2lmaVN0YXRlIChvbiwgaXNFbXVsYXRvciA9IGZhbHNlKSB7XG4gIGlmIChpc0VtdWxhdG9yKSB7XG4gICAgYXdhaXQgdGhpcy5zaGVsbChbJ3N2YycsICd3aWZpJywgb24gPyAnZW5hYmxlJyA6ICdkaXNhYmxlJ10sIHtcbiAgICAgIHByaXZpbGVnZWQ6IHRydWUsXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgYXdhaXQgdGhpcy5zaGVsbChbXG4gICAgICAnYW0nLCAnYnJvYWRjYXN0JyxcbiAgICAgICctYScsIFdJRklfQ09OTkVDVElPTl9TRVRUSU5HX0FDVElPTixcbiAgICAgICctbicsIFdJRklfQ09OTkVDVElPTl9TRVRUSU5HX1JFQ0VJVkVSLFxuICAgICAgJy0tZXMnLCAnc2V0c3RhdHVzJywgb24gPyAnZW5hYmxlJyA6ICdkaXNhYmxlJ1xuICAgIF0pO1xuICB9XG59O1xuXG4vKipcbiAqIENoZWNrIHRoZSBzdGF0ZSBvZiBEYXRhIHRyYW5zZmVyIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIERhdGEgdHJhbnNmZXIgaXMgZW5hYmxlZC5cbiAqL1xubWV0aG9kcy5pc0RhdGFPbiA9IGFzeW5jIGZ1bmN0aW9uIGlzRGF0YU9uICgpIHtcbiAgbGV0IHN0ZG91dCA9IGF3YWl0IHRoaXMuZ2V0U2V0dGluZygnZ2xvYmFsJywgJ21vYmlsZV9kYXRhJyk7XG4gIHJldHVybiAocGFyc2VJbnQoc3Rkb3V0LCAxMCkgIT09IDApO1xufTtcblxuLyoqXG4gKiBDaGFuZ2UgdGhlIHN0YXRlIG9mIERhdGEgdHJhbnNmZXIgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb24gLSBUcnVlIHRvIGVuYWJsZSBhbmQgZmFsc2UgdG8gZGlzYWJsZSBpdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNFbXVsYXRvciBbZmFsc2VdIC0gU2V0IGl0IHRvIHRydWUgaWYgdGhlIGRldmljZSB1bmRlciB0ZXN0XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzIGFuIGVtdWxhdG9yIHJhdGhlciB0aGFuIGEgcmVhbCBkZXZpY2UuXG4gKi9cbm1ldGhvZHMuc2V0RGF0YVN0YXRlID0gYXN5bmMgZnVuY3Rpb24gc2V0RGF0YVN0YXRlIChvbiwgaXNFbXVsYXRvciA9IGZhbHNlKSB7XG4gIGlmIChpc0VtdWxhdG9yKSB7XG4gICAgYXdhaXQgdGhpcy5zaGVsbChbJ3N2YycsICdkYXRhJywgb24gPyAnZW5hYmxlJyA6ICdkaXNhYmxlJ10sIHtcbiAgICAgIHByaXZpbGVnZWQ6IHRydWUsXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgYXdhaXQgdGhpcy5zaGVsbChbXG4gICAgICAnYW0nLCAnYnJvYWRjYXN0JyxcbiAgICAgICctYScsIERBVEFfQ09OTkVDVElPTl9TRVRUSU5HX0FDVElPTixcbiAgICAgICctbicsIERBVEFfQ09OTkVDVElPTl9TRVRUSU5HX1JFQ0VJVkVSLFxuICAgICAgJy0tZXMnLCAnc2V0c3RhdHVzJywgb24gPyAnZW5hYmxlJyA6ICdkaXNhYmxlJ1xuICAgIF0pO1xuICB9XG59O1xuXG4vKipcbiAqIENoYW5nZSB0aGUgc3RhdGUgb2YgV2lGaSBhbmQvb3IgRGF0YSB0cmFuc2ZlciBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtib29sZWFufSB3aWZpIC0gVHJ1ZSB0byBlbmFibGUgYW5kIGZhbHNlIHRvIGRpc2FibGUgV2lGaS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZGF0YSAtIFRydWUgdG8gZW5hYmxlIGFuZCBmYWxzZSB0byBkaXNhYmxlIERhdGEgdHJhbnNmZXIuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzRW11bGF0b3IgW2ZhbHNlXSAtIFNldCBpdCB0byB0cnVlIGlmIHRoZSBkZXZpY2UgdW5kZXIgdGVzdFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpcyBhbiBlbXVsYXRvciByYXRoZXIgdGhhbiBhIHJlYWwgZGV2aWNlLlxuICovXG5tZXRob2RzLnNldFdpZmlBbmREYXRhID0gYXN5bmMgZnVuY3Rpb24gc2V0V2lmaUFuZERhdGEgKHt3aWZpLCBkYXRhfSwgaXNFbXVsYXRvciA9IGZhbHNlKSB7XG4gIGlmICh1dGlsLmhhc1ZhbHVlKHdpZmkpKSB7XG4gICAgYXdhaXQgdGhpcy5zZXRXaWZpU3RhdGUod2lmaSwgaXNFbXVsYXRvcik7XG4gIH1cbiAgaWYgKHV0aWwuaGFzVmFsdWUoZGF0YSkpIHtcbiAgICBhd2FpdCB0aGlzLnNldERhdGFTdGF0ZShkYXRhLCBpc0VtdWxhdG9yKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDaGFuZ2UgdGhlIHN0YXRlIG9mIGFuaW1hdGlvbiBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKiBBbmltYXRpb24gb24gdGhlIGRldmljZSBpcyBjb250cm9sbGVkIGJ5IHRoZSBmb2xsb3dpbmcgZ2xvYmFsIHByb3BlcnRpZXM6XG4gKiBbQU5JTUFUT1JfRFVSQVRJT05fU0NBTEVde0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3JlZmVyZW5jZS9hbmRyb2lkL3Byb3ZpZGVyL1NldHRpbmdzLkdsb2JhbC5odG1sI0FOSU1BVE9SX0RVUkFUSU9OX1NDQUxFfSxcbiAqIFtUUkFOU0lUSU9OX0FOSU1BVElPTl9TQ0FMRV17QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcmVmZXJlbmNlL2FuZHJvaWQvcHJvdmlkZXIvU2V0dGluZ3MuR2xvYmFsLmh0bWwjVFJBTlNJVElPTl9BTklNQVRJT05fU0NBTEV9LFxuICogW1dJTkRPV19BTklNQVRJT05fU0NBTEVde0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3JlZmVyZW5jZS9hbmRyb2lkL3Byb3ZpZGVyL1NldHRpbmdzLkdsb2JhbC5odG1sI1dJTkRPV19BTklNQVRJT05fU0NBTEV9LlxuICogVGhpcyBtZXRob2Qgc2V0cyBhbGwgdGhpcyBwcm9wZXJ0aWVzIHRvIDAuMCB0byBkaXNhYmxlICgxLjAgdG8gZW5hYmxlKSBhbmltYXRpb24uXG4gKlxuICogVHVybmluZyBvZmYgYW5pbWF0aW9uIG1pZ2h0IGJlIHVzZWZ1bCB0byBpbXByb3ZlIHN0YWJpbGl0eVxuICogYW5kIHJlZHVjZSB0ZXN0cyBleGVjdXRpb24gdGltZS5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9uIC0gVHJ1ZSB0byBlbmFibGUgYW5kIGZhbHNlIHRvIGRpc2FibGUgaXQuXG4gKi9cbm1ldGhvZHMuc2V0QW5pbWF0aW9uU3RhdGUgPSBhc3luYyBmdW5jdGlvbiBzZXRBbmltYXRpb25TdGF0ZSAob24pIHtcbiAgYXdhaXQgdGhpcy5zaGVsbChbXG4gICAgJ2FtJywgJ2Jyb2FkY2FzdCcsXG4gICAgJy1hJywgQU5JTUFUSU9OX1NFVFRJTkdfQUNUSU9OLFxuICAgICctbicsIEFOSU1BVElPTl9TRVRUSU5HX1JFQ0VJVkVSLFxuICAgICctLWVzJywgJ3NldHN0YXR1cycsIG9uID8gJ2VuYWJsZScgOiAnZGlzYWJsZSdcbiAgXSk7XG59O1xuXG4vKipcbiAqIENoZWNrIHRoZSBzdGF0ZSBvZiBhbmltYXRpb24gb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgYXQgbGVhc3Qgb25lIG9mIGFuaW1hdGlvbiBzY2FsZSBzZXR0aW5nc1xuICogICAgICAgICAgICAgICAgICAgaXMgbm90IGVxdWFsIHRvICcwLjAnLlxuICovXG5tZXRob2RzLmlzQW5pbWF0aW9uT24gPSBhc3luYyBmdW5jdGlvbiBpc0FuaW1hdGlvbk9uICgpIHtcbiAgbGV0IGFuaW1hdG9yX2R1cmF0aW9uX3NjYWxlID0gYXdhaXQgdGhpcy5nZXRTZXR0aW5nKCdnbG9iYWwnLCAnYW5pbWF0b3JfZHVyYXRpb25fc2NhbGUnKTtcbiAgbGV0IHRyYW5zaXRpb25fYW5pbWF0aW9uX3NjYWxlID0gYXdhaXQgdGhpcy5nZXRTZXR0aW5nKCdnbG9iYWwnLCAndHJhbnNpdGlvbl9hbmltYXRpb25fc2NhbGUnKTtcbiAgbGV0IHdpbmRvd19hbmltYXRpb25fc2NhbGUgPSBhd2FpdCB0aGlzLmdldFNldHRpbmcoJ2dsb2JhbCcsICd3aW5kb3dfYW5pbWF0aW9uX3NjYWxlJyk7XG4gIHJldHVybiBfLnNvbWUoW2FuaW1hdG9yX2R1cmF0aW9uX3NjYWxlLCB0cmFuc2l0aW9uX2FuaW1hdGlvbl9zY2FsZSwgd2luZG93X2FuaW1hdGlvbl9zY2FsZV0sXG4gICAgICAgICAgICAgICAgKHNldHRpbmcpID0+IHNldHRpbmcgIT09ICcwLjAnKTtcbn07XG5cbi8qKlxuICogQ2hhbmdlIHRoZSBsb2NhbGUgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LiBEb24ndCBuZWVkIHRvIHJlYm9vdCB0aGUgZGV2aWNlIGFmdGVyIGNoYW5naW5nIHRoZSBsb2NhbGUuXG4gKiBUaGlzIG1ldGhvZCBzZXRzIGFuIGFyYml0cmFyeSBsb2NhbGUgZm9sbG93aW5nOlxuICogICBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9yZWZlcmVuY2UvamF2YS91dGlsL0xvY2FsZS5odG1sXG4gKiAgIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3JlZmVyZW5jZS9qYXZhL3V0aWwvTG9jYWxlLmh0bWwjTG9jYWxlKGphdmEubGFuZy5TdHJpbmcsJTIwamF2YS5sYW5nLlN0cmluZylcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbGFuZ3VhZ2UgLSBMYW5ndWFnZS4gZS5nLiBlbiwgamFcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb3VudHJ5IC0gQ291bnRyeS4gZS5nLiBVUywgSlBcbiAqIEBwYXJhbSB7P3N0cmluZ30gc2NyaXB0IC0gU2NyaXB0LiBlLmcuIEhhbnMgaW4gYHpoLUhhbnMtQ05gXG4gKi9cbm1ldGhvZHMuc2V0RGV2aWNlU3lzTG9jYWxlVmlhU2V0dGluZ0FwcCA9IGFzeW5jIGZ1bmN0aW9uIHNldERldmljZVN5c0xvY2FsZVZpYVNldHRpbmdBcHAgKGxhbmd1YWdlLCBjb3VudHJ5LCBzY3JpcHQgPSBudWxsKSB7XG4gIGNvbnN0IHBhcmFtcyA9IFtcbiAgICAnYW0nLCAnYnJvYWRjYXN0JyxcbiAgICAnLWEnLCBMT0NBTEVfU0VUVElOR19BQ1RJT04sXG4gICAgJy1uJywgTE9DQUxFX1NFVFRJTkdfUkVDRUlWRVIsXG4gICAgJy0tZXMnLCAnbGFuZycsIGxhbmd1YWdlLnRvTG93ZXJDYXNlKCksXG4gICAgJy0tZXMnLCAnY291bnRyeScsIGNvdW50cnkudG9VcHBlckNhc2UoKVxuICBdO1xuXG4gIGlmIChzY3JpcHQpIHtcbiAgICBwYXJhbXMucHVzaCgnLS1lcycsICdzY3JpcHQnLCBzY3JpcHQpO1xuICB9XG5cbiAgYXdhaXQgdGhpcy5zaGVsbChwYXJhbXMpO1xufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBMb2NhdGlvblxuICogQHByb3BlcnR5IHtudW1iZXJ8c3RyaW5nfSBsb25naXR1ZGUgLSBWYWxpZCBsb25naXR1ZGUgdmFsdWUuXG4gKiBAcHJvcGVydHkge251bWJlcnxzdHJpbmd9IGxhdGl0dWRlIC0gVmFsaWQgbGF0aXR1ZGUgdmFsdWUuXG4gKiBAcHJvcGVydHkgez9udW1iZXJ8c3RyaW5nfSBhbHRpdHVkZSAtIFZhbGlkIGFsdGl0dWRlIHZhbHVlLlxuICovXG5cbi8qKlxuICogRW11bGF0ZSBnZW9sb2NhdGlvbiBjb29yZGluYXRlcyBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtMb2NhdGlvbn0gbG9jYXRpb24gLSBMb2NhdGlvbiBvYmplY3QuIFRoZSBgYWx0aXR1ZGVgIHZhbHVlIGlzIGlnbm9yZWRcbiAqIHdoaWxlIG1vY2tpbmcgdGhlIHBvc2l0aW9uLlxuICogQHBhcmFtIHtib29sZWFufSBpc0VtdWxhdG9yIFtmYWxzZV0gLSBTZXQgaXQgdG8gdHJ1ZSBpZiB0aGUgZGV2aWNlIHVuZGVyIHRlc3RcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXMgYW4gZW11bGF0b3IgcmF0aGVyIHRoYW4gYSByZWFsIGRldmljZS5cbiAqL1xubWV0aG9kcy5zZXRHZW9Mb2NhdGlvbiA9IGFzeW5jIGZ1bmN0aW9uIHNldEdlb0xvY2F0aW9uIChsb2NhdGlvbiwgaXNFbXVsYXRvciA9IGZhbHNlKSB7XG4gIGxldCBsb25naXR1ZGUgPSBwYXJzZUZsb2F0KGxvY2F0aW9uLmxvbmdpdHVkZSk7XG4gIGlmIChpc05hTihsb25naXR1ZGUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBsb2NhdGlvbi5sb25naXR1ZGUgaXMgZXhwZWN0ZWQgdG8gYmUgYSB2YWxpZCBmbG9hdCBudW1iZXIuICcke2xvY2F0aW9uLmxvbmdpdHVkZX0nIGlzIGdpdmVuIGluc3RlYWRgKTtcbiAgfVxuICBsb25naXR1ZGUgPSBgJHtfLmNlaWwobG9uZ2l0dWRlLCA1KX1gO1xuICBsZXQgbGF0aXR1ZGUgPSBwYXJzZUZsb2F0KGxvY2F0aW9uLmxhdGl0dWRlKTtcbiAgaWYgKGlzTmFOKGxhdGl0dWRlKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgbG9jYXRpb24ubGF0aXR1ZGUgaXMgZXhwZWN0ZWQgdG8gYmUgYSB2YWxpZCBmbG9hdCBudW1iZXIuICcke2xvY2F0aW9uLmxhdGl0dWRlfScgaXMgZ2l2ZW4gaW5zdGVhZGApO1xuICB9XG4gIGxhdGl0dWRlID0gYCR7Xy5jZWlsKGxhdGl0dWRlLCA1KX1gO1xuICBpZiAoaXNFbXVsYXRvcikge1xuICAgIGF3YWl0IHRoaXMucmVzZXRUZWxuZXRBdXRoVG9rZW4oKTtcbiAgICBhd2FpdCB0aGlzLmFkYkV4ZWMoWydlbXUnLCAnZ2VvJywgJ2ZpeCcsIGxvbmdpdHVkZSwgbGF0aXR1ZGVdKTtcbiAgICAvLyBBIHdvcmthcm91bmQgZm9yIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvYW5kcm9pZC9pc3N1ZXMvZGV0YWlsP2lkPTIwNjE4MFxuICAgIGF3YWl0IHRoaXMuYWRiRXhlYyhbJ2VtdScsICdnZW8nLCAnZml4JywgbG9uZ2l0dWRlLnJlcGxhY2UoJy4nLCAnLCcpLCBsYXRpdHVkZS5yZXBsYWNlKCcuJywgJywnKV0pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnNoZWxsKFtcbiAgICAgICdhbScsICdzdGFydHNlcnZpY2UnLFxuICAgICAgJy1lJywgJ2xvbmdpdHVkZScsIGxvbmdpdHVkZSxcbiAgICAgICctZScsICdsYXRpdHVkZScsIGxhdGl0dWRlLFxuICAgICAgTE9DQVRJT05fU0VSVklDRSxcbiAgICBdKTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgZ2VvIGxvY2F0aW9uIGZyb20gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEByZXR1cm5zIHtMb2NhdGlvbn0gVGhlIGN1cnJlbnQgbG9jYXRpb25cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgY3VycmVudCBsb2NhdGlvbiBjYW5ub3QgYmUgcmV0cmlldmVkXG4gKi9cbm1ldGhvZHMuZ2V0R2VvTG9jYXRpb24gPSBhc3luYyBmdW5jdGlvbiBnZXRHZW9Mb2NhdGlvbiAoKSB7XG4gIGxldCBvdXRwdXQ7XG4gIHRyeSB7XG4gICAgb3V0cHV0ID0gYXdhaXQgdGhpcy5zaGVsbChbXG4gICAgICAnYW0nLCAnYnJvYWRjYXN0JyxcbiAgICAgICctbicsIExPQ0FUSU9OX1JFQ0VJVkVSLFxuICAgICAgJy1hJywgTE9DQVRJT05fUkVUUklFVkFMX0FDVElPTixcbiAgICBdKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcmV0cmlldmUgdGhlIGN1cnJlbnQgZ2VvIGNvb3JkaW5hdGVzIGZyb20gdGhlIGRldmljZS4gYCArXG4gICAgICBgTWFrZSBzdXJlIHRoZSBBcHBpdW0gU2V0dGluZ3MgYXBwbGljYXRpb24gaXMgdXAgdG8gZGF0ZSBhbmQgaGFzIGxvY2F0aW9uIHBlcm1pc3Npb25zLiBBbHNvIHRoZSBsb2NhdGlvbiBgICtcbiAgICAgIGBzZXJ2aWNlcyBtdXN0IGJlIGVuYWJsZWQgb24gdGhlIGRldmljZS4gT3JpZ2luYWwgZXJyb3I6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gIH1cblxuICBjb25zdCBtYXRjaCA9IC9kYXRhPVwiKC0/W1xcZFxcLl0rKVxccysoLT9bXFxkXFwuXSspXFxzKygtP1tcXGRcXC5dKylcIi8uZXhlYyhvdXRwdXQpO1xuICBpZiAoIW1hdGNoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3QgcGFyc2UgdGhlIGFjdHVhbCBsb2NhdGlvbiB2YWx1ZXMgZnJvbSB0aGUgY29tbWFuZCBvdXRwdXQ6ICR7b3V0cHV0fWApO1xuICB9XG4gIGNvbnN0IGxvY2F0aW9uID0ge1xuICAgIGxhdGl0dWRlOiBtYXRjaFsxXSxcbiAgICBsb25naXR1ZGU6IG1hdGNoWzJdLFxuICAgIGFsdGl0dWRlOiBtYXRjaFszXSxcbiAgfTtcbiAgbG9nLmRlYnVnKGBHb3QgZ2VvIGNvb3JkaW5hdGVzOiAke0pTT04uc3RyaW5naWZ5KGxvY2F0aW9uKX1gKTtcbiAgcmV0dXJuIGxvY2F0aW9uO1xufTtcblxuLyoqXG4gKiBGb3JjZWZ1bGx5IHJlY3Vyc2l2ZWx5IHJlbW92ZSBhIHBhdGggb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICogQmUgY2FyZWZ1bCB3aGlsZSBjYWxsaW5nIHRoaXMgbWV0aG9kLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIC0gVGhlIHBhdGggdG8gYmUgcmVtb3ZlZCByZWN1cnNpdmVseS5cbiAqL1xubWV0aG9kcy5yaW1yYWYgPSBhc3luYyBmdW5jdGlvbiByaW1yYWYgKHBhdGgpIHtcbiAgYXdhaXQgdGhpcy5zaGVsbChbJ3JtJywgJy1yZicsIHBhdGhdKTtcbn07XG5cbi8qKlxuICogU2VuZCBhIGZpbGUgdG8gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBsb2NhbFBhdGggLSBUaGUgcGF0aCB0byB0aGUgZmlsZSBvbiB0aGUgbG9jYWwgZmlsZSBzeXN0ZW0uXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVtb3RlUGF0aCAtIFRoZSBkZXN0aW5hdGlvbiBwYXRoIG9uIHRoZSByZW1vdGUgZGV2aWNlLlxuICogQHBhcmFtIHtvYmplY3R9IG9wdHMgLSBBZGRpdGlvbmFsIG9wdGlvbnMgbWFwcGluZy4gU2VlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBpdW0vbm9kZS10ZWVuX3Byb2Nlc3MsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIF9leGVjXyBtZXRob2Qgb3B0aW9ucywgZm9yIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgYXZhaWxhYmxlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuXG4gKi9cbm1ldGhvZHMucHVzaCA9IGFzeW5jIGZ1bmN0aW9uIHB1c2ggKGxvY2FsUGF0aCwgcmVtb3RlUGF0aCwgb3B0cykge1xuICBhd2FpdCB0aGlzLm1rZGlyKHBhdGgucG9zaXguZGlybmFtZShyZW1vdGVQYXRoKSk7XG4gIGF3YWl0IHRoaXMuYWRiRXhlYyhbJ3B1c2gnLCBsb2NhbFBhdGgsIHJlbW90ZVBhdGhdLCBvcHRzKTtcbn07XG5cbi8qKlxuICogUmVjZWl2ZSBhIGZpbGUgZnJvbSB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHJlbW90ZVBhdGggLSBUaGUgc291cmNlIHBhdGggb24gdGhlIHJlbW90ZSBkZXZpY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gbG9jYWxQYXRoIC0gVGhlIGRlc3RpbmF0aW9uIHBhdGggdG8gdGhlIGZpbGUgb24gdGhlIGxvY2FsIGZpbGUgc3lzdGVtLlxuICovXG5tZXRob2RzLnB1bGwgPSBhc3luYyBmdW5jdGlvbiBwdWxsIChyZW1vdGVQYXRoLCBsb2NhbFBhdGgpIHtcbiAgLy8gcHVsbCBmb2xkZXIgY2FuIHRha2UgbW9yZSB0aW1lLCBpbmNyZWFzaW5nIHRpbWUgb3V0IHRvIDYwIHNlY3NcbiAgYXdhaXQgdGhpcy5hZGJFeGVjKFsncHVsbCcsIHJlbW90ZVBhdGgsIGxvY2FsUGF0aF0sIHt0aW1lb3V0OiA2MDAwMH0pO1xufTtcblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHRoZSBwcm9jZXNzIHdpdGggdGhlIHBhcnRpY3VsYXIgbmFtZSBpcyBydW5uaW5nIG9uIHRoZSBkZXZpY2VcbiAqIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHByb2Nlc3NOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHByb2Nlc3MgdG8gYmUgY2hlY2tlZC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdpdmVuIHByb2Nlc3MgaXMgcnVubmluZy5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgZ2l2ZW4gcHJvY2VzcyBuYW1lIGlzIG5vdCBhIHZhbGlkIGNsYXNzIG5hbWUuXG4gKi9cbm1ldGhvZHMucHJvY2Vzc0V4aXN0cyA9IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NFeGlzdHMgKHByb2Nlc3NOYW1lKSB7XG4gIGlmICghdGhpcy5pc1ZhbGlkQ2xhc3MocHJvY2Vzc05hbWUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHByb2Nlc3MgbmFtZTogJHtwcm9jZXNzTmFtZX1gKTtcbiAgfVxuICByZXR1cm4gIV8uaXNFbXB0eShhd2FpdCB0aGlzLmdldFBJRHNCeU5hbWUocHJvY2Vzc05hbWUpKTtcbn07XG5cbi8qKlxuICogR2V0IFRDUCBwb3J0IGZvcndhcmRpbmcgd2l0aCBhZGIgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICogQHJldHVybiB7QXJyYXkuPFN0cmluZz59IFRoZSBvdXRwdXQgb2YgdGhlIGNvcnJlc3BvbmRpbmcgYWRiIGNvbW1hbmQuIEFuIGFycmF5IGNvbnRhaW5zIGVhY2ggZm9yd2FyZGluZyBsaW5lIG9mIG91dHB1dFxuICovXG5tZXRob2RzLmdldEZvcndhcmRMaXN0ID0gYXN5bmMgZnVuY3Rpb24gZ2V0Rm9yd2FyZExpc3QgKCkge1xuICBsb2cuZGVidWcoYExpc3QgZm9yd2FyZGluZyBwb3J0c2ApO1xuICBjb25zdCBjb25uZWN0aW9ucyA9IGF3YWl0IHRoaXMuYWRiRXhlYyhbJ2ZvcndhcmQnLCAnLS1saXN0J10pO1xuICByZXR1cm4gY29ubmVjdGlvbnMuc3BsaXQoRU9MKS5maWx0ZXIoKGxpbmUpID0+IEJvb2xlYW4obGluZS50cmltKCkpKTtcbn07XG5cbi8qKlxuICogU2V0dXAgVENQIHBvcnQgZm9yd2FyZGluZyB3aXRoIGFkYiBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBzeXN0ZW1Qb3J0IC0gVGhlIG51bWJlciBvZiB0aGUgbG9jYWwgc3lzdGVtIHBvcnQuXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGRldmljZVBvcnQgLSBUaGUgbnVtYmVyIG9mIHRoZSByZW1vdGUgZGV2aWNlIHBvcnQuXG4gKi9cbm1ldGhvZHMuZm9yd2FyZFBvcnQgPSBhc3luYyBmdW5jdGlvbiBmb3J3YXJkUG9ydCAoc3lzdGVtUG9ydCwgZGV2aWNlUG9ydCkge1xuICBsb2cuZGVidWcoYEZvcndhcmRpbmcgc3lzdGVtOiAke3N5c3RlbVBvcnR9IHRvIGRldmljZTogJHtkZXZpY2VQb3J0fWApO1xuICBhd2FpdCB0aGlzLmFkYkV4ZWMoWydmb3J3YXJkJywgYHRjcDoke3N5c3RlbVBvcnR9YCwgYHRjcDoke2RldmljZVBvcnR9YF0pO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgVENQIHBvcnQgZm9yd2FyZGluZyB3aXRoIGFkYiBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuIFRoZSBmb3J3YXJkaW5nXG4gKiBmb3IgdGhlIGdpdmVuIHBvcnQgc2hvdWxkIGJlIHNldHVwIHdpdGgge0BsaW5rICNmb3J3YXJkUG9ydH0gZmlyc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBzeXN0ZW1Qb3J0IC0gVGhlIG51bWJlciBvZiB0aGUgbG9jYWwgc3lzdGVtIHBvcnRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIHJlbW92ZSBmb3J3YXJkaW5nIG9uLlxuICovXG5tZXRob2RzLnJlbW92ZVBvcnRGb3J3YXJkID0gYXN5bmMgZnVuY3Rpb24gcmVtb3ZlUG9ydEZvcndhcmQgKHN5c3RlbVBvcnQpIHtcbiAgbG9nLmRlYnVnKGBSZW1vdmluZyBmb3J3YXJkZWQgcG9ydCBzb2NrZXQgY29ubmVjdGlvbjogJHtzeXN0ZW1Qb3J0fSBgKTtcbiAgYXdhaXQgdGhpcy5hZGJFeGVjKFsnZm9yd2FyZCcsIGAtLXJlbW92ZWAsIGB0Y3A6JHtzeXN0ZW1Qb3J0fWBdKTtcbn07XG5cbi8qKlxuICogR2V0IFRDUCBwb3J0IGZvcndhcmRpbmcgd2l0aCBhZGIgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICogQHJldHVybiB7QXJyYXkuPFN0cmluZz59IFRoZSBvdXRwdXQgb2YgdGhlIGNvcnJlc3BvbmRpbmcgYWRiIGNvbW1hbmQuIEFuIGFycmF5IGNvbnRhaW5zIGVhY2ggZm9yd2FyZGluZyBsaW5lIG9mIG91dHB1dFxuICovXG5tZXRob2RzLmdldFJldmVyc2VMaXN0ID0gYXN5bmMgZnVuY3Rpb24gZ2V0UmV2ZXJzZUxpc3QgKCkge1xuICBsb2cuZGVidWcoYExpc3QgcmV2ZXJzZSBmb3J3YXJkaW5nIHBvcnRzYCk7XG4gIGNvbnN0IGNvbm5lY3Rpb25zID0gYXdhaXQgdGhpcy5hZGJFeGVjKFsncmV2ZXJzZScsICctLWxpc3QnXSk7XG4gIHJldHVybiBjb25uZWN0aW9ucy5zcGxpdChFT0wpLmZpbHRlcigobGluZSkgPT4gQm9vbGVhbihsaW5lLnRyaW0oKSkpO1xufTtcblxuLyoqXG4gKiBTZXR1cCBUQ1AgcG9ydCBmb3J3YXJkaW5nIHdpdGggYWRiIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqIE9ubHkgYXZhaWxhYmxlIGZvciBBUEkgMjErLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gZGV2aWNlUG9ydCAtIFRoZSBudW1iZXIgb2YgdGhlIHJlbW90ZSBkZXZpY2UgcG9ydC5cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gc3lzdGVtUG9ydCAtIFRoZSBudW1iZXIgb2YgdGhlIGxvY2FsIHN5c3RlbSBwb3J0LlxuICovXG5tZXRob2RzLnJldmVyc2VQb3J0ID0gYXN5bmMgZnVuY3Rpb24gcmV2ZXJzZVBvcnQgKGRldmljZVBvcnQsIHN5c3RlbVBvcnQpIHtcbiAgbG9nLmRlYnVnKGBGb3J3YXJkaW5nIGRldmljZTogJHtkZXZpY2VQb3J0fSB0byBzeXN0ZW06ICR7c3lzdGVtUG9ydH1gKTtcbiAgYXdhaXQgdGhpcy5hZGJFeGVjKFsncmV2ZXJzZScsIGB0Y3A6JHtkZXZpY2VQb3J0fWAsIGB0Y3A6JHtzeXN0ZW1Qb3J0fWBdKTtcbn07XG5cbi8qKlxuICogUmVtb3ZlIFRDUCBwb3J0IGZvcndhcmRpbmcgd2l0aCBhZGIgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LiBUaGUgZm9yd2FyZGluZ1xuICogZm9yIHRoZSBnaXZlbiBwb3J0IHNob3VsZCBiZSBzZXR1cCB3aXRoIHtAbGluayAjZm9yd2FyZFBvcnR9IGZpcnN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gZGV2aWNlUG9ydCAtIFRoZSBudW1iZXIgb2YgdGhlIHJlbW90ZSBkZXZpY2UgcG9ydFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gcmVtb3ZlIGZvcndhcmRpbmcgb24uXG4gKi9cbm1ldGhvZHMucmVtb3ZlUG9ydFJldmVyc2UgPSBhc3luYyBmdW5jdGlvbiByZW1vdmVQb3J0UmV2ZXJzZSAoZGV2aWNlUG9ydCkge1xuICBsb2cuZGVidWcoYFJlbW92aW5nIHJldmVyc2UgZm9yd2FyZGVkIHBvcnQgc29ja2V0IGNvbm5lY3Rpb246ICR7ZGV2aWNlUG9ydH0gYCk7XG4gIGF3YWl0IHRoaXMuYWRiRXhlYyhbJ3JldmVyc2UnLCBgLS1yZW1vdmVgLCBgdGNwOiR7ZGV2aWNlUG9ydH1gXSk7XG59O1xuXG4vKipcbiAqIFNldHVwIFRDUCBwb3J0IGZvcndhcmRpbmcgd2l0aCBhZGIgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LiBUaGUgZGlmZmVyZW5jZVxuICogYmV0d2VlbiB7QGxpbmsgI2ZvcndhcmRQb3J0fSBpcyB0aGF0IHRoaXMgbWV0aG9kIGRvZXMgc2V0dXAgZm9yIGFuIGFic3RyYWN0XG4gKiBsb2NhbCBwb3J0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gc3lzdGVtUG9ydCAtIFRoZSBudW1iZXIgb2YgdGhlIGxvY2FsIHN5c3RlbSBwb3J0LlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBkZXZpY2VQb3J0IC0gVGhlIG51bWJlciBvZiB0aGUgcmVtb3RlIGRldmljZSBwb3J0LlxuICovXG5tZXRob2RzLmZvcndhcmRBYnN0cmFjdFBvcnQgPSBhc3luYyBmdW5jdGlvbiBmb3J3YXJkQWJzdHJhY3RQb3J0IChzeXN0ZW1Qb3J0LCBkZXZpY2VQb3J0KSB7XG4gIGxvZy5kZWJ1ZyhgRm9yd2FyZGluZyBzeXN0ZW06ICR7c3lzdGVtUG9ydH0gdG8gYWJzdHJhY3QgZGV2aWNlOiAke2RldmljZVBvcnR9YCk7XG4gIGF3YWl0IHRoaXMuYWRiRXhlYyhbJ2ZvcndhcmQnLCBgdGNwOiR7c3lzdGVtUG9ydH1gLCBgbG9jYWxhYnN0cmFjdDoke2RldmljZVBvcnR9YF0pO1xufTtcblxuLyoqXG4gKiBFeGVjdXRlIHBpbmcgc2hlbGwgY29tbWFuZCBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgY29tbWFuZCBvdXRwdXQgY29udGFpbnMgJ3BpbmcnIHN1YnN0cmluZy5cbiAqIEB0aHJvd3Mge2Vycm9yfSBJZiB0aGVyZSB3YXMgYW4gZXJyb3Igd2hpbGUgZXhlY3V0aW5nICdwaW5nJyBjb21tYW5kIG9uIHRoZVxuICogICAgICAgICAgICAgICAgIGRldmljZSB1bmRlciB0ZXN0LlxuICovXG5tZXRob2RzLnBpbmcgPSBhc3luYyBmdW5jdGlvbiBwaW5nICgpIHtcbiAgbGV0IHN0ZG91dCA9IGF3YWl0IHRoaXMuc2hlbGwoWydlY2hvJywgJ3BpbmcnXSk7XG4gIGlmIChzdGRvdXQuaW5kZXhPZigncGluZycpID09PSAwKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKGBBREIgcGluZyBmYWlsZWQsIHJldHVybmVkICR7c3Rkb3V0fWApO1xufTtcblxuLyoqXG4gKiBSZXN0YXJ0IHRoZSBkZXZpY2UgdW5kZXIgdGVzdCB1c2luZyBhZGIgY29tbWFuZHMuXG4gKlxuICogQHRocm93cyB7ZXJyb3J9IElmIHN0YXJ0IGZhaWxzLlxuICovXG5tZXRob2RzLnJlc3RhcnQgPSBhc3luYyBmdW5jdGlvbiByZXN0YXJ0ICgpIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCB0aGlzLnN0b3BMb2djYXQoKTtcbiAgICBhd2FpdCB0aGlzLnJlc3RhcnRBZGIoKTtcbiAgICBhd2FpdCB0aGlzLndhaXRGb3JEZXZpY2UoNjApO1xuICAgIGF3YWl0IHRoaXMuc3RhcnRMb2djYXQoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgUmVzdGFydCBmYWlsZWQuIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgfVxufTtcblxuLyoqXG4gKiBTdGFydCB0aGUgbG9nY2F0IHByb2Nlc3MgdG8gZ2F0aGVyIGxvZ3MuXG4gKlxuICogQHRocm93cyB7ZXJyb3J9IElmIHJlc3RhcnQgZmFpbHMuXG4gKi9cbm1ldGhvZHMuc3RhcnRMb2djYXQgPSBhc3luYyBmdW5jdGlvbiBzdGFydExvZ2NhdCAoKSB7XG4gIGlmICghXy5pc0VtcHR5KHRoaXMubG9nY2F0KSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlRyeWluZyB0byBzdGFydCBsb2djYXQgY2FwdHVyZSBidXQgaXQncyBhbHJlYWR5IHN0YXJ0ZWQhXCIpO1xuICB9XG4gIHRoaXMubG9nY2F0ID0gbmV3IExvZ2NhdCh7XG4gICAgYWRiOiB0aGlzLmV4ZWN1dGFibGUsXG4gICAgZGVidWc6IGZhbHNlLFxuICAgIGRlYnVnVHJhY2U6IGZhbHNlLFxuICAgIGNsZWFyRGV2aWNlTG9nc09uU3RhcnQ6ICEhdGhpcy5jbGVhckRldmljZUxvZ3NPblN0YXJ0LFxuICB9KTtcbiAgYXdhaXQgdGhpcy5sb2djYXQuc3RhcnRDYXB0dXJlKCk7XG59O1xuXG4vKipcbiAqIFN0b3AgdGhlIGFjdGl2ZSBsb2djYXQgcHJvY2VzcyB3aGljaCBnYXRoZXJzIGxvZ3MuXG4gKiBUaGUgY2FsbCB3aWxsIGJlIGlnbm9yZWQgaWYgbm8gbG9nY2F0IHByb2Nlc3MgaXMgcnVubmluZy5cbiAqL1xubWV0aG9kcy5zdG9wTG9nY2F0ID0gYXN5bmMgZnVuY3Rpb24gc3RvcExvZ2NhdCAoKSB7XG4gIGlmIChfLmlzRW1wdHkodGhpcy5sb2djYXQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRyeSB7XG4gICAgYXdhaXQgdGhpcy5sb2djYXQuc3RvcENhcHR1cmUoKTtcbiAgfSBmaW5hbGx5IHtcbiAgICB0aGlzLmxvZ2NhdCA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogUmV0cmlldmUgdGhlIG91dHB1dCBmcm9tIHRoZSBjdXJyZW50bHkgcnVubmluZyBsb2djYXQgcHJvY2Vzcy5cbiAqIFRoZSBsb2djYXQgcHJvY2VzcyBzaG91bGQgYmUgZXhlY3V0ZWQgYnkgezJsaW5rICNzdGFydExvZ2NhdH0gbWV0aG9kLlxuICpcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNvbGxlY3RlZCBsb2djYXQgb3V0cHV0LlxuICogQHRocm93cyB7RXJyb3J9IElmIGxvZ2NhdCBwcm9jZXNzIGlzIG5vdCBydW5uaW5nLlxuICovXG5tZXRob2RzLmdldExvZ2NhdExvZ3MgPSBmdW5jdGlvbiBnZXRMb2djYXRMb2dzICgpIHtcbiAgaWYgKF8uaXNFbXB0eSh0aGlzLmxvZ2NhdCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBnZXQgbG9nY2F0IGxvZ3Mgc2luY2UgbG9nY2F0IGhhc24ndCBzdGFydGVkXCIpO1xuICB9XG4gIHJldHVybiB0aGlzLmxvZ2NhdC5nZXRMb2dzKCk7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgY2FsbGJhY2sgZm9yIHRoZSBsb2djYXQgb3V0cHV0IGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIC0gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLCB3aGljaCBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVGhlIGFyZ3VtZW50IGlzXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgbG9nIHJlY29yZCBvYmplY3Qgd2l0aCBgdGltZXN0YW1wYCwgYGxldmVsYCBhbmQgYG1lc3NhZ2VgIHByb3BlcnRpZXMuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgbG9nY2F0IHByb2Nlc3MgaXMgbm90IHJ1bm5pbmcuXG4gKi9cbm1ldGhvZHMuc2V0TG9nY2F0TGlzdGVuZXIgPSBmdW5jdGlvbiBzZXRMb2djYXRMaXN0ZW5lciAobGlzdGVuZXIpIHtcbiAgaWYgKF8uaXNFbXB0eSh0aGlzLmxvZ2NhdCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJMb2djYXQgcHJvY2VzcyBoYXNuJ3QgYmVlbiBzdGFydGVkXCIpO1xuICB9XG4gIHRoaXMubG9nY2F0Lm9uKCdvdXRwdXQnLCBsaXN0ZW5lcik7XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgdGhlIHByZXZpb3VzbHkgc2V0IGNhbGxiYWNrIGZvciB0aGUgbG9nY2F0IG91dHB1dCBldmVudC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciAtIFRoZSBsaXN0ZW5lciBmdW5jdGlvbiwgd2hpY2ggaGFzIGJlZW4gcHJldmlvdXNseVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzZWQgdG8gYHNldExvZ2NhdExpc3RlbmVyYFxuICogQHRocm93cyB7RXJyb3J9IElmIGxvZ2NhdCBwcm9jZXNzIGlzIG5vdCBydW5uaW5nLlxuICovXG5tZXRob2RzLnJlbW92ZUxvZ2NhdExpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlTG9nY2F0TGlzdGVuZXIgKGxpc3RlbmVyKSB7XG4gIGlmIChfLmlzRW1wdHkodGhpcy5sb2djYXQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTG9nY2F0IHByb2Nlc3MgaGFzbid0IGJlZW4gc3RhcnRlZFwiKTtcbiAgfVxuICB0aGlzLmxvZ2NhdC5yZW1vdmVMaXN0ZW5lcignb3V0cHV0JywgbGlzdGVuZXIpO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGxpc3Qgb2YgcHJvY2VzcyBpZHMgZm9yIHRoZSBwYXJ0aWN1bGFyIHByb2Nlc3Mgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gVGhlIHBhcnQgb2YgcHJvY2VzcyBuYW1lLlxuICogQHJldHVybiB7QXJyYXkuPG51bWJlcj59IFRoZSBsaXN0IG9mIG1hdGNoZWQgcHJvY2VzcyBJRHMgb3IgYW4gZW1wdHkgbGlzdC5cbiAqL1xubWV0aG9kcy5nZXRQSURzQnlOYW1lID0gYXN5bmMgZnVuY3Rpb24gZ2V0UElEc0J5TmFtZSAobmFtZSkge1xuICBsb2cuZGVidWcoYEdldHRpbmcgSURzIG9mIGFsbCAnJHtuYW1lfScgcHJvY2Vzc2VzYCk7XG4gIGlmICghXy5pc0Jvb2xlYW4odGhpcy5faXNQZ3JlcEF2YWlsYWJsZSkpIHtcbiAgICAvLyBwZ3JlcCBpcyBpbiBwcmlvcml0eSwgc2luY2UgcGlkb2YgaGFzIGJlZW4gcmVwb3J0ZWQgb2YgaGF2aW5nIGJ1Z3Mgb24gc29tZSBwbGF0Zm9ybXNcbiAgICBjb25zdCBwZ3JlcE91dHB1dCA9IF8udHJpbShhd2FpdCB0aGlzLnNoZWxsKFsncGdyZXAgLS1oZWxwOyBlY2hvICQ/J10pKTtcbiAgICB0aGlzLl9pc1BncmVwQXZhaWxhYmxlID0gcGFyc2VJbnQoXy5sYXN0KHBncmVwT3V0cHV0LnNwbGl0KC9cXHMrLykpLCAxMCkgPT09IDA7XG4gICAgaWYgKHRoaXMuX2lzUGdyZXBBdmFpbGFibGUpIHtcbiAgICAgIHRoaXMuX2NhblBncmVwVXNlRnVsbENtZExpbmVTZWFyY2ggPSAvXi1mXFxiL20udGVzdChwZ3JlcE91dHB1dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2lzUGlkb2ZBdmFpbGFibGUgPSBwYXJzZUludChhd2FpdCB0aGlzLnNoZWxsKFsncGlkb2YgLS1oZWxwID4gL2Rldi9udWxsOyBlY2hvICQ/J10pLCAxMCkgPT09IDA7XG4gICAgfVxuICB9XG4gIGlmICh0aGlzLl9pc1BncmVwQXZhaWxhYmxlIHx8IHRoaXMuX2lzUGlkb2ZBdmFpbGFibGUpIHtcbiAgICBjb25zdCBzaGVsbENvbW1hbmQgPSB0aGlzLl9pc1BncmVwQXZhaWxhYmxlXG4gICAgICA/ICh0aGlzLl9jYW5QZ3JlcFVzZUZ1bGxDbWRMaW5lU2VhcmNoXG4gICAgICAgID8gWydwZ3JlcCcsICctZicsIF8uZXNjYXBlUmVnRXhwKG5hbWUpXVxuICAgICAgICA6IFsncGdyZXAnLCBgXiR7Xy5lc2NhcGVSZWdFeHAobmFtZS5zbGljZSgtMTUpKX0kYF0pXG4gICAgICA6IFsncGlkb2YnLCBuYW1lXTtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIChhd2FpdCB0aGlzLnNoZWxsKHNoZWxsQ29tbWFuZCkpXG4gICAgICAgIC5zcGxpdCgvXFxzKy8pXG4gICAgICAgIC5tYXAoKHgpID0+IHBhcnNlSW50KHgsIDEwKSlcbiAgICAgICAgLmZpbHRlcigoeCkgPT4gXy5pc0ludGVnZXIoeCkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIGVycm9yIGNvZGUgMSBpcyByZXR1cm5lZCBpZiB0aGUgdXRpbGl0eSBkaWQgbm90IGZpbmQgYW55IHByb2Nlc3Nlc1xuICAgICAgLy8gd2l0aCB0aGUgZ2l2ZW4gbmFtZVxuICAgICAgaWYgKGUuY29kZSA9PT0gMSkge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBleHRyYWN0IHByb2Nlc3MgSUQgb2YgJyR7bmFtZX0nOiAke2UubWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICBsb2cuZGVidWcoJ1VzaW5nIHBzLWJhc2VkIFBJRCBkZXRlY3Rpb24nKTtcbiAgY29uc3QgcGlkQ29sdW1uVGl0bGUgPSAnUElEJztcbiAgY29uc3QgcHJvY2Vzc05hbWVDb2x1bW5UaXRsZSA9ICdOQU1FJztcbiAgY29uc3Qgc3Rkb3V0ID0gYXdhaXQgdGhpcy5zaGVsbChbJ3BzJ10pO1xuICBjb25zdCB0aXRsZU1hdGNoID0gbmV3IFJlZ0V4cChgXiguKlxcXFxiJHtwaWRDb2x1bW5UaXRsZX1cXFxcYi4qXFxcXGIke3Byb2Nlc3NOYW1lQ29sdW1uVGl0bGV9XFxcXGIuKikkYCwgJ20nKS5leGVjKHN0ZG91dCk7XG4gIGlmICghdGl0bGVNYXRjaCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGV4dHJhY3QgUElEIG9mICcke25hbWV9JyBmcm9tIHBzIG91dHB1dDogJHtzdGRvdXR9YCk7XG4gIH1cbiAgY29uc3QgYWxsVGl0bGVzID0gdGl0bGVNYXRjaFsxXS50cmltKCkuc3BsaXQoL1xccysvKTtcbiAgY29uc3QgcGlkSW5kZXggPSBhbGxUaXRsZXMuaW5kZXhPZihwaWRDb2x1bW5UaXRsZSk7XG4gIGNvbnN0IHBpZHMgPSBbXTtcbiAgY29uc3QgcHJvY2Vzc05hbWVSZWdleCA9IG5ldyBSZWdFeHAoYF4oLipcXFxcYlxcXFxkK1xcXFxiLipcXFxcYiR7Xy5lc2NhcGVSZWdFeHAobmFtZSl9XFxcXGIuKikkYCwgJ2dtJyk7XG4gIGxldCBtYXRjaGVkTGluZTtcbiAgd2hpbGUgKChtYXRjaGVkTGluZSA9IHByb2Nlc3NOYW1lUmVnZXguZXhlYyhzdGRvdXQpKSkge1xuICAgIGNvbnN0IGl0ZW1zID0gbWF0Y2hlZExpbmVbMV0udHJpbSgpLnNwbGl0KC9cXHMrLyk7XG4gICAgaWYgKHBpZEluZGV4ID49IGFsbFRpdGxlcy5sZW5ndGggfHwgaXNOYU4oaXRlbXNbcGlkSW5kZXhdKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZXh0cmFjdCBQSUQgb2YgJyR7bmFtZX0nIGZyb20gJyR7bWF0Y2hlZExpbmVbMV0udHJpbSgpfScuIHBzIG91dHB1dDogJHtzdGRvdXR9YCk7XG4gICAgfVxuICAgIHBpZHMucHVzaChwYXJzZUludChpdGVtc1twaWRJbmRleF0sIDEwKSk7XG4gIH1cbiAgcmV0dXJuIHBpZHM7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgbGlzdCBvZiBwcm9jZXNzIGlkcyBmb3IgdGhlIHBhcnRpY3VsYXIgcHJvY2VzcyBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBUaGUgcGFydCBvZiBwcm9jZXNzIG5hbWUuXG4gKiBAcmV0dXJuIHtBcnJheS48bnVtYmVyPn0gVGhlIGxpc3Qgb2YgbWF0Y2hlZCBwcm9jZXNzIElEcyBvciBhbiBlbXB0eSBsaXN0LlxuICovXG5tZXRob2RzLmtpbGxQcm9jZXNzZXNCeU5hbWUgPSBhc3luYyBmdW5jdGlvbiBraWxsUHJvY2Vzc2VzQnlOYW1lIChuYW1lKSB7XG4gIHRyeSB7XG4gICAgbG9nLmRlYnVnKGBBdHRlbXB0aW5nIHRvIGtpbGwgYWxsICR7bmFtZX0gcHJvY2Vzc2VzYCk7XG4gICAgbGV0IHBpZHMgPSBhd2FpdCB0aGlzLmdldFBJRHNCeU5hbWUobmFtZSk7XG4gICAgaWYgKF8uaXNFbXB0eShwaWRzKSkge1xuICAgICAgbG9nLmluZm8oYE5vICcke25hbWV9JyBwcm9jZXNzIGhhcyBiZWVuIGZvdW5kYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAobGV0IHBpZCBvZiBwaWRzKSB7XG4gICAgICBhd2FpdCB0aGlzLmtpbGxQcm9jZXNzQnlQSUQocGlkKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBraWxsICR7bmFtZX0gcHJvY2Vzc2VzLiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gIH1cbn07XG5cbi8qKlxuICogS2lsbCB0aGUgcGFydGljdWxhciBwcm9jZXNzIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqIFRoZSBjdXJyZW50IHVzZXIgaXMgYXV0b21hdGljYWxseSBzd2l0Y2hlZCB0byByb290IGlmIG5lY2Vzc2FyeSBpbiBvcmRlclxuICogdG8gcHJvcGVybHkga2lsbCB0aGUgcHJvY2Vzcy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IHBpZCAtIFRoZSBJRCBvZiB0aGUgcHJvY2VzcyB0byBiZSBraWxsZWQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEtpbGwgY29tbWFuZCBzdGRvdXQuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHByb2Nlc3Mgd2l0aCBnaXZlbiBJRCBpcyBub3QgcHJlc2VudCBvciBjYW5ub3QgYmUga2lsbGVkLlxuICovXG5tZXRob2RzLmtpbGxQcm9jZXNzQnlQSUQgPSBhc3luYyBmdW5jdGlvbiBraWxsUHJvY2Vzc0J5UElEIChwaWQpIHtcbiAgbG9nLmRlYnVnKGBBdHRlbXB0aW5nIHRvIGtpbGwgcHJvY2VzcyAke3BpZH1gKTtcbiAgbGV0IHdhc1Jvb3QgPSBmYWxzZTtcbiAgbGV0IGJlY2FtZVJvb3QgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICB0cnkge1xuICAgICAgLy8gQ2hlY2sgaWYgdGhlIHByb2Nlc3MgZXhpc3RzIGFuZCB0aHJvdyBhbiBleGNlcHRpb24gb3RoZXJ3aXNlXG4gICAgICBhd2FpdCB0aGlzLnNoZWxsKFsna2lsbCcsICctMCcsIHBpZF0pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmICghZS5tZXNzYWdlLmluY2x1ZGVzKCdPcGVyYXRpb24gbm90IHBlcm1pdHRlZCcpKSB7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICB3YXNSb290ID0gYXdhaXQgdGhpcy5pc1Jvb3QoKTtcbiAgICAgIH0gY2F0Y2ggKGlnbikge31cbiAgICAgIGlmICh3YXNSb290KSB7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgICBsb2cuaW5mbyhgQ2Fubm90IGtpbGwgUElEICR7cGlkfSBkdWUgdG8gaW5zdWZmaWNpZW50IHBlcm1pc3Npb25zLiBSZXRyeWluZyBhcyByb290YCk7XG4gICAgICBsZXQge2lzU3VjY2Vzc2Z1bH0gPSBhd2FpdCB0aGlzLnJvb3QoKTtcbiAgICAgIGJlY2FtZVJvb3QgPSBpc1N1Y2Nlc3NmdWw7XG4gICAgICBhd2FpdCB0aGlzLnNoZWxsKFsna2lsbCcsICctMCcsIHBpZF0pO1xuICAgIH1cbiAgICBjb25zdCB0aW1lb3V0TXMgPSAxMDAwO1xuICAgIGxldCBzdGRvdXQ7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHdhaXRGb3JDb25kaXRpb24oYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHN0ZG91dCA9IGF3YWl0IHRoaXMuc2hlbGwoWydraWxsJywgcGlkXSk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8ga2lsbCByZXR1cm5zIG5vbi16ZXJvIGNvZGUgaWYgdGhlIHByb2Nlc3MgaXMgYWxyZWFkeSBraWxsZWRcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSwge3dhaXRNczogdGltZW91dE1zLCBpbnRlcnZhbE1zOiAzMDB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGxvZy53YXJuKGBDYW5ub3Qga2lsbCBwcm9jZXNzICR7cGlkfSBpbiAke3RpbWVvdXRNc30gbXMuIFRyeWluZyB0byBmb3JjZSBraWxsLi4uYCk7XG4gICAgICBzdGRvdXQgPSBhd2FpdCB0aGlzLnNoZWxsKFsna2lsbCcsICctOScsIHBpZF0pO1xuICAgIH1cbiAgICByZXR1cm4gc3Rkb3V0O1xuICB9IGZpbmFsbHkge1xuICAgIGlmIChiZWNhbWVSb290KSB7XG4gICAgICBhd2FpdCB0aGlzLnVucm9vdCgpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBCcm9hZGNhc3QgcHJvY2VzcyBraWxsaW5nIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaW50ZW50IC0gVGhlIG5hbWUgb2YgdGhlIGludGVudCB0byBicm9hZGNhc3QgdG8uXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvY2Vzc05hbWUgLSBUaGUgbmFtZSBvZiB0aGUga2lsbGVkIHByb2Nlc3MuXG4gKiBAdGhyb3dzIHtlcnJvcn0gSWYgdGhlIHByb2Nlc3Mgd2FzIG5vdCBraWxsZWQuXG4gKi9cbm1ldGhvZHMuYnJvYWRjYXN0UHJvY2Vzc0VuZCA9IGFzeW5jIGZ1bmN0aW9uIGJyb2FkY2FzdFByb2Nlc3NFbmQgKGludGVudCwgcHJvY2Vzc05hbWUpIHtcbiAgLy8gc3RhcnQgdGhlIGJyb2FkY2FzdCB3aXRob3V0IHdhaXRpbmcgZm9yIGl0IHRvIGZpbmlzaC5cbiAgdGhpcy5icm9hZGNhc3QoaW50ZW50KTtcbiAgLy8gd2FpdCBmb3IgdGhlIHByb2Nlc3MgdG8gZW5kXG4gIGxldCBzdGFydCA9IERhdGUubm93KCk7XG4gIGxldCB0aW1lb3V0TXMgPSA0MDAwMDtcbiAgdHJ5IHtcbiAgICB3aGlsZSAoKERhdGUubm93KCkgLSBzdGFydCkgPCB0aW1lb3V0TXMpIHtcbiAgICAgIGlmIChhd2FpdCB0aGlzLnByb2Nlc3NFeGlzdHMocHJvY2Vzc05hbWUpKSB7XG4gICAgICAgIC8vIGNvb2wgZG93blxuICAgICAgICBhd2FpdCBzbGVlcCg0MDApO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBQcm9jZXNzIG5ldmVyIGRpZWQgd2l0aGluICR7dGltZW91dE1zfSBtc2ApO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gYnJvYWRjYXN0IHByb2Nlc3MgZW5kLiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gIH1cbn07XG5cbi8qKlxuICogQnJvYWRjYXN0IGEgbWVzc2FnZSB0byB0aGUgZ2l2ZW4gaW50ZW50LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpbnRlbnQgLSBUaGUgbmFtZSBvZiB0aGUgaW50ZW50IHRvIGJyb2FkY2FzdCB0by5cbiAqIEB0aHJvd3Mge2Vycm9yfSBJZiBpbnRlbnQgbmFtZSBpcyBub3QgYSB2YWxpZCBjbGFzcyBuYW1lLlxuICovXG5tZXRob2RzLmJyb2FkY2FzdCA9IGFzeW5jIGZ1bmN0aW9uIGJyb2FkY2FzdCAoaW50ZW50KSB7XG4gIGlmICghdGhpcy5pc1ZhbGlkQ2xhc3MoaW50ZW50KSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBpbnRlbnQgJHtpbnRlbnR9YCk7XG4gIH1cbiAgbG9nLmRlYnVnKGBCcm9hZGNhc3Rpbmc6ICR7aW50ZW50fWApO1xuICBhd2FpdCB0aGlzLnNoZWxsKFsnYW0nLCAnYnJvYWRjYXN0JywgJy1hJywgaW50ZW50XSk7XG59O1xuXG4vKipcbiAqIEtpbGwgQW5kcm9pZCBpbnN0cnVtZW50cyBpZiB0aGV5IGFyZSBjdXJyZW50bHkgcnVubmluZy5cbiAqL1xubWV0aG9kcy5lbmRBbmRyb2lkQ292ZXJhZ2UgPSBhc3luYyBmdW5jdGlvbiBlbmRBbmRyb2lkQ292ZXJhZ2UgKCkge1xuICBpZiAodGhpcy5pbnN0cnVtZW50UHJvYyAmJiB0aGlzLmluc3RydW1lbnRQcm9jLmlzUnVubmluZykge1xuICAgIGF3YWl0IHRoaXMuaW5zdHJ1bWVudFByb2Muc3RvcCgpO1xuICB9XG59O1xuXG4vKipcbiAqIEluc3RydW1lbnQgdGhlIHBhcnRpY3VsYXIgYWN0aXZpdHkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBuYW1lIG9mIHRoZSBwYWNrYWdlIHRvIGJlIGluc3RydW1lbnRlZC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBhY3Rpdml0eSAtIFRoZSBuYW1lIG9mIHRoZSBtYWluIGFjdGl2aXR5IGluIHRoaXMgcGFja2FnZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpbnN0cnVtZW50V2l0aCAtIFRoZSBuYW1lIG9mIHRoZSBwYWNrYWdlIHRvIGluc3RydW1lbnRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBhY3Rpdml0eSB3aXRoLlxuICogQHRocm93cyB7ZXJyb3J9IElmIGFueSBleGNlcHRpb24gaXMgcmVwb3J0ZWQgYnkgYWRiIHNoZWxsLlxuICovXG5tZXRob2RzLmluc3RydW1lbnQgPSBhc3luYyBmdW5jdGlvbiBpbnN0cnVtZW50IChwa2csIGFjdGl2aXR5LCBpbnN0cnVtZW50V2l0aCkge1xuICBpZiAoYWN0aXZpdHlbMF0gIT09ICcuJykge1xuICAgIHBrZyA9ICcnO1xuICB9XG4gIGxldCBwa2dBY3Rpdml0eSA9IChwa2cgKyBhY3Rpdml0eSkucmVwbGFjZSgvXFwuKy9nLCAnLicpOyAvLyBGaXggcGtnLi5hY3Rpdml0eSBlcnJvclxuICBsZXQgc3Rkb3V0ID0gYXdhaXQgdGhpcy5zaGVsbChbXG4gICAgJ2FtJywgJ2luc3RydW1lbnQnLFxuICAgICctZScsICdtYWluX2FjdGl2aXR5JyxcbiAgICBwa2dBY3Rpdml0eSxcbiAgICBpbnN0cnVtZW50V2l0aCxcbiAgXSk7XG4gIGlmIChzdGRvdXQuaW5kZXhPZignRXhjZXB0aW9uJykgIT09IC0xKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGV4Y2VwdGlvbiBkdXJpbmcgaW5zdHJ1bWVudGF0aW9uLiBPcmlnaW5hbCBlcnJvciAke3N0ZG91dC5zcGxpdCgnXFxuJylbMF19YCk7XG4gIH1cbn07XG5cbi8qKlxuICogQ29sbGVjdCBBbmRyb2lkIGNvdmVyYWdlIGJ5IGluc3RydW1lbnRpbmcgdGhlIHBhcnRpY3VsYXIgYWN0aXZpdHkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGluc3RydW1lbnRDbGFzcyAtIFRoZSBuYW1lIG9mIHRoZSBpbnN0cnVtZW50YXRpb24gY2xhc3MuXG4gKiBAcGFyYW0ge3N0cmluZ30gd2FpdFBrZyAtIFRoZSBuYW1lIG9mIHRoZSBwYWNrYWdlIHRvIGJlIGluc3RydW1lbnRlZC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB3YWl0QWN0aXZpdHkgLSBUaGUgbmFtZSBvZiB0aGUgbWFpbiBhY3Rpdml0eSBpbiB0aGlzIHBhY2thZ2UuXG4gKlxuICogQHJldHVybiB7cHJvbWlzZX0gVGhlIHByb21pc2UgaXMgc3VjY2Vzc2Z1bGx5IHJlc29sdmVkIGlmIHRoZSBpbnN0cnVtZW50YXRpb24gc3RhcnRzXG4gKiAgICAgICAgICAgICAgICAgICB3aXRob3V0IGVycm9ycy5cbiAqL1xubWV0aG9kcy5hbmRyb2lkQ292ZXJhZ2UgPSBhc3luYyBmdW5jdGlvbiBhbmRyb2lkQ292ZXJhZ2UgKGluc3RydW1lbnRDbGFzcywgd2FpdFBrZywgd2FpdEFjdGl2aXR5KSB7XG4gIGlmICghdGhpcy5pc1ZhbGlkQ2xhc3MoaW5zdHJ1bWVudENsYXNzKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjbGFzcyAke2luc3RydW1lbnRDbGFzc31gKTtcbiAgfVxuICByZXR1cm4gYXdhaXQgbmV3IEIoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGxldCBhcmdzID0gdGhpcy5leGVjdXRhYmxlLmRlZmF1bHRBcmdzXG4gICAgICAuY29uY2F0KFsnc2hlbGwnLCAnYW0nLCAnaW5zdHJ1bWVudCcsICctZScsICdjb3ZlcmFnZScsICd0cnVlJywgJy13J10pXG4gICAgICAuY29uY2F0KFtpbnN0cnVtZW50Q2xhc3NdKTtcbiAgICBsb2cuZGVidWcoYENvbGxlY3RpbmcgY292ZXJhZ2UgZGF0YSB3aXRoOiAke1t0aGlzLmV4ZWN1dGFibGUucGF0aF0uY29uY2F0KGFyZ3MpLmpvaW4oJyAnKX1gKTtcbiAgICB0cnkge1xuICAgICAgLy8gYW0gaW5zdHJ1bWVudCBydW5zIGZvciB0aGUgbGlmZSBvZiB0aGUgYXBwIHByb2Nlc3MuXG4gICAgICB0aGlzLmluc3RydW1lbnRQcm9jID0gbmV3IFN1YlByb2Nlc3ModGhpcy5leGVjdXRhYmxlLnBhdGgsIGFyZ3MpO1xuICAgICAgYXdhaXQgdGhpcy5pbnN0cnVtZW50UHJvYy5zdGFydCgwKTtcbiAgICAgIHRoaXMuaW5zdHJ1bWVudFByb2Mub24oJ291dHB1dCcsIChzdGRvdXQsIHN0ZGVycikgPT4ge1xuICAgICAgICBpZiAoc3RkZXJyKSB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgRmFpbGVkIHRvIHJ1biBpbnN0cnVtZW50YXRpb24uIE9yaWdpbmFsIGVycm9yOiAke3N0ZGVycn1gKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgYXdhaXQgdGhpcy53YWl0Rm9yQWN0aXZpdHkod2FpdFBrZywgd2FpdEFjdGl2aXR5KTtcbiAgICAgIHJlc29sdmUoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZWplY3QobmV3IEVycm9yKGBBbmRyb2lkIGNvdmVyYWdlIGZhaWxlZC4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApKTtcbiAgICB9XG4gIH0pO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIHBhcnRpY3VsYXIgcHJvcGVydHkgb2YgdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSAtIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eS4gVGhpcyBuYW1lIHNob3VsZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmUga25vd24gdG8gX2FkYiBzaGVsbCBnZXRwcm9wXyB0b29sLlxuICpcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHZhbHVlIG9mIHRoZSBnaXZlbiBwcm9wZXJ0eS5cbiAqL1xubWV0aG9kcy5nZXREZXZpY2VQcm9wZXJ0eSA9IGFzeW5jIGZ1bmN0aW9uIGdldERldmljZVByb3BlcnR5IChwcm9wZXJ0eSkge1xuICBsZXQgc3Rkb3V0ID0gYXdhaXQgdGhpcy5zaGVsbChbJ2dldHByb3AnLCBwcm9wZXJ0eV0pO1xuICBsZXQgdmFsID0gc3Rkb3V0LnRyaW0oKTtcbiAgbG9nLmRlYnVnKGBDdXJyZW50IGRldmljZSBwcm9wZXJ0eSAnJHtwcm9wZXJ0eX0nOiAke3ZhbH1gKTtcbiAgcmV0dXJuIHZhbDtcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge29iamVjdH0gc2V0UHJvcE9wdHNcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gcHJpdmlsZWdlZCAtIERvIHdlIHJ1biBzZXRQcm9wIGFzIGEgcHJpdmlsZWdlZCBjb21tYW5kPyBEZWZhdWx0IHRydWUuXG4gKi9cblxuLyoqXG4gKiBTZXQgdGhlIHBhcnRpY3VsYXIgcHJvcGVydHkgb2YgdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSAtIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eS4gVGhpcyBuYW1lIHNob3VsZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmUga25vd24gdG8gX2FkYiBzaGVsbCBzZXRwcm9wXyB0b29sLlxuICogQHBhcmFtIHtzdHJpbmd9IHZhbCAtIFRoZSBuZXcgcHJvcGVydHkgdmFsdWUuXG4gKiBAcGFyYW0ge3NldFByb3BPcHRzfSBvcHRzXG4gKlxuICogQHRocm93cyB7ZXJyb3J9IElmIF9zZXRwcm9wXyB1dGlsaXR5IGZhaWxzIHRvIGNoYW5nZSBwcm9wZXJ0eSB2YWx1ZS5cbiAqL1xubWV0aG9kcy5zZXREZXZpY2VQcm9wZXJ0eSA9IGFzeW5jIGZ1bmN0aW9uIHNldERldmljZVByb3BlcnR5IChwcm9wLCB2YWwsIG9wdHMgPSB7fSkge1xuICBjb25zdCB7cHJpdmlsZWdlZCA9IHRydWV9ID0gb3B0cztcbiAgbG9nLmRlYnVnKGBTZXR0aW5nIGRldmljZSBwcm9wZXJ0eSAnJHtwcm9wfScgdG8gJyR7dmFsfSdgKTtcbiAgYXdhaXQgdGhpcy5zaGVsbChbJ3NldHByb3AnLCBwcm9wLCB2YWxdLCB7XG4gICAgcHJpdmlsZWdlZCxcbiAgfSk7XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge3N0cmluZ30gQ3VycmVudCBzeXN0ZW0gbGFuZ3VhZ2Ugb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICovXG5tZXRob2RzLmdldERldmljZVN5c0xhbmd1YWdlID0gYXN5bmMgZnVuY3Rpb24gZ2V0RGV2aWNlU3lzTGFuZ3VhZ2UgKCkge1xuICByZXR1cm4gYXdhaXQgdGhpcy5nZXREZXZpY2VQcm9wZXJ0eSgncGVyc2lzdC5zeXMubGFuZ3VhZ2UnKTtcbn07XG5cbi8qKlxuICogQHJldHVybiB7c3RyaW5nfSBDdXJyZW50IGNvdW50cnkgbmFtZSBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKi9cbm1ldGhvZHMuZ2V0RGV2aWNlU3lzQ291bnRyeSA9IGFzeW5jIGZ1bmN0aW9uIGdldERldmljZVN5c0NvdW50cnkgKCkge1xuICByZXR1cm4gYXdhaXQgdGhpcy5nZXREZXZpY2VQcm9wZXJ0eSgncGVyc2lzdC5zeXMuY291bnRyeScpO1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEN1cnJlbnQgc3lzdGVtIGxvY2FsZSBuYW1lIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqL1xubWV0aG9kcy5nZXREZXZpY2VTeXNMb2NhbGUgPSBhc3luYyBmdW5jdGlvbiBnZXREZXZpY2VTeXNMb2NhbGUgKCkge1xuICByZXR1cm4gYXdhaXQgdGhpcy5nZXREZXZpY2VQcm9wZXJ0eSgncGVyc2lzdC5zeXMubG9jYWxlJyk7XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge3N0cmluZ30gQ3VycmVudCBwcm9kdWN0IGxhbmd1YWdlIG5hbWUgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICovXG5tZXRob2RzLmdldERldmljZVByb2R1Y3RMYW5ndWFnZSA9IGFzeW5jIGZ1bmN0aW9uIGdldERldmljZVByb2R1Y3RMYW5ndWFnZSAoKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLmdldERldmljZVByb3BlcnR5KCdyby5wcm9kdWN0LmxvY2FsZS5sYW5ndWFnZScpO1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEN1cnJlbnQgcHJvZHVjdCBjb3VudHJ5IG5hbWUgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICovXG5tZXRob2RzLmdldERldmljZVByb2R1Y3RDb3VudHJ5ID0gYXN5bmMgZnVuY3Rpb24gZ2V0RGV2aWNlUHJvZHVjdENvdW50cnkgKCkge1xuICByZXR1cm4gYXdhaXQgdGhpcy5nZXREZXZpY2VQcm9wZXJ0eSgncm8ucHJvZHVjdC5sb2NhbGUucmVnaW9uJyk7XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge3N0cmluZ30gQ3VycmVudCBwcm9kdWN0IGxvY2FsZSBuYW1lIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqL1xubWV0aG9kcy5nZXREZXZpY2VQcm9kdWN0TG9jYWxlID0gYXN5bmMgZnVuY3Rpb24gZ2V0RGV2aWNlUHJvZHVjdExvY2FsZSAoKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLmdldERldmljZVByb3BlcnR5KCdyby5wcm9kdWN0LmxvY2FsZScpO1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBtb2RlbCBuYW1lIG9mIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqL1xubWV0aG9kcy5nZXRNb2RlbCA9IGFzeW5jIGZ1bmN0aW9uIGdldE1vZGVsICgpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0RGV2aWNlUHJvcGVydHkoJ3JvLnByb2R1Y3QubW9kZWwnKTtcbn07XG5cbi8qKlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgbWFudWZhY3R1cmVyIG5hbWUgb2YgdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICovXG5tZXRob2RzLmdldE1hbnVmYWN0dXJlciA9IGFzeW5jIGZ1bmN0aW9uIGdldE1hbnVmYWN0dXJlciAoKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLmdldERldmljZVByb3BlcnR5KCdyby5wcm9kdWN0Lm1hbnVmYWN0dXJlcicpO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgc2NyZWVuIHNpemUuXG4gKlxuICogQHJldHVybiB7c3RyaW5nfSBEZXZpY2Ugc2NyZWVuIHNpemUgYXMgc3RyaW5nIGluIGZvcm1hdCAnV3hIJyBvclxuICogICAgICAgICAgICAgICAgICBfbnVsbF8gaWYgaXQgY2Fubm90IGJlIGRldGVybWluZWQuXG4gKi9cbm1ldGhvZHMuZ2V0U2NyZWVuU2l6ZSA9IGFzeW5jIGZ1bmN0aW9uIGdldFNjcmVlblNpemUgKCkge1xuICBsZXQgc3Rkb3V0ID0gYXdhaXQgdGhpcy5zaGVsbChbJ3dtJywgJ3NpemUnXSk7XG4gIGxldCBzaXplID0gbmV3IFJlZ0V4cCgvUGh5c2ljYWwgc2l6ZTogKFteXFxyP1xcbl0rKSovZykuZXhlYyhzdGRvdXQpO1xuICBpZiAoc2l6ZSAmJiBzaXplLmxlbmd0aCA+PSAyKSB7XG4gICAgcmV0dXJuIHNpemVbMV0udHJpbSgpO1xuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgc2NyZWVuIGRlbnNpdHkgaW4gZHBpXG4gKlxuICogQHJldHVybiB7P251bWJlcn0gRGV2aWNlIHNjcmVlbiBkZW5zaXR5IGFzIGEgbnVtYmVyIG9yIF9udWxsXyBpZiBpdFxuICogICAgICAgICAgICAgICAgICBjYW5ub3QgYmUgZGV0ZXJtaW5lZFxuICovXG5tZXRob2RzLmdldFNjcmVlbkRlbnNpdHkgPSBhc3luYyBmdW5jdGlvbiBnZXRTY3JlZW5EZW5zaXR5ICgpIHtcbiAgbGV0IHN0ZG91dCA9IGF3YWl0IHRoaXMuc2hlbGwoWyd3bScsICdkZW5zaXR5J10pO1xuICBsZXQgZGVuc2l0eSA9IG5ldyBSZWdFeHAoL1BoeXNpY2FsIGRlbnNpdHk6IChbXlxccj9cXG5dKykqL2cpLmV4ZWMoc3Rkb3V0KTtcbiAgaWYgKGRlbnNpdHkgJiYgZGVuc2l0eS5sZW5ndGggPj0gMikge1xuICAgIGxldCBkZW5zaXR5TnVtYmVyID0gcGFyc2VJbnQoZGVuc2l0eVsxXS50cmltKCksIDEwKTtcbiAgICByZXR1cm4gaXNOYU4oZGVuc2l0eU51bWJlcikgPyBudWxsIDogZGVuc2l0eU51bWJlcjtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8qKlxuICogU2V0dXAgSFRUUCBwcm94eSBpbiBkZXZpY2UgZ2xvYmFsIHNldHRpbmdzLlxuICogUmVhZCBodHRwczovL2FuZHJvaWQuZ29vZ2xlc291cmNlLmNvbS9wbGF0Zm9ybS9mcmFtZXdvcmtzL2Jhc2UvKy9hbmRyb2lkLTkuMC4wX3IyMS9jb3JlL2phdmEvYW5kcm9pZC9wcm92aWRlci9TZXR0aW5ncy5qYXZhIGZvciBlYWNoIHByb3BlcnR5XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHByb3h5SG9zdCAtIFRoZSBob3N0IG5hbWUgb2YgdGhlIHByb3h5LlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBwcm94eVBvcnQgLSBUaGUgcG9ydCBudW1iZXIgdG8gYmUgc2V0LlxuICovXG5tZXRob2RzLnNldEh0dHBQcm94eSA9IGFzeW5jIGZ1bmN0aW9uIHNldEh0dHBQcm94eSAocHJveHlIb3N0LCBwcm94eVBvcnQpIHtcbiAgbGV0IHByb3h5ID0gYCR7cHJveHlIb3N0fToke3Byb3h5UG9ydH1gO1xuICBpZiAoXy5pc1VuZGVmaW5lZChwcm94eUhvc3QpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDYWxsIHRvIHNldEh0dHBQcm94eSBtZXRob2Qgd2l0aCB1bmRlZmluZWQgcHJveHlfaG9zdDogJHtwcm94eX1gKTtcbiAgfVxuICBpZiAoXy5pc1VuZGVmaW5lZChwcm94eVBvcnQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDYWxsIHRvIHNldEh0dHBQcm94eSBtZXRob2Qgd2l0aCB1bmRlZmluZWQgcHJveHlfcG9ydCAke3Byb3h5fWApO1xuICB9XG5cbiAgY29uc3QgaHR0cFByb3h5U2V0dGlucyA9IFtcbiAgICBbJ2h0dHBfcHJveHknLCBwcm94eV0sXG4gICAgWydnbG9iYWxfaHR0cF9wcm94eV9ob3N0JywgcHJveHlIb3N0XSxcbiAgICBbJ2dsb2JhbF9odHRwX3Byb3h5X3BvcnQnLCBwcm94eVBvcnRdXG4gIF07XG4gIGZvciAoY29uc3QgW3NldHRpbmdLZXksIHNldHRpbmdWYWx1ZV0gb2YgaHR0cFByb3h5U2V0dGlucykge1xuICAgIGF3YWl0IHRoaXMuc2V0U2V0dGluZygnZ2xvYmFsJywgc2V0dGluZ0tleSwgc2V0dGluZ1ZhbHVlKTtcbiAgfVxufTtcblxuLyoqXG4gKiBEZWxldGUgSFRUUCBwcm94eSBpbiBkZXZpY2UgZ2xvYmFsIHNldHRpbmdzLlxuICogUmVib290aW5nIHRoZSB0ZXN0IGRldmljZSBpcyBuZWNlc3NhcnkgdG8gYXBwbHkgdGhlIGNoYW5nZS5cbiAqL1xubWV0aG9kcy5kZWxldGVIdHRwUHJveHkgPSBhc3luYyBmdW5jdGlvbiBkZWxldGVIdHRwUHJveHkgKCkge1xuICBjb25zdCBodHRwUHJveHlTZXR0aW5zID0gW1xuICAgICdodHRwX3Byb3h5JyxcbiAgICAnZ2xvYmFsX2h0dHBfcHJveHlfaG9zdCcsXG4gICAgJ2dsb2JhbF9odHRwX3Byb3h5X3BvcnQnLFxuICAgICdnbG9iYWxfaHR0cF9wcm94eV9leGNsdXNpb25fbGlzdCcgLy8gYGdsb2JhbF9odHRwX3Byb3h5X2V4Y2x1c2lvbl9saXN0PWAgd2FzIGdlbmVyYXRlZCBieSBgc2V0dGluZ3MgZ2xvYmFsIGh0dG9fcHJveHkgeHh4eGBcbiAgXTtcbiAgZm9yIChjb25zdCBzZXR0aW5nIG9mIGh0dHBQcm94eVNldHRpbnMpIHtcbiAgICBhd2FpdCB0aGlzLnNoZWxsKFsnc2V0dGluZ3MnLCAnZGVsZXRlJywgJ2dsb2JhbCcsIHNldHRpbmddKTtcbiAgfVxufTtcblxuLyoqXG4gKiBTZXQgZGV2aWNlIHByb3BlcnR5LlxuICogW2FuZHJvaWQucHJvdmlkZXIuU2V0dGluZ3Nde0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3JlZmVyZW5jZS9hbmRyb2lkL3Byb3ZpZGVyL1NldHRpbmdzLmh0bWx9XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVzcGFjZSAtIG9uZSBvZiB7c3lzdGVtLCBzZWN1cmUsIGdsb2JhbH0sIGNhc2UtaW5zZW5zaXRpdmUuXG4gKiBAcGFyYW0ge3N0cmluZ30gc2V0dGluZyAtIHByb3BlcnR5IG5hbWUuXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IHZhbHVlIC0gcHJvcGVydHkgdmFsdWUuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IGNvbW1hbmQgb3V0cHV0LlxuICovXG5tZXRob2RzLnNldFNldHRpbmcgPSBhc3luYyBmdW5jdGlvbiBzZXRTZXR0aW5nIChuYW1lc3BhY2UsIHNldHRpbmcsIHZhbHVlKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLnNoZWxsKFsnc2V0dGluZ3MnLCAncHV0JywgbmFtZXNwYWNlLCBzZXR0aW5nLCB2YWx1ZV0pO1xufTtcblxuLyoqXG4gKiBHZXQgZGV2aWNlIHByb3BlcnR5LlxuICogW2FuZHJvaWQucHJvdmlkZXIuU2V0dGluZ3Nde0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3JlZmVyZW5jZS9hbmRyb2lkL3Byb3ZpZGVyL1NldHRpbmdzLmh0bWx9XG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWVzcGFjZSAtIG9uZSBvZiB7c3lzdGVtLCBzZWN1cmUsIGdsb2JhbH0sIGNhc2UtaW5zZW5zaXRpdmUuXG4gKiBAcGFyYW0ge3N0cmluZ30gc2V0dGluZyAtIHByb3BlcnR5IG5hbWUuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IHByb3BlcnR5IHZhbHVlLlxuICovXG5tZXRob2RzLmdldFNldHRpbmcgPSBhc3luYyBmdW5jdGlvbiBnZXRTZXR0aW5nIChuYW1lc3BhY2UsIHNldHRpbmcpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuc2hlbGwoWydzZXR0aW5ncycsICdnZXQnLCBuYW1lc3BhY2UsIHNldHRpbmddKTtcbn07XG5cbi8qKlxuICogUmV0cmlldmUgdGhlIGBhZGIgYnVncmVwb3J0YCBjb21tYW5kIG91dHB1dC4gVGhpc1xuICogb3BlcmF0aW9uIG1heSB0YWtlIHVwIHRvIHNldmVyYWwgbWludXRlcy5cbiAqXG4gKiBAcGFyYW0gez9udW1iZXJ9IHRpbWVvdXQgWzEyMDAwMF0gLSBDb21tYW5kIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBDb21tYW5kIHN0ZG91dFxuICovXG5tZXRob2RzLmJ1Z3JlcG9ydCA9IGFzeW5jIGZ1bmN0aW9uIGJ1Z3JlcG9ydCAodGltZW91dCA9IDEyMDAwMCkge1xuICByZXR1cm4gYXdhaXQgdGhpcy5hZGJFeGVjKFsnYnVncmVwb3J0J10sIHt0aW1lb3V0fSk7XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IFNjcmVlbnJlY29yZE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7P3N0cmluZ30gdmlkZW9TaXplIC0gVGhlIGZvcm1hdCBpcyB3aWR0aHhoZWlnaHQuXG4gKiAgICAgICAgICAgICAgICAgIFRoZSBkZWZhdWx0IHZhbHVlIGlzIHRoZSBkZXZpY2UncyBuYXRpdmUgZGlzcGxheSByZXNvbHV0aW9uIChpZiBzdXBwb3J0ZWQpLFxuICogICAgICAgICAgICAgICAgICAxMjgweDcyMCBpZiBub3QuIEZvciBiZXN0IHJlc3VsdHMsXG4gKiAgICAgICAgICAgICAgICAgIHVzZSBhIHNpemUgc3VwcG9ydGVkIGJ5IHlvdXIgZGV2aWNlJ3MgQWR2YW5jZWQgVmlkZW8gQ29kaW5nIChBVkMpIGVuY29kZXIuXG4gKiAgICAgICAgICAgICAgICAgIEZvciBleGFtcGxlLCBcIjEyODB4NzIwXCJcbiAqIEBwcm9wZXJ0eSB7P2Jvb2xlYW59IGJ1Z1JlcG9ydCAtIFNldCBpdCB0byBgdHJ1ZWAgaW4gb3JkZXIgdG8gZGlzcGxheSBhZGRpdGlvbmFsIGluZm9ybWF0aW9uIG9uIHRoZSB2aWRlbyBvdmVybGF5LFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjaCBhcyBhIHRpbWVzdGFtcCwgdGhhdCBpcyBoZWxwZnVsIGluIHZpZGVvcyBjYXB0dXJlZCB0byBpbGx1c3RyYXRlIGJ1Z3MuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaGlzIG9wdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBzaW5jZSBBUEkgbGV2ZWwgMjcgKEFuZHJvaWQgUCkuXG4gKiBAcHJvcGVydHkgez9zdHJpbmd8bnVtYmVyfSB0aW1lTGltaXQgLSBUaGUgbWF4aW11bSByZWNvcmRpbmcgdGltZSwgaW4gc2Vjb25kcy5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoZSBkZWZhdWx0IChhbmQgbWF4aW11bSkgdmFsdWUgaXMgMTgwICgzIG1pbnV0ZXMpLlxuICogQHByb3BlcnR5IHs/c3RyaW5nfG51bWJlcn0gYml0UmF0ZSAtIFRoZSB2aWRlbyBiaXQgcmF0ZSBmb3IgdGhlIHZpZGVvLCBpbiBtZWdhYml0cyBwZXIgc2Vjb25kLlxuICogICAgICAgICAgICAgICAgVGhlIGRlZmF1bHQgdmFsdWUgaXMgNC4gWW91IGNhbiBpbmNyZWFzZSB0aGUgYml0IHJhdGUgdG8gaW1wcm92ZSB2aWRlbyBxdWFsaXR5LFxuICogICAgICAgICAgICAgICAgYnV0IGRvaW5nIHNvIHJlc3VsdHMgaW4gbGFyZ2VyIG1vdmllIGZpbGVzLlxuICovXG5cbi8qKlxuICogSW5pdGlhdGUgc2NyZWVucmVjb3JkIHV0aWxpdHkgb24gdGhlIGRldmljZVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBkZXN0aW5hdGlvbiAtIEZ1bGwgcGF0aCB0byB0aGUgd3JpdGFibGUgbWVkaWEgZmlsZSBkZXN0aW5hdGlvblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb24gdGhlIGRldmljZSBmaWxlIHN5c3RlbS5cbiAqIEBwYXJhbSB7P1NjcmVlbnJlY29yZE9wdGlvbnN9IG9wdGlvbnMgW3t9XVxuICogQHJldHVybnMge1N1YlByb2Nlc3N9IHNjcmVlbnJlY29yZCBwcm9jZXNzLCB3aGljaCBjYW4gYmUgdGhlbiBjb250cm9sbGVkIGJ5IHRoZSBjbGllbnQgY29kZVxuICovXG5tZXRob2RzLnNjcmVlbnJlY29yZCA9IGZ1bmN0aW9uIHNjcmVlbnJlY29yZCAoZGVzdGluYXRpb24sIG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCBjbWQgPSBbJ3NjcmVlbnJlY29yZCddO1xuICBjb25zdCB7XG4gICAgdmlkZW9TaXplLFxuICAgIGJpdFJhdGUsXG4gICAgdGltZUxpbWl0LFxuICAgIGJ1Z1JlcG9ydCxcbiAgfSA9IG9wdGlvbnM7XG4gIGlmICh1dGlsLmhhc1ZhbHVlKHZpZGVvU2l6ZSkpIHtcbiAgICBjbWQucHVzaCgnLS1zaXplJywgdmlkZW9TaXplKTtcbiAgfVxuICBpZiAodXRpbC5oYXNWYWx1ZSh0aW1lTGltaXQpKSB7XG4gICAgY21kLnB1c2goJy0tdGltZS1saW1pdCcsIHRpbWVMaW1pdCk7XG4gIH1cbiAgaWYgKHV0aWwuaGFzVmFsdWUoYml0UmF0ZSkpIHtcbiAgICBjbWQucHVzaCgnLS1iaXQtcmF0ZScsIGJpdFJhdGUpO1xuICB9XG4gIGlmIChidWdSZXBvcnQpIHtcbiAgICBjbWQucHVzaCgnLS1idWdyZXBvcnQnKTtcbiAgfVxuICBjbWQucHVzaChkZXN0aW5hdGlvbik7XG5cbiAgY29uc3QgZnVsbENtZCA9IFtcbiAgICAuLi50aGlzLmV4ZWN1dGFibGUuZGVmYXVsdEFyZ3MsXG4gICAgJ3NoZWxsJyxcbiAgICAuLi5jbWRcbiAgXTtcbiAgbG9nLmRlYnVnKGBCdWlsZGluZyBzY3JlZW5yZWNvcmQgcHJvY2VzcyB3aXRoIHRoZSBjb21tYW5kIGxpbmU6IGFkYiAke3F1b3RlKGZ1bGxDbWQpfWApO1xuICByZXR1cm4gbmV3IFN1YlByb2Nlc3ModGhpcy5leGVjdXRhYmxlLnBhdGgsIGZ1bGxDbWQpO1xufTtcblxuLyoqXG4gKiBQZXJmb3JtcyB0aGUgZ2l2ZW4gZWRpdG9yIGFjdGlvbiBvbiB0aGUgZm9jdXNlZCBpbnB1dCBmaWVsZC5cbiAqIFRoaXMgbWV0aG9kIHJlcXVpcmVzIEFwcGl1bSBTZXR0aW5ncyBoZWxwZXIgdG8gYmUgaW5zdGFsbGVkIG9uIHRoZSBkZXZpY2UuXG4gKiBObyBleGNlcHRpb24gaXMgdGhyb3duIGlmIHRoZXJlIHdhcyBhIGZhaWx1cmUgd2hpbGUgcGVyZm9ybWluZyB0aGUgYWN0aW9uLlxuICogWW91IG11c3QgaW52ZXN0aWdhdGUgdGhlIGxvZ2NhdCBvdXRwdXQgaWYgc29tZXRoaW5nIGRpZCBub3Qgd29yayBhcyBleHBlY3RlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGFjdGlvbiAtIEVpdGhlciBhY3Rpb24gY29kZSBvciBuYW1lLiBUaGUgZm9sbG93aW5nIGFjdGlvblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lcyBhcmUgc3VwcG9ydGVkOiBgbm9ybWFsLCB1bnNwZWNpZmllZCwgbm9uZSxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ28sIHNlYXJjaCwgc2VuZCwgbmV4dCwgZG9uZSwgcHJldmlvdXNgXG4gKi9cbm1ldGhvZHMucGVyZm9ybUVkaXRvckFjdGlvbiA9IGFzeW5jIGZ1bmN0aW9uIHBlcmZvcm1FZGl0b3JBY3Rpb24gKGFjdGlvbikge1xuICBsb2cuZGVidWcoYFBlcmZvcm1pbmcgZWRpdG9yIGFjdGlvbjogJHthY3Rpb259YCk7XG4gIGNvbnN0IGRlZmF1bHRJTUUgPSBhd2FpdCB0aGlzLmRlZmF1bHRJTUUoKTtcbiAgYXdhaXQgdGhpcy5lbmFibGVJTUUoQVBQSVVNX0lNRSk7XG4gIHRyeSB7XG4gICAgYXdhaXQgdGhpcy5zZXRJTUUoQVBQSVVNX0lNRSk7XG4gICAgYXdhaXQgdGhpcy5zaGVsbChbJ2lucHV0JywgJ3RleHQnLCBgLyR7YWN0aW9ufS9gXSk7XG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgdGhpcy5zZXRJTUUoZGVmYXVsdElNRSk7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IG1ldGhvZHM7XG4iXSwiZmlsZSI6ImxpYi90b29scy9hZGItY29tbWFuZHMuanMiLCJzb3VyY2VSb290IjoiLi4vLi4vLi4ifQ==
