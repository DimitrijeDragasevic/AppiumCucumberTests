"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.installApp = installApp;
exports.removeApp = removeApp;
exports.launch = launch;
exports.spawn = spawn;
exports.spawnSubProcess = spawnSubProcess;
exports.openUrl = openUrl;
exports.terminate = terminate;
exports.shutdown = shutdown;
exports.createDevice = createDevice;
exports.getAppContainer = getAppContainer;
exports.getScreenshot = getScreenshot;
exports.deleteDevice = deleteDevice;
exports.eraseDevice = eraseDevice;
exports.getDevices = getDevices;
exports.getRuntimeForPlatformVersion = getRuntimeForPlatformVersion;
exports.bootDevice = bootDevice;
exports.setPasteboard = setPasteboard;
exports.getPasteboard = getPasteboard;
exports.addMedia = addMedia;
exports.appInfo = appInfo;
exports.getDeviceTypes = getDeviceTypes;
exports.startBootMonitor = startBootMonitor;

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));

require("source-map-support/register");

var _teen_process = require("teen_process");

var _asyncbox = require("asyncbox");

var _appiumSupport = require("appium-support");

var _lodash = _interopRequireDefault(require("lodash"));

const log = _appiumSupport.logger.getLogger('simctl');

const IOS_PLATFORM = 'iOS';

async function simCommand(command, timeout, args = [], env = {}, executingFunction = _teen_process.exec, logErrors = true) {
  args = ['simctl', command, ...args];
  env = _lodash.default.defaults(_lodash.default.mapKeys(env, (value, key) => {
    return `SIMCTL_CHILD_${key}`;
  }), process.env);

  try {
    return await executingFunction('xcrun', args, {
      timeout,
      env
    });
  } catch (e) {
    if (!logErrors) {
      throw e;
    } else if (e.stderr) {
      log.errorAndThrow(`simctl error running '${command}': ${e.stderr.trim()}`);
    } else {
      log.errorAndThrow(e);
    }
  }
}

async function simExec(command, timeout, args = [], env = {}, logErrors = true) {
  return await simCommand(command, timeout, args, env, async (c, a, ob) => {
    return await (0, _teen_process.exec)(c, a, ob);
  }, logErrors);
}

async function simSubProcess(command, timeout, args = [], env = {}) {
  return await simCommand(command, timeout, args, env, (c, a, ob) => {
    return new _teen_process.SubProcess(c, a, ob);
  });
}

async function installApp(udid, appPath) {
  await simExec('install', 0, [udid, appPath]);
}

async function bootDevice(udid) {
  try {
    await simExec('boot', 0, [udid]);
  } catch (err) {
    if ((err.message || '').indexOf('Unable to boot device in current state: Booted') === -1) {
      throw err;
    }

    log.debug(`Simulator already in 'Booted' state. Continuing`);
  }
}

async function removeApp(udid, bundleId) {
  await simExec('uninstall', 0, [udid, bundleId]);
}

async function launch(udid, bundleId, tries = 5) {
  await (0, _asyncbox.retryInterval)(tries, 1000, async () => {
    await simExec('launch', 0, [udid, bundleId]);
  });
}

async function spawn(udid, args, env = {}) {
  return await simExec('spawn', 0, [udid, ...(_lodash.default.isArray(args) ? args : [args])], env);
}

async function spawnSubProcess(udid, args, env = {}) {
  return await simSubProcess('spawn', 0, [udid, ...(_lodash.default.isArray(args) ? args : [args])], env);
}

async function openUrl(udid, url) {
  return await simExec('openurl', 0, [udid, url]);
}

async function appInfo(udid, bundleId) {
  const {
    stdout
  } = await simExec('appinfo', 0, [udid, bundleId]);
  return (stdout || '').trim();
}

async function addMedia(udid, path) {
  return await simExec('addmedia', 0, [udid, path]);
}

async function terminate(udid, bundleId) {
  await simExec('terminate', 0, [udid, bundleId]);
}

async function getAppContainer(udid, bundleId, logErrors = true, containerType = null) {
  const args = [udid, bundleId];

  if (containerType) {
    args.push(containerType);
  }

  const {
    stdout
  } = await simExec('get_app_container', 0, args, {}, logErrors);
  return (stdout || '').trim();
}

async function shutdown(udid) {
  try {
    await simExec('shutdown', 0, [udid]);
  } catch (err) {
    if (!(err + '').includes('current state: Shutdown')) {
      throw err;
    }

    log.debug(`Simulator already in 'Shutdown' state. Continuing`);
  }
}

async function createDevice(name, deviceTypeId, runtimeId, timeout = 10000) {
  let udid;

  try {
    runtimeId = await getRuntimeForPlatformVersion(runtimeId);
  } catch (err) {
    log.warn(`Unable to find runtime for iOS '${runtimeId}'. Continuing`);
  }

  log.debug(`Creating simulator with name '${name}', device type id '${deviceTypeId}' and runtime id '${runtimeId}'`);

  try {
    let out = await simExec('create', 0, [name, deviceTypeId, runtimeId]);
    udid = out.stdout.trim();
  } catch (err) {
    let reason = err.message;

    if (err.stderr) {
      reason = err.stderr.trim();
    }

    log.errorAndThrow(`Could not create simulator with name '${name}', device ` + `type id '${deviceTypeId}' and runtime id '${runtimeId}'. Reason: '${reason}'`);
  }

  let retries = parseInt(timeout / 1000, 10);
  await (0, _asyncbox.retryInterval)(retries, 1000, async () => {
    let devices = await getDevices();

    for (let deviceArr of _lodash.default.values(devices)) {
      for (let device of deviceArr) {
        if (device.udid === udid) {
          if (device.state === 'Creating') {
            throw new Error('Device still being created');
          } else {
            return;
          }
        }
      }
    }
  });
  return udid;
}

async function deleteDevice(udid) {
  await simExec('delete', 0, [udid]);
}

async function eraseDevice(udid, timeout = 1000) {
  let loopFn = async () => {
    await simExec('erase', 10000, [udid]);
  };

  let retries = parseInt(timeout / 200, 10);
  await (0, _asyncbox.retryInterval)(retries, 200, loopFn);
}

async function getDevicesByParsing(platform = IOS_PLATFORM) {
  const {
    stdout
  } = await simExec('list', 0, ['devices']);
  const deviceSectionRe = new RegExp(`\\-\\-\\s+${_lodash.default.escapeRegExp(platform)}\\s+(\\S+)\\s+\\-\\-(\\n\\s{4}.+)*`, 'mgi');
  const matches = [];
  let match;

  while (match = deviceSectionRe.exec(stdout)) {
    matches.push(match);
  }

  if (_lodash.default.isEmpty(matches)) {
    throw new Error('Could not find device section');
  }

  const lineRe = /([^\s].+) \((\w+-.+\w+)\) \((\w+\s?\w+)\)/;
  const devices = {};

  for (match of matches) {
    const sdk = match[1];
    devices[sdk] = [];

    for (const line of match[0].split('\n').slice(1)) {
      const lineMatch = lineRe.exec(line);

      if (!lineMatch) {
        throw new Error(`Could not match line: ${line}`);
      }

      devices[sdk].push({
        name: lineMatch[1],
        udid: lineMatch[2],
        state: lineMatch[3],
        sdk
      });
    }
  }

  return devices;
}

async function getDevices(forSdk = null, platform = IOS_PLATFORM) {
  let devices = {};

  try {
    const {
      stdout
    } = await simExec('list', 0, ['devices', '-j']);
    const versionMatchRe = new RegExp(`^${_lodash.default.escapeRegExp(platform)}\\s+(\\S+)`, 'i');

    for (const [sdkName, entries] of _lodash.default.toPairs(JSON.parse(stdout).devices)) {
      const versionMatch = versionMatchRe.exec(sdkName);

      if (!versionMatch) {
        continue;
      }

      devices[versionMatch[1]] = entries.map(el => {
        delete el.availability;
        return (0, _objectSpread2.default)({}, el, {
          sdk: versionMatch[1]
        });
      });
    }
  } catch (err) {
    log.debug(`Unable to get JSON device list: ${err.stack}`);
    log.debug('Falling back to manual parsing');
    devices = await getDevicesByParsing(platform);
  }

  if (!forSdk) {
    return devices;
  }

  if (devices[forSdk]) {
    return devices[forSdk];
  }

  let errMsg = `'${forSdk}' does not exist in the list of simctl SDKs.`;

  const availableSDKs = _lodash.default.keys(devices);

  errMsg += availableSDKs.length ? ` Only the following Simulator SDK versions are available on your system: ${availableSDKs.join(', ')}` : ` No Simulator SDK versions are available on your system. Please install some via Xcode preferences.`;
  throw new Error(errMsg);
}

async function getRuntimeForPlatformVersion(platformVersion, platform = 'iOS') {
  try {
    const {
      stdout
    } = await simExec('list', 0, ['runtimes']);
    const runtimeRe = new RegExp(`${_lodash.default.escapeRegExp(platform)}\\s+(\\d+\\.\\d+)\\s+\\((\\d+\\.\\d+\\.*\\d*)`, 'i');

    for (const line of stdout.split('\n')) {
      const match = runtimeRe.exec(line);

      if (match && match[1] === platformVersion) {
        return match[2];
      }
    }
  } catch (ign) {}

  return platformVersion;
}

async function getScreenshot(udid) {
  let pathToScreenshotPng = await _appiumSupport.tempDir.path({
    prefix: `screenshot-${udid}`,
    suffix: '.png'
  });
  await simExec('io', 0, [udid, 'screenshot', pathToScreenshotPng]);
  let screenshotImg = await _appiumSupport.fs.readFile(pathToScreenshotPng);
  await _appiumSupport.fs.rimraf(pathToScreenshotPng);
  return screenshotImg.toString('base64');
}

async function setPasteboard(udid, content, encoding = 'utf-8') {
  const pbCopySubprocess = new _teen_process.SubProcess('xcrun', ['simctl', 'pbcopy', udid]);
  await pbCopySubprocess.start(0);
  const exitCodeVerifier = pbCopySubprocess.join();
  const stdin = pbCopySubprocess.proc.stdin;
  stdin.setEncoding(encoding);
  stdin.write(content);
  stdin.end();
  await exitCodeVerifier;
}

async function getPasteboard(udid, encoding = 'utf-8') {
  const args = ['simctl', 'pbpaste', udid];

  try {
    const {
      stdout
    } = await (0, _teen_process.exec)('xcrun', args, {
      timeout: 0,
      encoding
    });
    return stdout;
  } catch (e) {
    if (e.stderr) {
      log.errorAndThrow(`Error running 'xcrun ${args.join(' ')}': ${e.stderr.trim()}`);
    } else {
      log.errorAndThrow(e);
    }
  }
}

async function getDeviceTypes() {
  try {
    const {
      stdout
    } = await simExec('list', 0, ['devicetypes', '-j']);
    const deviceTypes = JSON.parse(stdout.trim());
    return deviceTypes.devicetypes.map(type => type.name);
  } catch (err) {
    let msg = `Unable to get list of device types: ${err.message}`;

    if (err.stderr) {
      msg = `${msg}. Stderr: ${err.stderr}`;
    }

    throw new Error(msg);
  }
}

async function startBootMonitor(udid, opts = {}) {
  const {
    timeout = 240000,
    onWaitingDataMigration,
    onWaitingSystemApp,
    onFinished,
    onError
  } = opts;
  let status = '';
  let isBootingFinished = false;
  let error = null;
  let timeoutHandler = null;
  const bootMonitor = await simSubProcess('bootstatus', 0, [udid]);
  bootMonitor.on('output', (stdout, stderr) => {
    status += stdout || stderr;

    if (stdout) {
      if (stdout.includes('Waiting on Data Migration') && onWaitingDataMigration) {
        onWaitingDataMigration();
      } else if (stdout.includes('Waiting on System App') && onWaitingSystemApp) {
        onWaitingSystemApp();
      }
    }
  });
  bootMonitor.on('exit', (code, signal) => {
    if (timeoutHandler) {
      clearTimeout(timeoutHandler);
    }

    if (code === 0) {
      if (onFinished) {
        onFinished();
      }

      isBootingFinished = true;
    } else {
      status = status || signal;
      error = new Error(status);

      if (onError) {
        onError(error);
      }
    }
  });
  await bootMonitor.start(0);

  const stopMonitor = async () => {
    if (bootMonitor.isRunning) {
      try {
        await bootMonitor.stop();
      } catch (e) {
        log.warn(e.message);
      }
    }
  };

  const timeStarted = process.hrtime();

  if (onFinished) {
    timeoutHandler = setTimeout(stopMonitor, timeout);
  } else {
    try {
      await (0, _asyncbox.waitForCondition)(() => {
        if (error) {
          throw error;
        }

        return isBootingFinished;
      }, {
        waitMs: timeout,
        intervalMs: 500
      });
    } catch (err) {
      await stopMonitor();
      throw new Error(`The simulator ${udid} has failed to finish booting after ${process.hrtime(timeStarted)[0]}s. ` + `Original status: ${status}`);
    }
  }

  return bootMonitor;
}require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9zaW1jdGwuanMiXSwibmFtZXMiOlsibG9nIiwibG9nZ2VyIiwiZ2V0TG9nZ2VyIiwiSU9TX1BMQVRGT1JNIiwic2ltQ29tbWFuZCIsImNvbW1hbmQiLCJ0aW1lb3V0IiwiYXJncyIsImVudiIsImV4ZWN1dGluZ0Z1bmN0aW9uIiwiZXhlYyIsImxvZ0Vycm9ycyIsIl8iLCJkZWZhdWx0cyIsIm1hcEtleXMiLCJ2YWx1ZSIsImtleSIsInByb2Nlc3MiLCJlIiwic3RkZXJyIiwiZXJyb3JBbmRUaHJvdyIsInRyaW0iLCJzaW1FeGVjIiwiYyIsImEiLCJvYiIsInNpbVN1YlByb2Nlc3MiLCJTdWJQcm9jZXNzIiwiaW5zdGFsbEFwcCIsInVkaWQiLCJhcHBQYXRoIiwiYm9vdERldmljZSIsImVyciIsIm1lc3NhZ2UiLCJpbmRleE9mIiwiZGVidWciLCJyZW1vdmVBcHAiLCJidW5kbGVJZCIsImxhdW5jaCIsInRyaWVzIiwic3Bhd24iLCJpc0FycmF5Iiwic3Bhd25TdWJQcm9jZXNzIiwib3BlblVybCIsInVybCIsImFwcEluZm8iLCJzdGRvdXQiLCJhZGRNZWRpYSIsInBhdGgiLCJ0ZXJtaW5hdGUiLCJnZXRBcHBDb250YWluZXIiLCJjb250YWluZXJUeXBlIiwicHVzaCIsInNodXRkb3duIiwiaW5jbHVkZXMiLCJjcmVhdGVEZXZpY2UiLCJuYW1lIiwiZGV2aWNlVHlwZUlkIiwicnVudGltZUlkIiwiZ2V0UnVudGltZUZvclBsYXRmb3JtVmVyc2lvbiIsIndhcm4iLCJvdXQiLCJyZWFzb24iLCJyZXRyaWVzIiwicGFyc2VJbnQiLCJkZXZpY2VzIiwiZ2V0RGV2aWNlcyIsImRldmljZUFyciIsInZhbHVlcyIsImRldmljZSIsInN0YXRlIiwiRXJyb3IiLCJkZWxldGVEZXZpY2UiLCJlcmFzZURldmljZSIsImxvb3BGbiIsImdldERldmljZXNCeVBhcnNpbmciLCJwbGF0Zm9ybSIsImRldmljZVNlY3Rpb25SZSIsIlJlZ0V4cCIsImVzY2FwZVJlZ0V4cCIsIm1hdGNoZXMiLCJtYXRjaCIsImlzRW1wdHkiLCJsaW5lUmUiLCJzZGsiLCJsaW5lIiwic3BsaXQiLCJzbGljZSIsImxpbmVNYXRjaCIsImZvclNkayIsInZlcnNpb25NYXRjaFJlIiwic2RrTmFtZSIsImVudHJpZXMiLCJ0b1BhaXJzIiwiSlNPTiIsInBhcnNlIiwidmVyc2lvbk1hdGNoIiwibWFwIiwiZWwiLCJhdmFpbGFiaWxpdHkiLCJzdGFjayIsImVyck1zZyIsImF2YWlsYWJsZVNES3MiLCJrZXlzIiwibGVuZ3RoIiwiam9pbiIsInBsYXRmb3JtVmVyc2lvbiIsInJ1bnRpbWVSZSIsImlnbiIsImdldFNjcmVlbnNob3QiLCJwYXRoVG9TY3JlZW5zaG90UG5nIiwidGVtcERpciIsInByZWZpeCIsInN1ZmZpeCIsInNjcmVlbnNob3RJbWciLCJmcyIsInJlYWRGaWxlIiwicmltcmFmIiwidG9TdHJpbmciLCJzZXRQYXN0ZWJvYXJkIiwiY29udGVudCIsImVuY29kaW5nIiwicGJDb3B5U3VicHJvY2VzcyIsInN0YXJ0IiwiZXhpdENvZGVWZXJpZmllciIsInN0ZGluIiwicHJvYyIsInNldEVuY29kaW5nIiwid3JpdGUiLCJlbmQiLCJnZXRQYXN0ZWJvYXJkIiwiZ2V0RGV2aWNlVHlwZXMiLCJkZXZpY2VUeXBlcyIsImRldmljZXR5cGVzIiwidHlwZSIsIm1zZyIsInN0YXJ0Qm9vdE1vbml0b3IiLCJvcHRzIiwib25XYWl0aW5nRGF0YU1pZ3JhdGlvbiIsIm9uV2FpdGluZ1N5c3RlbUFwcCIsIm9uRmluaXNoZWQiLCJvbkVycm9yIiwic3RhdHVzIiwiaXNCb290aW5nRmluaXNoZWQiLCJlcnJvciIsInRpbWVvdXRIYW5kbGVyIiwiYm9vdE1vbml0b3IiLCJvbiIsImNvZGUiLCJzaWduYWwiLCJjbGVhclRpbWVvdXQiLCJzdG9wTW9uaXRvciIsImlzUnVubmluZyIsInN0b3AiLCJ0aW1lU3RhcnRlZCIsImhydGltZSIsInNldFRpbWVvdXQiLCJ3YWl0TXMiLCJpbnRlcnZhbE1zIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUEsTUFBTUEsR0FBRyxHQUFHQyxzQkFBT0MsU0FBUCxDQUFpQixRQUFqQixDQUFaOztBQUVBLE1BQU1DLFlBQVksR0FBRyxLQUFyQjs7QUF1QkEsZUFBZUMsVUFBZixDQUEyQkMsT0FBM0IsRUFBb0NDLE9BQXBDLEVBQTZDQyxJQUFJLEdBQUcsRUFBcEQsRUFBd0RDLEdBQUcsR0FBRyxFQUE5RCxFQUFrRUMsaUJBQWlCLEdBQUdDLGtCQUF0RixFQUE0RkMsU0FBUyxHQUFHLElBQXhHLEVBQThHO0FBRTVHSixFQUFBQSxJQUFJLEdBQUcsQ0FBQyxRQUFELEVBQVdGLE9BQVgsRUFBb0IsR0FBR0UsSUFBdkIsQ0FBUDtBQUdBQyxFQUFBQSxHQUFHLEdBQUdJLGdCQUFFQyxRQUFGLENBQVdELGdCQUFFRSxPQUFGLENBQVVOLEdBQVYsRUFBZSxDQUFDTyxLQUFELEVBQVFDLEdBQVIsS0FBZ0I7QUFDOUMsV0FBUSxnQkFBZUEsR0FBSSxFQUEzQjtBQUNELEdBRmdCLENBQVgsRUFFRkMsT0FBTyxDQUFDVCxHQUZOLENBQU47O0FBSUEsTUFBSTtBQUNGLFdBQU8sTUFBTUMsaUJBQWlCLENBQUMsT0FBRCxFQUFVRixJQUFWLEVBQWdCO0FBQUNELE1BQUFBLE9BQUQ7QUFBVUUsTUFBQUE7QUFBVixLQUFoQixDQUE5QjtBQUNELEdBRkQsQ0FFRSxPQUFPVSxDQUFQLEVBQVU7QUFDVixRQUFJLENBQUNQLFNBQUwsRUFBZ0I7QUFHZCxZQUFNTyxDQUFOO0FBQ0QsS0FKRCxNQUlPLElBQUlBLENBQUMsQ0FBQ0MsTUFBTixFQUFjO0FBQ25CbkIsTUFBQUEsR0FBRyxDQUFDb0IsYUFBSixDQUFtQix5QkFBd0JmLE9BQVEsTUFBS2EsQ0FBQyxDQUFDQyxNQUFGLENBQVNFLElBQVQsRUFBZ0IsRUFBeEU7QUFDRCxLQUZNLE1BRUE7QUFDTHJCLE1BQUFBLEdBQUcsQ0FBQ29CLGFBQUosQ0FBa0JGLENBQWxCO0FBQ0Q7QUFDRjtBQUNGOztBQXNCRCxlQUFlSSxPQUFmLENBQXdCakIsT0FBeEIsRUFBaUNDLE9BQWpDLEVBQTBDQyxJQUFJLEdBQUcsRUFBakQsRUFBcURDLEdBQUcsR0FBRyxFQUEzRCxFQUErREcsU0FBUyxHQUFHLElBQTNFLEVBQWlGO0FBQy9FLFNBQU8sTUFBTVAsVUFBVSxDQUFDQyxPQUFELEVBQVVDLE9BQVYsRUFBbUJDLElBQW5CLEVBQXlCQyxHQUF6QixFQUE4QixPQUFPZSxDQUFQLEVBQVVDLENBQVYsRUFBYUMsRUFBYixLQUFvQjtBQUN2RSxXQUFPLE1BQU0sd0JBQUtGLENBQUwsRUFBUUMsQ0FBUixFQUFXQyxFQUFYLENBQWI7QUFDRCxHQUZzQixFQUVwQmQsU0FGb0IsQ0FBdkI7QUFHRDs7QUFhRCxlQUFlZSxhQUFmLENBQThCckIsT0FBOUIsRUFBdUNDLE9BQXZDLEVBQWdEQyxJQUFJLEdBQUcsRUFBdkQsRUFBMkRDLEdBQUcsR0FBRyxFQUFqRSxFQUFxRTtBQUNuRSxTQUFPLE1BQU1KLFVBQVUsQ0FBQ0MsT0FBRCxFQUFVQyxPQUFWLEVBQW1CQyxJQUFuQixFQUF5QkMsR0FBekIsRUFBOEIsQ0FBQ2UsQ0FBRCxFQUFJQyxDQUFKLEVBQU9DLEVBQVAsS0FBYztBQUNqRSxXQUFPLElBQUlFLHdCQUFKLENBQWVKLENBQWYsRUFBa0JDLENBQWxCLEVBQXFCQyxFQUFyQixDQUFQO0FBQ0QsR0FGc0IsQ0FBdkI7QUFHRDs7QUFZRCxlQUFlRyxVQUFmLENBQTJCQyxJQUEzQixFQUFpQ0MsT0FBakMsRUFBMEM7QUFDeEMsUUFBTVIsT0FBTyxDQUFDLFNBQUQsRUFBWSxDQUFaLEVBQWUsQ0FBQ08sSUFBRCxFQUFPQyxPQUFQLENBQWYsQ0FBYjtBQUNEOztBQVNELGVBQWVDLFVBQWYsQ0FBMkJGLElBQTNCLEVBQWlDO0FBQy9CLE1BQUk7QUFDRixVQUFNUCxPQUFPLENBQUMsTUFBRCxFQUFTLENBQVQsRUFBWSxDQUFDTyxJQUFELENBQVosQ0FBYjtBQUNELEdBRkQsQ0FFRSxPQUFPRyxHQUFQLEVBQVk7QUFDWixRQUFJLENBQUNBLEdBQUcsQ0FBQ0MsT0FBSixJQUFlLEVBQWhCLEVBQW9CQyxPQUFwQixDQUE0QixnREFBNUIsTUFBa0YsQ0FBQyxDQUF2RixFQUEwRjtBQUN4RixZQUFNRixHQUFOO0FBQ0Q7O0FBQ0RoQyxJQUFBQSxHQUFHLENBQUNtQyxLQUFKLENBQVcsaURBQVg7QUFDRDtBQUNGOztBQWFELGVBQWVDLFNBQWYsQ0FBMEJQLElBQTFCLEVBQWdDUSxRQUFoQyxFQUEwQztBQUN4QyxRQUFNZixPQUFPLENBQUMsV0FBRCxFQUFjLENBQWQsRUFBaUIsQ0FBQ08sSUFBRCxFQUFPUSxRQUFQLENBQWpCLENBQWI7QUFDRDs7QUFlRCxlQUFlQyxNQUFmLENBQXVCVCxJQUF2QixFQUE2QlEsUUFBN0IsRUFBdUNFLEtBQUssR0FBRyxDQUEvQyxFQUFrRDtBQUNoRCxRQUFNLDZCQUFjQSxLQUFkLEVBQXFCLElBQXJCLEVBQTJCLFlBQVk7QUFDM0MsVUFBTWpCLE9BQU8sQ0FBQyxRQUFELEVBQVcsQ0FBWCxFQUFjLENBQUNPLElBQUQsRUFBT1EsUUFBUCxDQUFkLENBQWI7QUFDRCxHQUZLLENBQU47QUFHRDs7QUFhRCxlQUFlRyxLQUFmLENBQXNCWCxJQUF0QixFQUE0QnRCLElBQTVCLEVBQWtDQyxHQUFHLEdBQUcsRUFBeEMsRUFBNEM7QUFDMUMsU0FBTyxNQUFNYyxPQUFPLENBQUMsT0FBRCxFQUFVLENBQVYsRUFBYSxDQUFDTyxJQUFELEVBQU8sSUFBSWpCLGdCQUFFNkIsT0FBRixDQUFVbEMsSUFBVixJQUFrQkEsSUFBbEIsR0FBeUIsQ0FBQ0EsSUFBRCxDQUE3QixDQUFQLENBQWIsRUFBMkRDLEdBQTNELENBQXBCO0FBQ0Q7O0FBV0QsZUFBZWtDLGVBQWYsQ0FBZ0NiLElBQWhDLEVBQXNDdEIsSUFBdEMsRUFBNENDLEdBQUcsR0FBRyxFQUFsRCxFQUFzRDtBQUNwRCxTQUFPLE1BQU1rQixhQUFhLENBQUMsT0FBRCxFQUFVLENBQVYsRUFBYSxDQUFDRyxJQUFELEVBQU8sSUFBSWpCLGdCQUFFNkIsT0FBRixDQUFVbEMsSUFBVixJQUFrQkEsSUFBbEIsR0FBeUIsQ0FBQ0EsSUFBRCxDQUE3QixDQUFQLENBQWIsRUFBMkRDLEdBQTNELENBQTFCO0FBQ0Q7O0FBY0QsZUFBZW1DLE9BQWYsQ0FBd0JkLElBQXhCLEVBQThCZSxHQUE5QixFQUFtQztBQUNqQyxTQUFPLE1BQU10QixPQUFPLENBQUMsU0FBRCxFQUFZLENBQVosRUFBZSxDQUFDTyxJQUFELEVBQU9lLEdBQVAsQ0FBZixDQUFwQjtBQUNEOztBQTBDRCxlQUFlQyxPQUFmLENBQXdCaEIsSUFBeEIsRUFBOEJRLFFBQTlCLEVBQXdDO0FBQ3RDLFFBQU07QUFBQ1MsSUFBQUE7QUFBRCxNQUFXLE1BQU14QixPQUFPLENBQUMsU0FBRCxFQUFZLENBQVosRUFBZSxDQUFDTyxJQUFELEVBQU9RLFFBQVAsQ0FBZixDQUE5QjtBQUNBLFNBQU8sQ0FBQ1MsTUFBTSxJQUFJLEVBQVgsRUFBZXpCLElBQWYsRUFBUDtBQUNEOztBQWFELGVBQWUwQixRQUFmLENBQXlCbEIsSUFBekIsRUFBK0JtQixJQUEvQixFQUFxQztBQUNuQyxTQUFPLE1BQU0xQixPQUFPLENBQUMsVUFBRCxFQUFhLENBQWIsRUFBZ0IsQ0FBQ08sSUFBRCxFQUFPbUIsSUFBUCxDQUFoQixDQUFwQjtBQUNEOztBQVlELGVBQWVDLFNBQWYsQ0FBMEJwQixJQUExQixFQUFnQ1EsUUFBaEMsRUFBMEM7QUFDeEMsUUFBTWYsT0FBTyxDQUFDLFdBQUQsRUFBYyxDQUFkLEVBQWlCLENBQUNPLElBQUQsRUFBT1EsUUFBUCxDQUFqQixDQUFiO0FBQ0Q7O0FBcUJELGVBQWVhLGVBQWYsQ0FBZ0NyQixJQUFoQyxFQUFzQ1EsUUFBdEMsRUFBZ0QxQixTQUFTLEdBQUcsSUFBNUQsRUFBa0V3QyxhQUFhLEdBQUcsSUFBbEYsRUFBd0Y7QUFDdEYsUUFBTTVDLElBQUksR0FBRyxDQUFDc0IsSUFBRCxFQUFPUSxRQUFQLENBQWI7O0FBQ0EsTUFBSWMsYUFBSixFQUFtQjtBQUNqQjVDLElBQUFBLElBQUksQ0FBQzZDLElBQUwsQ0FBVUQsYUFBVjtBQUNEOztBQUNELFFBQU07QUFBQ0wsSUFBQUE7QUFBRCxNQUFXLE1BQU14QixPQUFPLENBQUMsbUJBQUQsRUFBc0IsQ0FBdEIsRUFBeUJmLElBQXpCLEVBQStCLEVBQS9CLEVBQW1DSSxTQUFuQyxDQUE5QjtBQUNBLFNBQU8sQ0FBQ21DLE1BQU0sSUFBSSxFQUFYLEVBQWV6QixJQUFmLEVBQVA7QUFDRDs7QUFTRCxlQUFlZ0MsUUFBZixDQUF5QnhCLElBQXpCLEVBQStCO0FBQzdCLE1BQUk7QUFDRixVQUFNUCxPQUFPLENBQUMsVUFBRCxFQUFhLENBQWIsRUFBZ0IsQ0FBQ08sSUFBRCxDQUFoQixDQUFiO0FBQ0QsR0FGRCxDQUVFLE9BQU9HLEdBQVAsRUFBWTtBQUNaLFFBQUksQ0FBQyxDQUFDQSxHQUFHLEdBQUcsRUFBUCxFQUFXc0IsUUFBWCxDQUFvQix5QkFBcEIsQ0FBTCxFQUFxRDtBQUNuRCxZQUFNdEIsR0FBTjtBQUNEOztBQUNEaEMsSUFBQUEsR0FBRyxDQUFDbUMsS0FBSixDQUFXLG1EQUFYO0FBQ0Q7QUFDRjs7QUFlRCxlQUFlb0IsWUFBZixDQUE2QkMsSUFBN0IsRUFBbUNDLFlBQW5DLEVBQWlEQyxTQUFqRCxFQUE0RHBELE9BQU8sR0FBRyxLQUF0RSxFQUE2RTtBQUMzRSxNQUFJdUIsSUFBSjs7QUFHQSxNQUFJO0FBQ0Y2QixJQUFBQSxTQUFTLEdBQUcsTUFBTUMsNEJBQTRCLENBQUNELFNBQUQsQ0FBOUM7QUFDRCxHQUZELENBRUUsT0FBTzFCLEdBQVAsRUFBWTtBQUNaaEMsSUFBQUEsR0FBRyxDQUFDNEQsSUFBSixDQUFVLG1DQUFrQ0YsU0FBVSxlQUF0RDtBQUNEOztBQUVEMUQsRUFBQUEsR0FBRyxDQUFDbUMsS0FBSixDQUFXLGlDQUFnQ3FCLElBQUssc0JBQXFCQyxZQUFhLHFCQUFvQkMsU0FBVSxHQUFoSDs7QUFDQSxNQUFJO0FBQ0YsUUFBSUcsR0FBRyxHQUFHLE1BQU12QyxPQUFPLENBQUMsUUFBRCxFQUFXLENBQVgsRUFBYyxDQUFDa0MsSUFBRCxFQUFPQyxZQUFQLEVBQXFCQyxTQUFyQixDQUFkLENBQXZCO0FBQ0E3QixJQUFBQSxJQUFJLEdBQUdnQyxHQUFHLENBQUNmLE1BQUosQ0FBV3pCLElBQVgsRUFBUDtBQUNELEdBSEQsQ0FHRSxPQUFPVyxHQUFQLEVBQVk7QUFDWixRQUFJOEIsTUFBTSxHQUFHOUIsR0FBRyxDQUFDQyxPQUFqQjs7QUFDQSxRQUFJRCxHQUFHLENBQUNiLE1BQVIsRUFBZ0I7QUFDZDJDLE1BQUFBLE1BQU0sR0FBRzlCLEdBQUcsQ0FBQ2IsTUFBSixDQUFXRSxJQUFYLEVBQVQ7QUFDRDs7QUFDRHJCLElBQUFBLEdBQUcsQ0FBQ29CLGFBQUosQ0FBbUIseUNBQXdDb0MsSUFBSyxZQUE5QyxHQUNDLFlBQVdDLFlBQWEscUJBQW9CQyxTQUFVLGVBQWNJLE1BQU8sR0FEOUY7QUFFRDs7QUFHRCxNQUFJQyxPQUFPLEdBQUdDLFFBQVEsQ0FBQzFELE9BQU8sR0FBRyxJQUFYLEVBQWlCLEVBQWpCLENBQXRCO0FBQ0EsUUFBTSw2QkFBY3lELE9BQWQsRUFBdUIsSUFBdkIsRUFBNkIsWUFBWTtBQUM3QyxRQUFJRSxPQUFPLEdBQUcsTUFBTUMsVUFBVSxFQUE5Qjs7QUFDQSxTQUFLLElBQUlDLFNBQVQsSUFBc0J2RCxnQkFBRXdELE1BQUYsQ0FBU0gsT0FBVCxDQUF0QixFQUF5QztBQUN2QyxXQUFLLElBQUlJLE1BQVQsSUFBbUJGLFNBQW5CLEVBQThCO0FBQzVCLFlBQUlFLE1BQU0sQ0FBQ3hDLElBQVAsS0FBZ0JBLElBQXBCLEVBQTBCO0FBQ3hCLGNBQUl3QyxNQUFNLENBQUNDLEtBQVAsS0FBaUIsVUFBckIsRUFBaUM7QUFFL0Isa0JBQU0sSUFBSUMsS0FBSixDQUFVLDRCQUFWLENBQU47QUFDRCxXQUhELE1BR087QUFFTDtBQUNEO0FBQ0Y7QUFDRjtBQUNGO0FBQ0YsR0FmSyxDQUFOO0FBaUJBLFNBQU8xQyxJQUFQO0FBQ0Q7O0FBU0QsZUFBZTJDLFlBQWYsQ0FBNkIzQyxJQUE3QixFQUFtQztBQUNqQyxRQUFNUCxPQUFPLENBQUMsUUFBRCxFQUFXLENBQVgsRUFBYyxDQUFDTyxJQUFELENBQWQsQ0FBYjtBQUNEOztBQVlELGVBQWU0QyxXQUFmLENBQTRCNUMsSUFBNUIsRUFBa0N2QixPQUFPLEdBQUcsSUFBNUMsRUFBa0Q7QUFDaEQsTUFBSW9FLE1BQU0sR0FBRyxZQUFZO0FBQ3ZCLFVBQU1wRCxPQUFPLENBQUMsT0FBRCxFQUFVLEtBQVYsRUFBaUIsQ0FBQ08sSUFBRCxDQUFqQixDQUFiO0FBQ0QsR0FGRDs7QUFJQSxNQUFJa0MsT0FBTyxHQUFHQyxRQUFRLENBQUMxRCxPQUFPLEdBQUcsR0FBWCxFQUFnQixFQUFoQixDQUF0QjtBQUNBLFFBQU0sNkJBQWN5RCxPQUFkLEVBQXVCLEdBQXZCLEVBQTRCVyxNQUE1QixDQUFOO0FBQ0Q7O0FBcUJELGVBQWVDLG1CQUFmLENBQW9DQyxRQUFRLEdBQUd6RSxZQUEvQyxFQUE2RDtBQUUzRCxRQUFNO0FBQUMyQyxJQUFBQTtBQUFELE1BQVcsTUFBTXhCLE9BQU8sQ0FBQyxNQUFELEVBQVMsQ0FBVCxFQUFZLENBQUMsU0FBRCxDQUFaLENBQTlCO0FBV0EsUUFBTXVELGVBQWUsR0FBRyxJQUFJQyxNQUFKLENBQVksYUFBWWxFLGdCQUFFbUUsWUFBRixDQUFlSCxRQUFmLENBQXlCLG9DQUFqRCxFQUFzRixLQUF0RixDQUF4QjtBQUNBLFFBQU1JLE9BQU8sR0FBRyxFQUFoQjtBQUNBLE1BQUlDLEtBQUo7O0FBRUEsU0FBUUEsS0FBSyxHQUFHSixlQUFlLENBQUNuRSxJQUFoQixDQUFxQm9DLE1BQXJCLENBQWhCLEVBQStDO0FBQzdDa0MsSUFBQUEsT0FBTyxDQUFDNUIsSUFBUixDQUFhNkIsS0FBYjtBQUNEOztBQUNELE1BQUlyRSxnQkFBRXNFLE9BQUYsQ0FBVUYsT0FBVixDQUFKLEVBQXdCO0FBQ3RCLFVBQU0sSUFBSVQsS0FBSixDQUFVLCtCQUFWLENBQU47QUFDRDs7QUFFRCxRQUFNWSxNQUFNLEdBQUcsMkNBQWY7QUFFQSxRQUFNbEIsT0FBTyxHQUFHLEVBQWhCOztBQUNBLE9BQUtnQixLQUFMLElBQWNELE9BQWQsRUFBdUI7QUFDckIsVUFBTUksR0FBRyxHQUFHSCxLQUFLLENBQUMsQ0FBRCxDQUFqQjtBQUNBaEIsSUFBQUEsT0FBTyxDQUFDbUIsR0FBRCxDQUFQLEdBQWUsRUFBZjs7QUFFQSxTQUFLLE1BQU1DLElBQVgsSUFBbUJKLEtBQUssQ0FBQyxDQUFELENBQUwsQ0FBU0ssS0FBVCxDQUFlLElBQWYsRUFBcUJDLEtBQXJCLENBQTJCLENBQTNCLENBQW5CLEVBQWtEO0FBT2hELFlBQU1DLFNBQVMsR0FBR0wsTUFBTSxDQUFDekUsSUFBUCxDQUFZMkUsSUFBWixDQUFsQjs7QUFDQSxVQUFJLENBQUNHLFNBQUwsRUFBZ0I7QUFDZCxjQUFNLElBQUlqQixLQUFKLENBQVcseUJBQXdCYyxJQUFLLEVBQXhDLENBQU47QUFDRDs7QUFFRHBCLE1BQUFBLE9BQU8sQ0FBQ21CLEdBQUQsQ0FBUCxDQUFhaEMsSUFBYixDQUFrQjtBQUNoQkksUUFBQUEsSUFBSSxFQUFFZ0MsU0FBUyxDQUFDLENBQUQsQ0FEQztBQUVoQjNELFFBQUFBLElBQUksRUFBRTJELFNBQVMsQ0FBQyxDQUFELENBRkM7QUFHaEJsQixRQUFBQSxLQUFLLEVBQUVrQixTQUFTLENBQUMsQ0FBRCxDQUhBO0FBSWhCSixRQUFBQTtBQUpnQixPQUFsQjtBQU1EO0FBQ0Y7O0FBQ0QsU0FBT25CLE9BQVA7QUFDRDs7QUFrQkQsZUFBZUMsVUFBZixDQUEyQnVCLE1BQU0sR0FBRyxJQUFwQyxFQUEwQ2IsUUFBUSxHQUFHekUsWUFBckQsRUFBbUU7QUFDakUsTUFBSThELE9BQU8sR0FBRyxFQUFkOztBQUNBLE1BQUk7QUFDRixVQUFNO0FBQUNuQixNQUFBQTtBQUFELFFBQVcsTUFBTXhCLE9BQU8sQ0FBQyxNQUFELEVBQVMsQ0FBVCxFQUFZLENBQUMsU0FBRCxFQUFZLElBQVosQ0FBWixDQUE5QjtBQWVBLFVBQU1vRSxjQUFjLEdBQUcsSUFBSVosTUFBSixDQUFZLElBQUdsRSxnQkFBRW1FLFlBQUYsQ0FBZUgsUUFBZixDQUF5QixZQUF4QyxFQUFxRCxHQUFyRCxDQUF2Qjs7QUFDQSxTQUFLLE1BQU0sQ0FBQ2UsT0FBRCxFQUFVQyxPQUFWLENBQVgsSUFBaUNoRixnQkFBRWlGLE9BQUYsQ0FBVUMsSUFBSSxDQUFDQyxLQUFMLENBQVdqRCxNQUFYLEVBQW1CbUIsT0FBN0IsQ0FBakMsRUFBd0U7QUFDdEUsWUFBTStCLFlBQVksR0FBR04sY0FBYyxDQUFDaEYsSUFBZixDQUFvQmlGLE9BQXBCLENBQXJCOztBQUNBLFVBQUksQ0FBQ0ssWUFBTCxFQUFtQjtBQUNqQjtBQUNEOztBQUNEL0IsTUFBQUEsT0FBTyxDQUFDK0IsWUFBWSxDQUFDLENBQUQsQ0FBYixDQUFQLEdBQTJCSixPQUFPLENBQUNLLEdBQVIsQ0FBYUMsRUFBRCxJQUFRO0FBQzdDLGVBQU9BLEVBQUUsQ0FBQ0MsWUFBVjtBQUNBLCtDQUNLRCxFQURMO0FBRUVkLFVBQUFBLEdBQUcsRUFBRVksWUFBWSxDQUFDLENBQUQ7QUFGbkI7QUFJRCxPQU4wQixDQUEzQjtBQU9EO0FBQ0YsR0E5QkQsQ0E4QkUsT0FBT2hFLEdBQVAsRUFBWTtBQUNaaEMsSUFBQUEsR0FBRyxDQUFDbUMsS0FBSixDQUFXLG1DQUFrQ0gsR0FBRyxDQUFDb0UsS0FBTSxFQUF2RDtBQUNBcEcsSUFBQUEsR0FBRyxDQUFDbUMsS0FBSixDQUFVLGdDQUFWO0FBQ0E4QixJQUFBQSxPQUFPLEdBQUcsTUFBTVUsbUJBQW1CLENBQUNDLFFBQUQsQ0FBbkM7QUFDRDs7QUFFRCxNQUFJLENBQUNhLE1BQUwsRUFBYTtBQUNYLFdBQU94QixPQUFQO0FBQ0Q7O0FBRUQsTUFBSUEsT0FBTyxDQUFDd0IsTUFBRCxDQUFYLEVBQXFCO0FBQ25CLFdBQU94QixPQUFPLENBQUN3QixNQUFELENBQWQ7QUFDRDs7QUFFRCxNQUFJWSxNQUFNLEdBQUksSUFBR1osTUFBTyw4Q0FBeEI7O0FBQ0EsUUFBTWEsYUFBYSxHQUFHMUYsZ0JBQUUyRixJQUFGLENBQU90QyxPQUFQLENBQXRCOztBQUNBb0MsRUFBQUEsTUFBTSxJQUFJQyxhQUFhLENBQUNFLE1BQWQsR0FDTCw0RUFBMkVGLGFBQWEsQ0FBQ0csSUFBZCxDQUFtQixJQUFuQixDQUF5QixFQUQvRixHQUVMLHFHQUZMO0FBR0EsUUFBTSxJQUFJbEMsS0FBSixDQUFVOEIsTUFBVixDQUFOO0FBQ0Q7O0FBV0QsZUFBZTFDLDRCQUFmLENBQTZDK0MsZUFBN0MsRUFBOEQ5QixRQUFRLEdBQUcsS0FBekUsRUFBZ0Y7QUFDOUUsTUFBSTtBQUNGLFVBQU07QUFBQzlCLE1BQUFBO0FBQUQsUUFBVyxNQUFNeEIsT0FBTyxDQUFDLE1BQUQsRUFBUyxDQUFULEVBQVksQ0FBQyxVQUFELENBQVosQ0FBOUI7QUFFQSxVQUFNcUYsU0FBUyxHQUFHLElBQUk3QixNQUFKLENBQVksR0FBRWxFLGdCQUFFbUUsWUFBRixDQUFlSCxRQUFmLENBQXlCLCtDQUF2QyxFQUF1RixHQUF2RixDQUFsQjs7QUFDQSxTQUFLLE1BQU1TLElBQVgsSUFBbUJ2QyxNQUFNLENBQUN3QyxLQUFQLENBQWEsSUFBYixDQUFuQixFQUF1QztBQUNyQyxZQUFNTCxLQUFLLEdBQUcwQixTQUFTLENBQUNqRyxJQUFWLENBQWUyRSxJQUFmLENBQWQ7O0FBQ0EsVUFBSUosS0FBSyxJQUFJQSxLQUFLLENBQUMsQ0FBRCxDQUFMLEtBQWF5QixlQUExQixFQUEyQztBQUN6QyxlQUFPekIsS0FBSyxDQUFDLENBQUQsQ0FBWjtBQUNEO0FBQ0Y7QUFDRixHQVZELENBVUUsT0FBTzJCLEdBQVAsRUFBWSxDQUFFOztBQUdoQixTQUFPRixlQUFQO0FBQ0Q7O0FBV0QsZUFBZUcsYUFBZixDQUE4QmhGLElBQTlCLEVBQW9DO0FBQ2xDLE1BQUlpRixtQkFBbUIsR0FBRyxNQUFNQyx1QkFBUS9ELElBQVIsQ0FBYTtBQUFDZ0UsSUFBQUEsTUFBTSxFQUFHLGNBQWFuRixJQUFLLEVBQTVCO0FBQStCb0YsSUFBQUEsTUFBTSxFQUFFO0FBQXZDLEdBQWIsQ0FBaEM7QUFDQSxRQUFNM0YsT0FBTyxDQUFDLElBQUQsRUFBTyxDQUFQLEVBQVUsQ0FBQ08sSUFBRCxFQUFPLFlBQVAsRUFBcUJpRixtQkFBckIsQ0FBVixDQUFiO0FBQ0EsTUFBSUksYUFBYSxHQUFHLE1BQU1DLGtCQUFHQyxRQUFILENBQVlOLG1CQUFaLENBQTFCO0FBQ0EsUUFBTUssa0JBQUdFLE1BQUgsQ0FBVVAsbUJBQVYsQ0FBTjtBQUNBLFNBQU9JLGFBQWEsQ0FBQ0ksUUFBZCxDQUF1QixRQUF2QixDQUFQO0FBQ0Q7O0FBYUQsZUFBZUMsYUFBZixDQUE4QjFGLElBQTlCLEVBQW9DMkYsT0FBcEMsRUFBNkNDLFFBQVEsR0FBRyxPQUF4RCxFQUFpRTtBQUMvRCxRQUFNQyxnQkFBZ0IsR0FBRyxJQUFJL0Ysd0JBQUosQ0FBZSxPQUFmLEVBQXdCLENBQUMsUUFBRCxFQUFXLFFBQVgsRUFBcUJFLElBQXJCLENBQXhCLENBQXpCO0FBQ0EsUUFBTTZGLGdCQUFnQixDQUFDQyxLQUFqQixDQUF1QixDQUF2QixDQUFOO0FBQ0EsUUFBTUMsZ0JBQWdCLEdBQUdGLGdCQUFnQixDQUFDakIsSUFBakIsRUFBekI7QUFDQSxRQUFNb0IsS0FBSyxHQUFHSCxnQkFBZ0IsQ0FBQ0ksSUFBakIsQ0FBc0JELEtBQXBDO0FBQ0FBLEVBQUFBLEtBQUssQ0FBQ0UsV0FBTixDQUFrQk4sUUFBbEI7QUFDQUksRUFBQUEsS0FBSyxDQUFDRyxLQUFOLENBQVlSLE9BQVo7QUFDQUssRUFBQUEsS0FBSyxDQUFDSSxHQUFOO0FBQ0EsUUFBTUwsZ0JBQU47QUFDRDs7QUFhRCxlQUFlTSxhQUFmLENBQThCckcsSUFBOUIsRUFBb0M0RixRQUFRLEdBQUcsT0FBL0MsRUFBd0Q7QUFDdEQsUUFBTWxILElBQUksR0FBRyxDQUFDLFFBQUQsRUFBVyxTQUFYLEVBQXNCc0IsSUFBdEIsQ0FBYjs7QUFDQSxNQUFJO0FBQ0YsVUFBTTtBQUFDaUIsTUFBQUE7QUFBRCxRQUFXLE1BQU0sd0JBQUssT0FBTCxFQUFjdkMsSUFBZCxFQUFvQjtBQUFDRCxNQUFBQSxPQUFPLEVBQUUsQ0FBVjtBQUFhbUgsTUFBQUE7QUFBYixLQUFwQixDQUF2QjtBQUNBLFdBQU8zRSxNQUFQO0FBQ0QsR0FIRCxDQUdFLE9BQU81QixDQUFQLEVBQVU7QUFDVixRQUFJQSxDQUFDLENBQUNDLE1BQU4sRUFBYztBQUNabkIsTUFBQUEsR0FBRyxDQUFDb0IsYUFBSixDQUFtQix3QkFBdUJiLElBQUksQ0FBQ2tHLElBQUwsQ0FBVSxHQUFWLENBQWUsTUFBS3ZGLENBQUMsQ0FBQ0MsTUFBRixDQUFTRSxJQUFULEVBQWdCLEVBQTlFO0FBQ0QsS0FGRCxNQUVPO0FBQ0xyQixNQUFBQSxHQUFHLENBQUNvQixhQUFKLENBQWtCRixDQUFsQjtBQUNEO0FBQ0Y7QUFDRjs7QUFRRCxlQUFlaUgsY0FBZixHQUFpQztBQUMvQixNQUFJO0FBQ0YsVUFBTTtBQUFDckYsTUFBQUE7QUFBRCxRQUFXLE1BQU14QixPQUFPLENBQUMsTUFBRCxFQUFTLENBQVQsRUFBWSxDQUFDLGFBQUQsRUFBZ0IsSUFBaEIsQ0FBWixDQUE5QjtBQVlBLFVBQU04RyxXQUFXLEdBQUd0QyxJQUFJLENBQUNDLEtBQUwsQ0FBV2pELE1BQU0sQ0FBQ3pCLElBQVAsRUFBWCxDQUFwQjtBQUNBLFdBQU8rRyxXQUFXLENBQUNDLFdBQVosQ0FBd0JwQyxHQUF4QixDQUE2QnFDLElBQUQsSUFBVUEsSUFBSSxDQUFDOUUsSUFBM0MsQ0FBUDtBQUNELEdBZkQsQ0FlRSxPQUFPeEIsR0FBUCxFQUFZO0FBQ1osUUFBSXVHLEdBQUcsR0FBSSx1Q0FBc0N2RyxHQUFHLENBQUNDLE9BQVEsRUFBN0Q7O0FBQ0EsUUFBSUQsR0FBRyxDQUFDYixNQUFSLEVBQWdCO0FBQ2RvSCxNQUFBQSxHQUFHLEdBQUksR0FBRUEsR0FBSSxhQUFZdkcsR0FBRyxDQUFDYixNQUFPLEVBQXBDO0FBQ0Q7O0FBQ0QsVUFBTSxJQUFJb0QsS0FBSixDQUFVZ0UsR0FBVixDQUFOO0FBQ0Q7QUFDRjs7QUF3QkQsZUFBZUMsZ0JBQWYsQ0FBaUMzRyxJQUFqQyxFQUF1QzRHLElBQUksR0FBRyxFQUE5QyxFQUFrRDtBQUNoRCxRQUFNO0FBQ0puSSxJQUFBQSxPQUFPLEdBQUcsTUFETjtBQUVKb0ksSUFBQUEsc0JBRkk7QUFHSkMsSUFBQUEsa0JBSEk7QUFJSkMsSUFBQUEsVUFKSTtBQUtKQyxJQUFBQTtBQUxJLE1BTUZKLElBTko7QUFRQSxNQUFJSyxNQUFNLEdBQUcsRUFBYjtBQUNBLE1BQUlDLGlCQUFpQixHQUFHLEtBQXhCO0FBQ0EsTUFBSUMsS0FBSyxHQUFHLElBQVo7QUFDQSxNQUFJQyxjQUFjLEdBQUcsSUFBckI7QUFDQSxRQUFNQyxXQUFXLEdBQUcsTUFBTXhILGFBQWEsQ0FBQyxZQUFELEVBQWUsQ0FBZixFQUFrQixDQUFDRyxJQUFELENBQWxCLENBQXZDO0FBQ0FxSCxFQUFBQSxXQUFXLENBQUNDLEVBQVosQ0FBZSxRQUFmLEVBQXlCLENBQUNyRyxNQUFELEVBQVMzQixNQUFULEtBQW9CO0FBQzNDMkgsSUFBQUEsTUFBTSxJQUFJaEcsTUFBTSxJQUFJM0IsTUFBcEI7O0FBQ0EsUUFBSTJCLE1BQUosRUFBWTtBQUNWLFVBQUlBLE1BQU0sQ0FBQ1EsUUFBUCxDQUFnQiwyQkFBaEIsS0FBZ0RvRixzQkFBcEQsRUFBNEU7QUFDMUVBLFFBQUFBLHNCQUFzQjtBQUN2QixPQUZELE1BRU8sSUFBSTVGLE1BQU0sQ0FBQ1EsUUFBUCxDQUFnQix1QkFBaEIsS0FBNENxRixrQkFBaEQsRUFBb0U7QUFDekVBLFFBQUFBLGtCQUFrQjtBQUNuQjtBQUNGO0FBQ0YsR0FURDtBQVVBTyxFQUFBQSxXQUFXLENBQUNDLEVBQVosQ0FBZSxNQUFmLEVBQXVCLENBQUNDLElBQUQsRUFBT0MsTUFBUCxLQUFrQjtBQUN2QyxRQUFJSixjQUFKLEVBQW9CO0FBQ2xCSyxNQUFBQSxZQUFZLENBQUNMLGNBQUQsQ0FBWjtBQUNEOztBQUNELFFBQUlHLElBQUksS0FBSyxDQUFiLEVBQWdCO0FBQ2QsVUFBSVIsVUFBSixFQUFnQjtBQUNkQSxRQUFBQSxVQUFVO0FBQ1g7O0FBQ0RHLE1BQUFBLGlCQUFpQixHQUFHLElBQXBCO0FBQ0QsS0FMRCxNQUtPO0FBQ0xELE1BQUFBLE1BQU0sR0FBR0EsTUFBTSxJQUFJTyxNQUFuQjtBQUNBTCxNQUFBQSxLQUFLLEdBQUcsSUFBSXpFLEtBQUosQ0FBVXVFLE1BQVYsQ0FBUjs7QUFDQSxVQUFJRCxPQUFKLEVBQWE7QUFDWEEsUUFBQUEsT0FBTyxDQUFDRyxLQUFELENBQVA7QUFDRDtBQUNGO0FBQ0YsR0FoQkQ7QUFpQkEsUUFBTUUsV0FBVyxDQUFDdkIsS0FBWixDQUFrQixDQUFsQixDQUFOOztBQUNBLFFBQU00QixXQUFXLEdBQUcsWUFBWTtBQUM5QixRQUFJTCxXQUFXLENBQUNNLFNBQWhCLEVBQTJCO0FBQ3pCLFVBQUk7QUFDRixjQUFNTixXQUFXLENBQUNPLElBQVosRUFBTjtBQUNELE9BRkQsQ0FFRSxPQUFPdkksQ0FBUCxFQUFVO0FBQ1ZsQixRQUFBQSxHQUFHLENBQUM0RCxJQUFKLENBQVMxQyxDQUFDLENBQUNlLE9BQVg7QUFDRDtBQUNGO0FBQ0YsR0FSRDs7QUFTQSxRQUFNeUgsV0FBVyxHQUFHekksT0FBTyxDQUFDMEksTUFBUixFQUFwQjs7QUFDQSxNQUFJZixVQUFKLEVBQWdCO0FBQ2RLLElBQUFBLGNBQWMsR0FBR1csVUFBVSxDQUFDTCxXQUFELEVBQWNqSixPQUFkLENBQTNCO0FBQ0QsR0FGRCxNQUVPO0FBQ0wsUUFBSTtBQUNGLFlBQU0sZ0NBQWlCLE1BQU07QUFDM0IsWUFBSTBJLEtBQUosRUFBVztBQUNULGdCQUFNQSxLQUFOO0FBQ0Q7O0FBQ0QsZUFBT0QsaUJBQVA7QUFDRCxPQUxLLEVBS0g7QUFBQ2MsUUFBQUEsTUFBTSxFQUFFdkosT0FBVDtBQUFrQndKLFFBQUFBLFVBQVUsRUFBRTtBQUE5QixPQUxHLENBQU47QUFNRCxLQVBELENBT0UsT0FBTzlILEdBQVAsRUFBWTtBQUNaLFlBQU11SCxXQUFXLEVBQWpCO0FBQ0EsWUFBTSxJQUFJaEYsS0FBSixDQUFXLGlCQUFnQjFDLElBQUssdUNBQXNDWixPQUFPLENBQUMwSSxNQUFSLENBQWVELFdBQWYsRUFBNEIsQ0FBNUIsQ0FBK0IsS0FBM0YsR0FDYixvQkFBbUJaLE1BQU8sRUFEdkIsQ0FBTjtBQUVEO0FBQ0Y7O0FBQ0QsU0FBT0ksV0FBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhlYywgU3ViUHJvY2VzcyB9IGZyb20gJ3RlZW5fcHJvY2Vzcyc7XG5pbXBvcnQgeyByZXRyeUludGVydmFsLCB3YWl0Rm9yQ29uZGl0aW9uIH0gZnJvbSAnYXN5bmNib3gnO1xuaW1wb3J0IHsgbG9nZ2VyLCBmcywgdGVtcERpciB9IGZyb20gJ2FwcGl1bS1zdXBwb3J0JztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cbmNvbnN0IGxvZyA9IGxvZ2dlci5nZXRMb2dnZXIoJ3NpbWN0bCcpO1xuXG5jb25zdCBJT1NfUExBVEZPUk0gPSAnaU9TJztcblxuLyoqXG4gKiBFeGVjdXRlIHRoZSBwYXJ0aWN1bGFyIHNpbWN0bCBjb21tYW5kIGFuZCByZXR1cm4gdGhlIG91dHB1dC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29tbWFuZCAtIE9uZSBvZiBhdmFpbGFibGUgc2ltY3RsIHN1YmNvbW1hbmRzLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICBFeGVjdXRlIGB4Y3J1biBzaW1jdGxgIGluIFRlcm1pbmFsIHRvIHNlZSB0aGUgZnVsbCBsaXN0XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mIGF2YWlsYWJsZSBzdWJjb21tYW5kcy5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lb3V0IC0gQ29tbWFuZCBleGVjdXRpb24gdGltZW91dCBpbiBtaWxsaXNlY29uZHMuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIFNldCBpdCB0byB6ZXJvIHRvIHNraXAgd2FpdGluZyBmb3IgY29tbWFuZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRpb24uXG4gKiBAcGFyYW0ge0FycmF5LjxzdHJpbmc+fSBhcmdzIFtbXV0gLSBUaGUgbGlzdCBvZiBhZGRpdGlvbmFsIHN1YmNvbW1hbmQgYXJndW1lbnRzLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSXQncyBlbXB0eSBieSBkZWZhdWx0LlxuICogQHBhcmFtIHtPYmplY3R9IGVudiBbe31dIC0gRW52aXJvbm1lbnQgdmFyaWFibGVzIG1hcHBpbmcuIEFsbCB0aGVzZSB2YXJpYWJsZXNcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbGwgYmUgcGFzc2VkIFNpbXVsYXRvciBhbmQgdXNlZCBpbiBfZXhlY3V0aW5nRnVuY3Rpb25fLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXhlY3V0aW5nRnVuY3Rpb24gLSBFeGVjdXRpbmcgZnVuY3Rpb24gb2JqZWN0LiBFcXVhbHMgdG8gdGVlbl9wcm9jZXNzJ3NcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2V4ZWNfIGJ5IGRlZmF1bHQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGxvZ0Vycm9ycyBbdHJ1ZV0gLSBTZXQgaXQgdG8gX2ZhbHNlXyB0byB0aHJvdyBleGVjdXRpb24gZXJyb3JzXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbW1lZGlhdGVseSB3aXRob3V0IGxvZ2dpbmcgYW55IGFkZGl0aW9uYWwgaW5mb3JtYXRpb24uXG4gKiBAcmV0dXJuIHtPYmplY3R9IFRoZSByZXN1bHQgb2YgX2V4ZWN1dGluZ0Z1bmN0aW9uXy5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgc2ltY3RsIHN1YmNvbW1hbmQgY29tbWFuZCBleGVjdXRlZCBieSBfZXhlY3V0aW5nRnVuY3Rpb25fXG4gKiAgICAgICAgICAgICAgICAgcmV0dXJucyBub24temVybyByZXR1cm4gY29kZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gc2ltQ29tbWFuZCAoY29tbWFuZCwgdGltZW91dCwgYXJncyA9IFtdLCBlbnYgPSB7fSwgZXhlY3V0aW5nRnVuY3Rpb24gPSBleGVjLCBsb2dFcnJvcnMgPSB0cnVlKSB7XG4gIC8vIHJ1biBhIHBhcnRpY3VsYXIgc2ltY3RsIGNvbW1hbmRcbiAgYXJncyA9IFsnc2ltY3RsJywgY29tbWFuZCwgLi4uYXJnc107XG4gIC8vIFByZWZpeCBhbGwgcGFzc2VkIGluIGVudmlyb25tZW50IHZhcmlhYmxlcyB3aXRoICdTSU1DVExfQ0hJTERfJywgc2ltY3RsXG4gIC8vIHdpbGwgdGhlbiBwYXNzIHRoZXNlIHRvIHRoZSBjaGlsZCAoc3Bhd25lZCkgcHJvY2Vzcy5cbiAgZW52ID0gXy5kZWZhdWx0cyhfLm1hcEtleXMoZW52LCAodmFsdWUsIGtleSkgPT4ge1xuICAgIHJldHVybiBgU0lNQ1RMX0NISUxEXyR7a2V5fWA7XG4gIH0pLCBwcm9jZXNzLmVudik7XG5cbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgZXhlY3V0aW5nRnVuY3Rpb24oJ3hjcnVuJywgYXJncywge3RpbWVvdXQsIGVudn0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKCFsb2dFcnJvcnMpIHtcbiAgICAgIC8vIGlmIHdlIGRvbid0IHdhbnQgdG8gc2VlIHRoZSBlcnJvcnMsIGp1c3QgdGhyb3cgYW5kIGFsbG93IHRoZSBjYWxsaW5nXG4gICAgICAvLyBjb2RlIGRvIHdoYXQgaXQgd2FudHNcbiAgICAgIHRocm93IGU7XG4gICAgfSBlbHNlIGlmIChlLnN0ZGVycikge1xuICAgICAgbG9nLmVycm9yQW5kVGhyb3coYHNpbWN0bCBlcnJvciBydW5uaW5nICcke2NvbW1hbmR9JzogJHtlLnN0ZGVyci50cmltKCl9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZy5lcnJvckFuZFRocm93KGUpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEV4ZWNSZXN1bHRcbiAqIEBwcm9wZXJ0eSB7P3N0cmluZ30gc3Rkb3V0IC0gUHJvY2VzcyBzdGRvdXQuXG4gKiBAcHJvcGVydHkgez9zdHJpbmd9IHN0ZGVyciAtIFByb2Nlc3Mgc3RkZXJyLlxuICogQHByb3BlcnR5IHtudW1iZXJ9IGNvZGUgLSBQcm9jZXNzIGV4aXQgY29kZS5cbiAqL1xuXG4vKipcbiAqIEV4ZWN1dGUgdGhlIHBhcnRpY3VsYXIgc2ltY3RsIHN1YmNvbW1hbmQgc3luY2hyb25vdXNseSBhbmRcbiAqIHdhaXQgZm9yIHRoZSBvdXRwdXQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbW1hbmQgLSBTZWUge0BsaW5rIHNpbUNvbW1hbmR9IHBhcmFtZXRlcnMuXG4gKiBAcGFyYW0ge251bWJlcn0gdGltZW91dCAtIFNlZSB7QGxpbmsgc2ltQ29tbWFuZH0gcGFyYW1ldGVycy5cbiAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZz59IGFyZ3MgW1tdXSAtIFNlZSB7QGxpbmsgc2ltQ29tbWFuZH0gcGFyYW1ldGVycy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBlbnYgW3t9XSAtIFNlZSB7QGxpbmsgc2ltQ29tbWFuZH0gcGFyYW1ldGVycy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gbG9nRXJyb3JzIFt0cnVlXSAtIFNlZSB7QGxpbmsgc2ltQ29tbWFuZH0gcGFyYW1ldGVycy5cbiAqIEByZXR1cm4ge0V4ZWNSZXN1bHR9IFRoZSByZXN1bHQgb2YgX2V4ZWNfIGZ1bmN0aW9uLlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBzaW1jdGwgc3ViY29tbWFuZCBjb21tYW5kIGV4ZWN1dGVkIGJ5IGV4ZWNcbiAqICAgICAgICAgICAgICAgICByZXR1cm5zIG5vbi16ZXJvIHJldHVybiBjb2RlLlxuICovXG5hc3luYyBmdW5jdGlvbiBzaW1FeGVjIChjb21tYW5kLCB0aW1lb3V0LCBhcmdzID0gW10sIGVudiA9IHt9LCBsb2dFcnJvcnMgPSB0cnVlKSB7XG4gIHJldHVybiBhd2FpdCBzaW1Db21tYW5kKGNvbW1hbmQsIHRpbWVvdXQsIGFyZ3MsIGVudiwgYXN5bmMgKGMsIGEsIG9iKSA9PiB7XG4gICAgcmV0dXJuIGF3YWl0IGV4ZWMoYywgYSwgb2IpO1xuICB9LCBsb2dFcnJvcnMpO1xufVxuXG4vKipcbiAqIENyYXRlIGEgdGVlbl9wcm9jZXNzJ3MgU3ViUHJvY2VzcyBpbnN0YW5jZSBmb3IgdGhlIHBhcnRpY3VsYXJcbiAqIHNpbWN0bCBzdWJjb21tYW5kIGV4ZWN1dGlvbi4gVGhpcyBtaWdodCBiZSBuZWVkZWQgdG8gZ2FpbiBiZXR0ZXJcbiAqIGNvbnRyb2wgb3ZlciB0aGUgZXhlY3V0aW9uIHByb2Nlc3MuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbW1hbmQgLSBTZWUge0BsaW5rIHNpbUNvbW1hbmR9IHBhcmFtZXRlcnMuXG4gKiBAcGFyYW0ge251bWJlcn0gdGltZW91dCAtIFNlZSB7QGxpbmsgc2ltQ29tbWFuZH0gcGFyYW1ldGVycy5cbiAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZz59IGFyZ3MgW1tdXSAtIFNlZSB7QGxpbmsgc2ltQ29tbWFuZH0gcGFyYW1ldGVycy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBlbnYgW3t9XSAtIFNlZSB7QGxpbmsgc2ltQ29tbWFuZH0gcGFyYW1ldGVycy5cbiAqIEByZXR1cm4ge1N1YlByb2Nlc3N9IFRoZSBpbnN0YW5jZSBvZiB0ZWVuX3Byb2Nlc3MncyBTdWJQcm9jZXNzIGNsYXNzLlxuICovXG5hc3luYyBmdW5jdGlvbiBzaW1TdWJQcm9jZXNzIChjb21tYW5kLCB0aW1lb3V0LCBhcmdzID0gW10sIGVudiA9IHt9KSB7XG4gIHJldHVybiBhd2FpdCBzaW1Db21tYW5kKGNvbW1hbmQsIHRpbWVvdXQsIGFyZ3MsIGVudiwgKGMsIGEsIG9iKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBTdWJQcm9jZXNzKGMsIGEsIG9iKTtcbiAgfSk7XG59XG5cbi8qKlxuICogSW5zdGFsbCB0aGUgcGFydGljdWxhciBhcHBsaWNhdGlvbiBwYWNrYWdlIG9uIFNpbXVsYXRvci5cbiAqIEl0IGlzIHJlcXVpcmVkIHRoYXQgU2ltdWxhdG9yIGlzIGluIF9ib290ZWRfIHN0YXRlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1ZGlkIC0gVGhlIFVESUQgb2YgYW4gZXhpc3RpbmcgU2ltdWxhdG9yLlxuICogQHBhcmFtIHtzdHJpbmd9IGFwcFBhdGggLSBGdWxsIHBhdGggdG8gLmFwcCBwYWNrYWdlLCB3aGljaCBpc1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICBnb2luZyB0byBiZSBpbnN0YWxsZWQuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIGNvcnJlc3BvbmRpbmcgc2ltY3RsIHN1YmNvbW1hbmQgY29tbWFuZFxuICogICAgICAgICAgICAgICAgIHJldHVybnMgbm9uLXplcm8gcmV0dXJuIGNvZGUuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGluc3RhbGxBcHAgKHVkaWQsIGFwcFBhdGgpIHtcbiAgYXdhaXQgc2ltRXhlYygnaW5zdGFsbCcsIDAsIFt1ZGlkLCBhcHBQYXRoXSk7XG59XG5cbi8qKlxuICogQm9vdCB0aGUgcGFydGljdWxhciBTaW11bGF0b3IgaWYgaXQgaXMgbm90IHJ1bm5pbmcuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVkaWQgLSBUaGUgVURJRCBvZiBhbiBleGlzdGluZyBTaW11bGF0b3IuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIGNvcnJlc3BvbmRpbmcgc2ltY3RsIHN1YmNvbW1hbmQgY29tbWFuZFxuICogICAgICAgICAgICAgICAgIHJldHVybnMgbm9uLXplcm8gcmV0dXJuIGNvZGUuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGJvb3REZXZpY2UgKHVkaWQpIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBzaW1FeGVjKCdib290JywgMCwgW3VkaWRdKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgaWYgKChlcnIubWVzc2FnZSB8fCAnJykuaW5kZXhPZignVW5hYmxlIHRvIGJvb3QgZGV2aWNlIGluIGN1cnJlbnQgc3RhdGU6IEJvb3RlZCcpID09PSAtMSkge1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbiAgICBsb2cuZGVidWcoYFNpbXVsYXRvciBhbHJlYWR5IGluICdCb290ZWQnIHN0YXRlLiBDb250aW51aW5nYCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmUgdGhlIHBhcnRpY3VsYXIgYXBwbGljYXRpb24gcGFja2FnZSBmcm9tIFNpbXVsYXRvci5cbiAqIEl0IGlzIHJlcXVpcmVkIHRoYXQgU2ltdWxhdG9yIGlzIGluIF9ib290ZWRfIHN0YXRlIGFuZFxuICogdGhlIGFwcGxpY2F0aW9uIHdpdGggZ2l2ZW4gYnVuZGxlIGlkZW50aWZpZXIgaXMgYWxyZWFkeSBpbnN0YWxsZWQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVkaWQgLSBUaGUgVURJRCBvZiBhbiBleGlzdGluZyBTaW11bGF0b3IuXG4gKiBAcGFyYW0ge3N0cmluZ30gYnVuZGxlSWQgLSBCdW5kbGUgaWRlbnRpZmllciBvZiB0aGUgYXBwbGljYXRpb24sXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGljaCBpcyBnb2luZyB0byBiZSByZW1vdmVkLlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBjb3JyZXNwb25kaW5nIHNpbWN0bCBzdWJjb21tYW5kIGNvbW1hbmRcbiAqICAgICAgICAgICAgICAgICByZXR1cm5zIG5vbi16ZXJvIHJldHVybiBjb2RlLlxuICovXG5hc3luYyBmdW5jdGlvbiByZW1vdmVBcHAgKHVkaWQsIGJ1bmRsZUlkKSB7XG4gIGF3YWl0IHNpbUV4ZWMoJ3VuaW5zdGFsbCcsIDAsIFt1ZGlkLCBidW5kbGVJZF0pO1xufVxuXG4vKipcbiAqIEV4ZWN1dGUgdGhlIHBhcnRpY3VsYXIgYXBwbGljYXRpb24gcGFja2FnZSBvbiBTaW11bGF0b3IuXG4gKiBJdCBpcyByZXF1aXJlZCB0aGF0IFNpbXVsYXRvciBpcyBpbiBfYm9vdGVkXyBzdGF0ZSBhbmRcbiAqIHRoZSBhcHBsaWNhdGlvbiB3aXRoIGdpdmVuIGJ1bmRsZSBpZGVudGlmaWVyIGlzIGFscmVhZHkgaW5zdGFsbGVkLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1ZGlkIC0gVGhlIFVESUQgb2YgYW4gZXhpc3RpbmcgU2ltdWxhdG9yLlxuICogQHBhcmFtIHtzdHJpbmd9IGJ1bmRsZUlkIC0gQnVuZGxlIGlkZW50aWZpZXIgb2YgdGhlIGFwcGxpY2F0aW9uLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpY2ggaXMgZ29pbmcgdG8gYmUgcmVtb3ZlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSB0cmllcyBbNV0gLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgcmV0cmllcyBiZWZvcmVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvd2luZyBhbiBleGNlcHRpb24uXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIGNvcnJlc3BvbmRpbmcgc2ltY3RsIHN1YmNvbW1hbmQgY29tbWFuZFxuICogICAgICAgICAgICAgICAgIHJldHVybnMgbm9uLXplcm8gcmV0dXJuIGNvZGUuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGxhdW5jaCAodWRpZCwgYnVuZGxlSWQsIHRyaWVzID0gNSkge1xuICBhd2FpdCByZXRyeUludGVydmFsKHRyaWVzLCAxMDAwLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgc2ltRXhlYygnbGF1bmNoJywgMCwgW3VkaWQsIGJ1bmRsZUlkXSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFNwYXduIHRoZSBwYXJ0aWN1bGFyIHByb2Nlc3Mgb24gU2ltdWxhdG9yLlxuICogSXQgaXMgcmVxdWlyZWQgdGhhdCBTaW11bGF0b3IgaXMgaW4gX2Jvb3RlZF8gc3RhdGUuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVkaWQgLSBUaGUgVURJRCBvZiBhbiBleGlzdGluZyBTaW11bGF0b3IuXG4gKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSBhcmdzIC0gU3Bhd24gYXJndW1lbnRzXG4gKiBAcGFyYW0ge29iamVjdH0gZW52IFt7fV0gLSBBZGRpdGlvbmFsIGVudmlyb25tZW50IHZhcmlhYmxlcyBtYXBwaW5nLlxuICogQHJldHVybiB7RXhlY1Jlc3VsdH0gQ29tbWFuZCBleGVjdXRpb24gcmVzdWx0LlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBjb3JyZXNwb25kaW5nIHNpbWN0bCBzdWJjb21tYW5kIGNvbW1hbmRcbiAqICAgICAgICAgICAgICAgICByZXR1cm5zIG5vbi16ZXJvIHJldHVybiBjb2RlLlxuICovXG5hc3luYyBmdW5jdGlvbiBzcGF3biAodWRpZCwgYXJncywgZW52ID0ge30pIHtcbiAgcmV0dXJuIGF3YWl0IHNpbUV4ZWMoJ3NwYXduJywgMCwgW3VkaWQsIC4uLihfLmlzQXJyYXkoYXJncykgPyBhcmdzIDogW2FyZ3NdKV0sIGVudik7XG59XG5cbi8qKlxuICogUHJlcGFyZSBTdWJQcm9jZXNzIGluc3RhbmNlIGZvciBhIG5ldyBwcm9jZXNzLCB3aGljaCBpcyBnb2luZyB0byBiZSBzcGF3bmVkXG4gKiBvbiBTaW11bGF0b3IuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVkaWQgLSBUaGUgVURJRCBvZiBhbiBleGlzdGluZyBTaW11bGF0b3IuXG4gKiBAcGFyYW0ge3N0cmluZ3xBcnJheTxzdHJpbmc+fSBhcmdzIC0gU3Bhd24gYXJndW1lbnRzXG4gKiBAcGFyYW0ge29iamVjdH0gZW52IFt7fV0gLSBBZGRpdGlvbmFsIGVudmlyb25tZW50IHZhcmlhYmxlcyBtYXBwaW5nLlxuICogQHJldHVybiB7U3ViUHJvY2Vzc30gVGhlIGluc3RhbmNlIG9mIHRoZSBwcm9jZXNzIHRvIGJlIHNwYXduZWQuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHNwYXduU3ViUHJvY2VzcyAodWRpZCwgYXJncywgZW52ID0ge30pIHtcbiAgcmV0dXJuIGF3YWl0IHNpbVN1YlByb2Nlc3MoJ3NwYXduJywgMCwgW3VkaWQsIC4uLihfLmlzQXJyYXkoYXJncykgPyBhcmdzIDogW2FyZ3NdKV0sIGVudik7XG59XG5cbi8qKlxuICogT3BlbiBVUkwgc2NoZW1lIG9uIFNpbXVsYXRvci4gaU9TIHdpbGwgYXV0b21hdGljYWxseSB0cnlcbiAqIHRvIGZpbmQgYSBtYXRjaGluZyBhcHBsaWNhdGlvbiwgd2hpY2ggc3VwcG9ydHMgdGhlIGdpdmVuIHNjaGVtZS5cbiAqIEl0IGlzIHJlcXVpcmVkIHRoYXQgU2ltdWxhdG9yIGlzIGluIF9ib290ZWRfIHN0YXRlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1ZGlkIC0gVGhlIFVESUQgb2YgYW4gZXhpc3RpbmcgU2ltdWxhdG9yLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCAtIFRoZSBVUkwgc2NoZW1lIHRvIG9wZW4sIGZvciBleGFtcGxlIGh0dHA6Ly9hcHBpb20uaW9cbiAqICAgICAgICAgICAgICAgICAgICAgICB3aWxsIGJlIG9wZW5lZCBieSB0aGUgYnVpbHQtaW4gbW9iaWxlIGJyb3dzZXIuXG4gKiBAcmV0dXJuIHtFeGVjUmVzdWx0fSBDb21tYW5kIGV4ZWN1dGlvbiByZXN1bHQuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIGNvcnJlc3BvbmRpbmcgc2ltY3RsIHN1YmNvbW1hbmQgY29tbWFuZFxuICogICAgICAgICAgICAgICAgIHJldHVybnMgbm9uLXplcm8gcmV0dXJuIGNvZGUuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIG9wZW5VcmwgKHVkaWQsIHVybCkge1xuICByZXR1cm4gYXdhaXQgc2ltRXhlYygnb3BlbnVybCcsIDAsIFt1ZGlkLCB1cmxdKTtcbn1cblxuLyoqXG4gKiBJbnZva2UgaGlkZGVuIGFwcGluZm8gc3ViY29tbWFuZCB0byBnZXQgdGhlIGluZm9ybWF0aW9uXG4gKiBhYm91dCBhcHBsaWNhdGlvbnMgaW5zdGFsbGVkIG9uIFNpbXVsYXRvciwgaW5jbHVkaW5nXG4gKiBzeXN0ZW0gYXBwbGljYXRpb25zICh7QGxpbmsgZ2V0QXBwQ29udGFpbmVyfSBkb2VzIG5vdCBcInNlZVwiIHN1Y2ggYXBwcykuXG4gKiBTaW11bGF0b3Igc2VydmVyIHNob3VsZCBiZSBpbiAnYm9vdGVkJyBzdGF0ZSBmb3IgdGhpcyBjYWxsIHRvIHdvcmsgcHJvcGVybHkuXG4gKiBUaGUgdG9vbCBpcyBvbmx5IGF2YWlsYWJsZSBzaW5jZSBYY29kZSBTREsgOC4xXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVkaWQgLSBVRElEIG9mIHRoZSB0YXJnZXQgU2ltdWxhdG9yLlxuICogQHBhcmFtIHtzdHJpbmd9IGJ1bmRsZUlkIC0gVGhlIGJ1bmRsZSBpZGVudGlmaWVyIG9mIHRoZSB0YXJnZXQgYXBwbGljYXRpb24uXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBpbmZvcm1hdGlvbiBhYm91dCBpbnN0YWxsZWQgYXBwbGljYXRpb24uXG4gKlxuICogRXhhbXBsZSBvdXRwdXQgZm9yIG5vbi1leGlzdGluZyBhcHBsaWNhdGlvbiBjb250YWluZXI6XG4gKiA8cHJlPlxuICoge1xuICogICBDRkJ1bmRsZUlkZW50aWZpZXIgPSBcImNvbS5hcHBsZS5Nb2JpbGVTYWZhcmlcIjtcbiAqICAgR3JvdXBDb250YWluZXJzID0gICAgIHtcbiAqICAgfTtcbiAqICAgU0JBcHBUYWdzID0gICAgIChcbiAqICAgKTtcbiAqIH1cbiAqIDwvcHJlPlxuICpcbiAqIEV4YW1wbGUgb3V0cHV0IGZvciBhbiBleGlzdGluZyBzeXN0ZW0gYXBwbGljYXRpb24gY29udGFpbmVyOlxuICogPHByZT5cbiAqIHtcbiAqICAgQXBwbGljYXRpb25UeXBlID0gSGlkZGVuO1xuICogICBCdW5kbGUgPSBcImZpbGU6Ly8vQXBwbGljYXRpb25zL1hjb2RlLWJldGEuYXBwL0NvbnRlbnRzL0RldmVsb3Blci9QbGF0Zm9ybXMvaVBob25lT1MucGxhdGZvcm0vRGV2ZWxvcGVyL0xpYnJhcnkvQ29yZVNpbXVsYXRvci9Qcm9maWxlcy9SdW50aW1lcy9pT1Muc2ltcnVudGltZS9Db250ZW50cy9SZXNvdXJjZXMvUnVudGltZVJvb3QvU3lzdGVtL0xpYnJhcnkvQ29yZVNlcnZpY2VzL1NwcmluZ0JvYXJkLmFwcFwiO1xuICogICBDRkJ1bmRsZURpc3BsYXlOYW1lID0gU3ByaW5nQm9hcmQ7XG4gKiAgIENGQnVuZGxlRXhlY3V0YWJsZSA9IFNwcmluZ0JvYXJkO1xuICogICBDRkJ1bmRsZUlkZW50aWZpZXIgPSBcImNvbS5hcHBsZS5zcHJpbmdib2FyZFwiO1xuICogICBDRkJ1bmRsZU5hbWUgPSBTcHJpbmdCb2FyZDtcbiAqICAgQ0ZCdW5kbGVWZXJzaW9uID0gNTA7XG4gKiAgIEdyb3VwQ29udGFpbmVycyA9ICAgICB7XG4gKiAgIH07XG4gKiAgIFBhdGggPSBcIi9BcHBsaWNhdGlvbnMvWGNvZGUtYmV0YS5hcHAvQ29udGVudHMvRGV2ZWxvcGVyL1BsYXRmb3Jtcy9pUGhvbmVPUy5wbGF0Zm9ybS9EZXZlbG9wZXIvTGlicmFyeS9Db3JlU2ltdWxhdG9yL1Byb2ZpbGVzL1J1bnRpbWVzL2lPUy5zaW1ydW50aW1lL0NvbnRlbnRzL1Jlc291cmNlcy9SdW50aW1lUm9vdC9TeXN0ZW0vTGlicmFyeS9Db3JlU2VydmljZXMvU3ByaW5nQm9hcmQuYXBwXCI7XG4gKiAgIFNCQXBwVGFncyA9ICAgICAoXG4gKiAgICk7XG4gKiB9XG4gKiA8L3ByZT5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gYXBwSW5mbyAodWRpZCwgYnVuZGxlSWQpIHtcbiAgY29uc3Qge3N0ZG91dH0gPSBhd2FpdCBzaW1FeGVjKCdhcHBpbmZvJywgMCwgW3VkaWQsIGJ1bmRsZUlkXSk7XG4gIHJldHVybiAoc3Rkb3V0IHx8ICcnKS50cmltKCk7XG59XG5cbi8qKlxuICogQWRkIHRoZSBwYXJ0aWN1bGFyIG1lZGlhIGZpbGUgdG8gU2ltdWxhdG9yJ3MgbGlicmFyeS5cbiAqIEl0IGlzIHJlcXVpcmVkIHRoYXQgU2ltdWxhdG9yIGlzIGluIF9ib290ZWRfIHN0YXRlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1ZGlkIC0gVGhlIFVESUQgb2YgYW4gZXhpc3RpbmcgU2ltdWxhdG9yLlxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBGdWxsIHBhdGggdG8gYSBtZWRpYSBmaWxlIG9uIHRoZSBsb2NhbFxuICogICAgICAgICAgICAgICAgICAgICAgICBmaWxlIHN5c3RlbS5cbiAqIEByZXR1cm4ge0V4ZWNSZXN1bHR9IENvbW1hbmQgZXhlY3V0aW9uIHJlc3VsdC5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgY29ycmVzcG9uZGluZyBzaW1jdGwgc3ViY29tbWFuZCBjb21tYW5kXG4gKiAgICAgICAgICAgICAgICAgcmV0dXJucyBub24temVybyByZXR1cm4gY29kZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gYWRkTWVkaWEgKHVkaWQsIHBhdGgpIHtcbiAgcmV0dXJuIGF3YWl0IHNpbUV4ZWMoJ2FkZG1lZGlhJywgMCwgW3VkaWQsIHBhdGhdKTtcbn1cblxuLyoqXG4gKiBUZXJtaW5hdGUgdGhlIGdpdmVuIHJ1bm5pbmcgYXBwbGljYXRpb24gb24gU2ltdWxhdG9yLlxuICogSXQgaXMgcmVxdWlyZWQgdGhhdCBTaW11bGF0b3IgaXMgaW4gX2Jvb3RlZF8gc3RhdGUuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVkaWQgLSBUaGUgVURJRCBvZiBhbiBleGlzdGluZyBTaW11bGF0b3IuXG4gKiBAcGFyYW0ge3N0cmluZ30gYnVuZGxlSWQgLSBCdW5kbGUgaWRlbnRpZmllciBvZiB0aGUgYXBwbGljYXRpb24sXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGljaCBpcyBnb2luZyB0byBiZSB0ZXJtaW5hdGVkLlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBjb3JyZXNwb25kaW5nIHNpbWN0bCBzdWJjb21tYW5kIGNvbW1hbmRcbiAqICAgICAgICAgICAgICAgICByZXR1cm5zIG5vbi16ZXJvIHJldHVybiBjb2RlLlxuICovXG5hc3luYyBmdW5jdGlvbiB0ZXJtaW5hdGUgKHVkaWQsIGJ1bmRsZUlkKSB7XG4gIGF3YWl0IHNpbUV4ZWMoJ3Rlcm1pbmF0ZScsIDAsIFt1ZGlkLCBidW5kbGVJZF0pO1xufVxuXG4vKipcbiAqIEdldCB0aGUgZnVsbCBwYXRoIHRvIHRoZSBwYXJ0aWN1bGFyIGFwcGxpY2F0aW9uIGNvbnRhaW5lclxuICogb24gdGhlIGxvY2FsIGZpbGUgc3lzdGVtLiBOb3RlLCB0aGF0IHRoaXMgc3ViY29tbWFuZCB0aHJvd3NcbiAqIGFuIGVycm9yIGlmIGJ1bmRsZSBpZCBvZiBhIHN5c3RlbSBhcHBsaWNhdGlvbiBpcyBwcm92aWRlZCxcbiAqIGxpa2UgJ2NvbS5hcHBsZS5zcHJpbmdib2FyZCcuXG4gKiBJdCBpcyByZXF1aXJlZCB0aGF0IFNpbXVsYXRvciBpcyBpbiBfYm9vdGVkXyBzdGF0ZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdWRpZCAtIFRoZSBVRElEIG9mIGFuIGV4aXN0aW5nIFNpbXVsYXRvci5cbiAqIEBwYXJhbSB7c3RyaW5nfSBidW5kbGVJZCAtIEJ1bmRsZSBpZGVudGlmaWVyIG9mIGFuIGFwcGxpY2F0aW9uLlxuICogQHBhcmFtIHs/Ym9vbGVhbn0gbG9nRXJyb3JzIFt0cnVlXSAtIFdoZXRoZXIgdG8gaW5jbHVkZSBleGVjJ3MgY29tbWFuZFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZGVyciBvdXRwdXQgaW50byBleGNlcHRpb24gbWVzc2FnZSBpZiB0aHJvd24uXG4gKiBAcGFyYW0gez9zdHJpbmd9IGNvbnRhaW5lclR5cGUgLSBXaGljaCBjb250YWluZXIgdHlwZSB0byByZXR1cm4uIFBvc3NpYmxlIHZhbHVlc1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJlICdhcHAnLCAnZGF0YScsICdncm91cHMnLCAnPEEgc3BlY2lmaWMgQXBwIEdyb3VwIGNvbnRhaW5lcj4nLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhlIGRlZmF1bHQgdmFsdWUgaXMgJ2FwcCcuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEZ1bGwgcGF0aCB0byB0aGUgZ2l2ZW4gYXBwbGljYXRpb24gY29udGFpbmVyIG9uIHRoZSBsb2NhbFxuICogICAgICAgICAgICAgICAgICBmaWxlIHN5c3RlbS5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgY29ycmVzcG9uZGluZyBzaW1jdGwgc3ViY29tbWFuZCBjb21tYW5kXG4gKiAgICAgICAgICAgICAgICAgcmV0dXJucyBub24temVybyByZXR1cm4gY29kZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0QXBwQ29udGFpbmVyICh1ZGlkLCBidW5kbGVJZCwgbG9nRXJyb3JzID0gdHJ1ZSwgY29udGFpbmVyVHlwZSA9IG51bGwpIHtcbiAgY29uc3QgYXJncyA9IFt1ZGlkLCBidW5kbGVJZF07XG4gIGlmIChjb250YWluZXJUeXBlKSB7XG4gICAgYXJncy5wdXNoKGNvbnRhaW5lclR5cGUpO1xuICB9XG4gIGNvbnN0IHtzdGRvdXR9ID0gYXdhaXQgc2ltRXhlYygnZ2V0X2FwcF9jb250YWluZXInLCAwLCBhcmdzLCB7fSwgbG9nRXJyb3JzKTtcbiAgcmV0dXJuIChzdGRvdXQgfHwgJycpLnRyaW0oKTtcbn1cblxuLyoqXG4gKiBTaHV0ZG93biB0aGUgZ2l2ZW4gU2ltdWxhdG9yIGlmIGl0IGlzIHJ1bm5pbmcuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVkaWQgLSBUaGUgVURJRCBvZiBhbiBleGlzdGluZyBTaW11bGF0b3IuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIGNvcnJlc3BvbmRpbmcgc2ltY3RsIHN1YmNvbW1hbmQgY29tbWFuZFxuICogICAgICAgICAgICAgICAgIHJldHVybnMgbm9uLXplcm8gcmV0dXJuIGNvZGUuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHNodXRkb3duICh1ZGlkKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgc2ltRXhlYygnc2h1dGRvd24nLCAwLCBbdWRpZF0pO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoIShlcnIgKyAnJykuaW5jbHVkZXMoJ2N1cnJlbnQgc3RhdGU6IFNodXRkb3duJykpIHtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG4gICAgbG9nLmRlYnVnKGBTaW11bGF0b3IgYWxyZWFkeSBpbiAnU2h1dGRvd24nIHN0YXRlLiBDb250aW51aW5nYCk7XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgU2ltdWxhdG9yIGRldmljZSB3aXRoIGdpdmVuIG5hbWUgZm9yIHRoZSBwYXJ0aWN1bGFyXG4gKiBwbGF0Zm9ybSB0eXBlIGFuZCB2ZXJzaW9uLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIC0gVGhlIGRldmljZSBuYW1lIHRvIGJlIGNyZWF0ZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGV2aWNlVHlwZUlkIC0gRGV2aWNlIHR5cGUsIGZvciBleGFtcGxlICdpUGhvbmUgNicuXG4gKiBAcGFyYW0ge3N0cmluZ30gcnVudGltZUlkIC0gUGxhdGZvcm0gdmVyc2lvbiwgZm9yIGV4YW1wbGUgJzEwLjMnLlxuICogQHBhcmFtIHtudW1iZXJ9IHRpbWVvdXQgWzEwMDAwXSAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gd2FpdFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXQgZGV2aWNlIGNyZWF0aW9uIGlzIGNvbXBsZXRlZC5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIFVESUQgb2YgdGhlIG5ld2x5IGNyZWF0ZWQgZGV2aWNlLlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBjb3JyZXNwb25kaW5nIHNpbWN0bCBzdWJjb21tYW5kIGNvbW1hbmRcbiAqICAgICAgICAgICAgICAgICByZXR1cm5zIG5vbi16ZXJvIHJldHVybiBjb2RlLlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVEZXZpY2UgKG5hbWUsIGRldmljZVR5cGVJZCwgcnVudGltZUlkLCB0aW1lb3V0ID0gMTAwMDApIHtcbiAgbGV0IHVkaWQ7XG4gIC8vIGZpcnN0IG1ha2Ugc3VyZSB0aGF0IHRoZSBydW50aW1lIGlkIGlzIHRoZSByaWdodCBvbmVcbiAgLy8gaW4gc29tZSB2ZXJzaW9ucyBvZiBYY29kZSBpdCB3aWxsIGJlIGEgcGF0Y2ggdmVyc2lvblxuICB0cnkge1xuICAgIHJ1bnRpbWVJZCA9IGF3YWl0IGdldFJ1bnRpbWVGb3JQbGF0Zm9ybVZlcnNpb24ocnVudGltZUlkKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbG9nLndhcm4oYFVuYWJsZSB0byBmaW5kIHJ1bnRpbWUgZm9yIGlPUyAnJHtydW50aW1lSWR9Jy4gQ29udGludWluZ2ApO1xuICB9XG5cbiAgbG9nLmRlYnVnKGBDcmVhdGluZyBzaW11bGF0b3Igd2l0aCBuYW1lICcke25hbWV9JywgZGV2aWNlIHR5cGUgaWQgJyR7ZGV2aWNlVHlwZUlkfScgYW5kIHJ1bnRpbWUgaWQgJyR7cnVudGltZUlkfSdgKTtcbiAgdHJ5IHtcbiAgICBsZXQgb3V0ID0gYXdhaXQgc2ltRXhlYygnY3JlYXRlJywgMCwgW25hbWUsIGRldmljZVR5cGVJZCwgcnVudGltZUlkXSk7XG4gICAgdWRpZCA9IG91dC5zdGRvdXQudHJpbSgpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBsZXQgcmVhc29uID0gZXJyLm1lc3NhZ2U7XG4gICAgaWYgKGVyci5zdGRlcnIpIHtcbiAgICAgIHJlYXNvbiA9IGVyci5zdGRlcnIudHJpbSgpO1xuICAgIH1cbiAgICBsb2cuZXJyb3JBbmRUaHJvdyhgQ291bGQgbm90IGNyZWF0ZSBzaW11bGF0b3Igd2l0aCBuYW1lICcke25hbWV9JywgZGV2aWNlIGAgK1xuICAgICAgICAgICAgICAgICAgICAgIGB0eXBlIGlkICcke2RldmljZVR5cGVJZH0nIGFuZCBydW50aW1lIGlkICcke3J1bnRpbWVJZH0nLiBSZWFzb246ICcke3JlYXNvbn0nYCk7XG4gIH1cblxuICAvLyBtYWtlIHN1cmUgdGhhdCBpdCBnZXRzIG91dCBvZiB0aGUgXCJDcmVhdGluZ1wiIHN0YXRlXG4gIGxldCByZXRyaWVzID0gcGFyc2VJbnQodGltZW91dCAvIDEwMDAsIDEwKTtcbiAgYXdhaXQgcmV0cnlJbnRlcnZhbChyZXRyaWVzLCAxMDAwLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGRldmljZXMgPSBhd2FpdCBnZXREZXZpY2VzKCk7XG4gICAgZm9yIChsZXQgZGV2aWNlQXJyIG9mIF8udmFsdWVzKGRldmljZXMpKSB7XG4gICAgICBmb3IgKGxldCBkZXZpY2Ugb2YgZGV2aWNlQXJyKSB7XG4gICAgICAgIGlmIChkZXZpY2UudWRpZCA9PT0gdWRpZCkge1xuICAgICAgICAgIGlmIChkZXZpY2Uuc3RhdGUgPT09ICdDcmVhdGluZycpIHtcbiAgICAgICAgICAgIC8vIG5lZWQgdG8gcmV0cnlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRGV2aWNlIHN0aWxsIGJlaW5nIGNyZWF0ZWQnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gc3RvcCBsb29raW5nLCB3ZSdyZSBkb25lXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gdWRpZDtcbn1cblxuLyoqXG4gKiBEZWxldGUgdGhlIHBhcnRpY3VsYXIgU2ltdWxhdG9yIGZyb20gYXZhaWxhYmxlIGRldmljZXMgbGlzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdWRpZCAtIFRoZSBVRElEIG9mIGFuIGV4aXN0aW5nIFNpbXVsYXRvci5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgY29ycmVzcG9uZGluZyBzaW1jdGwgc3ViY29tbWFuZCBjb21tYW5kXG4gKiAgICAgICAgICAgICAgICAgcmV0dXJucyBub24temVybyByZXR1cm4gY29kZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZGVsZXRlRGV2aWNlICh1ZGlkKSB7XG4gIGF3YWl0IHNpbUV4ZWMoJ2RlbGV0ZScsIDAsIFt1ZGlkXSk7XG59XG5cbi8qKlxuICogUmVzZXQgdGhlIGNvbnRlbnQgYW5kIHNldHRpbmdzIG9mIHRoZSBwYXJ0aWN1bGFyIFNpbXVsYXRvci5cbiAqIEl0IGlzIHJlcXVpcmVkIHRoYXQgU2ltdWxhdG9yIGlzIGluIF9zaHV0ZG93bl8gc3RhdGUuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVkaWQgLSBUaGUgVURJRCBvZiBhbiBleGlzdGluZyBTaW11bGF0b3IuXG4gKiBAcGFyYW0ge251bWJlcn0gdGltZW91dCBbMTAwMDBdIC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byB3YWl0XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdCBkZXZpY2UgcmVzZXQgaXMgY29tcGxldGVkLlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBjb3JyZXNwb25kaW5nIHNpbWN0bCBzdWJjb21tYW5kIGNvbW1hbmRcbiAqICAgICAgICAgICAgICAgICByZXR1cm5zIG5vbi16ZXJvIHJldHVybiBjb2RlLlxuICovXG5hc3luYyBmdW5jdGlvbiBlcmFzZURldmljZSAodWRpZCwgdGltZW91dCA9IDEwMDApIHtcbiAgbGV0IGxvb3BGbiA9IGFzeW5jICgpID0+IHtcbiAgICBhd2FpdCBzaW1FeGVjKCdlcmFzZScsIDEwMDAwLCBbdWRpZF0pO1xuICB9O1xuICAvLyByZXRyeSBlcmFzZSB3aXRoIGEgc2xlZXAgaW4gYmV0d2VlbiBiZWNhdXNlIGl0J3MgZmxha2V5XG4gIGxldCByZXRyaWVzID0gcGFyc2VJbnQodGltZW91dCAvIDIwMCwgMTApO1xuICBhd2FpdCByZXRyeUludGVydmFsKHJldHJpZXMsIDIwMCwgbG9vcEZuKTtcbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBEZXZpY2VJbmZvXG4gKiBAcHJvcGVydHkge3N0cmluZ30gbmFtZSAtIFRoZSBkZXZpY2UgbmFtZS5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSB1ZGlkIC0gVGhlIGRldmljZSBVRElELlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHN0YXRlIC0gVGhlIGN1cnJlbnQgU2ltdWxhdG9yIHN0YXRlLCBmb3IgZXhhbXBsZSAnYm9vdGVkJyBvciAnc2h1dGRvd24nLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IHNkayAtIFRoZSBTREsgdmVyc2lvbiwgZm9yIGV4YW1wbGUgJzEwLjMnLlxuICovXG5cbi8qKlxuICogUGFyc2UgdGhlIGxpc3Qgb2YgZXhpc3RpbmcgU2ltdWxhdG9yIGRldmljZXMgdG8gcmVwcmVzZW50XG4gKiBpdCBhcyBjb252ZW5pZW50IG1hcHBpbmcuXG4gKlxuICogQHBhcmFtIHs/c3RyaW5nfSBwbGF0Zm9ybSBbaU9TXSAtIFRoZSBwbGF0Zm9ybSBuYW1lLCBmb3IgZXhhbXBsZSAnd2F0Y2hPUycuXG4gKiBAcmV0dXJuIHtPYmplY3R9IFRoZSByZXN1bHRpbmcgbWFwcGluZy4gRWFjaCBrZXkgaXMgcGxhdGZvcm0gdmVyc2lvbixcbiAqICAgICAgICAgICAgICAgICAgZm9yIGV4YW1wbGUgJzEwLjMnIGFuZCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSBpcyBhblxuICogICAgICAgICAgICAgICAgICBhcnJheSBvZiB0aGUgbWF0Y2hpbmcge0BsaW5rIERldmljZUluZm99IGluc3RhbmNlcy5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgY29ycmVzcG9uZGluZyBzaW1jdGwgc3ViY29tbWFuZCBjb21tYW5kXG4gKiAgICAgICAgICAgICAgICAgcmV0dXJucyBub24temVybyByZXR1cm4gY29kZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0RGV2aWNlc0J5UGFyc2luZyAocGxhdGZvcm0gPSBJT1NfUExBVEZPUk0pIHtcbiAgLy8gZ2V0IHRoZSBsaXN0IG9mIGRldmljZXNcbiAgY29uc3Qge3N0ZG91dH0gPSBhd2FpdCBzaW1FeGVjKCdsaXN0JywgMCwgWydkZXZpY2VzJ10pO1xuXG4gIC8vIGV4cGVjdCB0byBnZXQgYSBsaXN0aW5nIGxpa2VcbiAgLy8gLS0gaU9TIDguMSAtLVxuICAvLyAgICAgaVBob25lIDRzICgzQ0E2RTdERC0yMjBFLTQ1RTUtQjcxNi0xRTk5MkIzQTQyOUMpIChTaHV0ZG93bilcbiAgLy8gICAgIC4uLlxuICAvLyAtLSBpT1MgOC4yIC0tXG4gIC8vICAgICBpUGhvbmUgNHMgKEE5OUZGRkMzLThFMTktNERDRi1CNTg1LTdEOUQ0NkI0QzE2RSkgKFNodXRkb3duKVxuICAvLyAgICAgLi4uXG4gIC8vIHNvLCBnZXQgdGhlIGAtLSBpT1MgWC5YIC0tYCBsaW5lIHRvIGZpbmQgdGhlIHNkayAoWC5YKVxuICAvLyBhbmQgdGhlIHJlc3Qgb2YgdGhlIGxpc3RpbmcgaW4gb3JkZXIgdG8gbGF0ZXIgZmluZCB0aGUgZGV2aWNlc1xuICBjb25zdCBkZXZpY2VTZWN0aW9uUmUgPSBuZXcgUmVnRXhwKGBcXFxcLVxcXFwtXFxcXHMrJHtfLmVzY2FwZVJlZ0V4cChwbGF0Zm9ybSl9XFxcXHMrKFxcXFxTKylcXFxccytcXFxcLVxcXFwtKFxcXFxuXFxcXHN7NH0uKykqYCwgJ21naScpO1xuICBjb25zdCBtYXRjaGVzID0gW107XG4gIGxldCBtYXRjaDtcbiAgLy8gbWFrZSBhbiBlbnRyeSBmb3IgZWFjaCBzZGsgdmVyc2lvblxuICB3aGlsZSAoKG1hdGNoID0gZGV2aWNlU2VjdGlvblJlLmV4ZWMoc3Rkb3V0KSkpIHtcbiAgICBtYXRjaGVzLnB1c2gobWF0Y2gpO1xuICB9XG4gIGlmIChfLmlzRW1wdHkobWF0Y2hlcykpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBmaW5kIGRldmljZSBzZWN0aW9uJyk7XG4gIH1cblxuICBjb25zdCBsaW5lUmUgPSAvKFteXFxzXS4rKSBcXCgoXFx3Ky0uK1xcdyspXFwpIFxcKChcXHcrXFxzP1xcdyspXFwpLzsgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9sRzdtSzYvM1xuICAvLyBnZXQgYWxsIHRoZSBkZXZpY2VzIGZvciBlYWNoIHNka1xuICBjb25zdCBkZXZpY2VzID0ge307XG4gIGZvciAobWF0Y2ggb2YgbWF0Y2hlcykge1xuICAgIGNvbnN0IHNkayA9IG1hdGNoWzFdO1xuICAgIGRldmljZXNbc2RrXSA9IFtdO1xuICAgIC8vIHNwbGl0IHRoZSBmdWxsIG1hdGNoIGludG8gbGluZXMgYW5kIHJlbW92ZSB0aGUgZmlyc3RcbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbWF0Y2hbMF0uc3BsaXQoJ1xcbicpLnNsaWNlKDEpKSB7XG4gICAgICAvLyBhIGxpbmUgaXMgc29tZXRoaW5nIGxpa2VcbiAgICAgIC8vICAgIGlQaG9uZSA0cyAoQTk5RkZGQzMtOEUxOS00RENGLUI1ODUtN0Q5RDQ2QjRDMTZFKSAoU2h1dGRvd24pXG4gICAgICAvLyByZXRyaWV2ZTpcbiAgICAgIC8vICAgaVBob25lIDRzXG4gICAgICAvLyAgIEE5OUZGRkMzLThFMTktNERDRi1CNTg1LTdEOUQ0NkI0QzE2RVxuICAgICAgLy8gICBTaHV0ZG93blxuICAgICAgY29uc3QgbGluZU1hdGNoID0gbGluZVJlLmV4ZWMobGluZSk7XG4gICAgICBpZiAoIWxpbmVNYXRjaCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBtYXRjaCBsaW5lOiAke2xpbmV9YCk7XG4gICAgICB9XG4gICAgICAvLyBzYXZlIHRoZSB3aG9sZSB0aGluZyBhcyBhYiBvYmplY3QgaW4gdGhlIGxpc3QgZm9yIHRoaXMgc2RrXG4gICAgICBkZXZpY2VzW3Nka10ucHVzaCh7XG4gICAgICAgIG5hbWU6IGxpbmVNYXRjaFsxXSxcbiAgICAgICAgdWRpZDogbGluZU1hdGNoWzJdLFxuICAgICAgICBzdGF0ZTogbGluZU1hdGNoWzNdLFxuICAgICAgICBzZGssXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRldmljZXM7XG59XG5cbi8qKlxuICogUGFyc2UgdGhlIGxpc3Qgb2YgZXhpc3RpbmcgU2ltdWxhdG9yIGRldmljZXMgdG8gcmVwcmVzZW50XG4gKiBpdCBhcyBjb252ZW5pZW50IG1hcHBpbmcgZm9yIHRoZSBwYXJ0aWN1bGFyIHBsYXRmb3JtIHZlcnNpb24uXG4gKlxuICogQHBhcmFtIHs/c3RyaW5nfSBmb3JTZGsgLSBUaGUgc2RrIHZlcnNpb24sXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB3aGljaCB0aGUgZGV2aWNlcyBsaXN0IHNob3VsZCBiZSBwYXJzZWQsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBleGFtcGxlICcxMC4zJy5cbiAqIEBwYXJhbSB7P3N0cmluZ30gcGxhdGZvcm0gW2lPU10gLSBUaGUgcGxhdGZvcm0gbmFtZSwgZm9yIGV4YW1wbGUgJ3dhdGNoT1MnLlxuICogQHJldHVybiB7T2JqZWN0fEFycmF5PERldmljZUluZm8+fSBJZiBfZm9yU2RrXyBpcyBzZXQgdGhlbiB0aGUgbGlzdFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZiBkZXZpY2VzIGZvciB0aGUgcGFydGljdWxhciBwbGF0Zm9ybSB2ZXJzaW9uLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPdGhlcndpc2UgdGhlIHNhbWUgcmVzdWx0IGFzIGZvciB7QGxpbmsgZ2V0RGV2aWNlc0J5UGFyc2luZ31cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24uXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIGNvcnJlc3BvbmRpbmcgc2ltY3RsIHN1YmNvbW1hbmQgY29tbWFuZFxuICogICAgICAgICAgICAgICAgIHJldHVybnMgbm9uLXplcm8gcmV0dXJuIGNvZGUgb3IgaWYgbm8gbWF0Y2hpbmdcbiAqICAgICAgICAgICAgICAgICBwbGF0Zm9ybSB2ZXJzaW9uIGlzIGZvdW5kIGluIHRoZSBzeXN0ZW0uXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldERldmljZXMgKGZvclNkayA9IG51bGwsIHBsYXRmb3JtID0gSU9TX1BMQVRGT1JNKSB7XG4gIGxldCBkZXZpY2VzID0ge307XG4gIHRyeSB7XG4gICAgY29uc3Qge3N0ZG91dH0gPSBhd2FpdCBzaW1FeGVjKCdsaXN0JywgMCwgWydkZXZpY2VzJywgJy1qJ10pO1xuICAgIC8qIEpTT04gc2hvdWxkIGJlXG4gICAgICoge1xuICAgICAqICAgXCJkZXZpY2VzXCIgOiB7XG4gICAgICogICAgIFwiaU9TIDxzZGs+XCIgOiBbXG4gICAgICogICAgICAge1xuICAgICAqICAgICAgICAgXCJzdGF0ZVwiIDogXCJCb290ZWRcIixcbiAgICAgKiAgICAgICAgIFwiYXZhaWxhYmlsaXR5XCIgOiBcIihhdmFpbGFibGUpXCIsXG4gICAgICogICAgICAgICBcIm5hbWVcIiA6IFwiaVBob25lIDZcIixcbiAgICAgKiAgICAgICAgIFwidWRpZFwiIDogXCI3NUUzNDE0MC0xOEU4LTREMUEtOUY0NS1BQUM3MzVERjc1REZcIlxuICAgICAqICAgICAgIH1cbiAgICAgKiAgICAgXVxuICAgICAqICAgfVxuICAgICAqIH1cbiAgICAgKi9cbiAgICBjb25zdCB2ZXJzaW9uTWF0Y2hSZSA9IG5ldyBSZWdFeHAoYF4ke18uZXNjYXBlUmVnRXhwKHBsYXRmb3JtKX1cXFxccysoXFxcXFMrKWAsICdpJyk7XG4gICAgZm9yIChjb25zdCBbc2RrTmFtZSwgZW50cmllc10gb2YgXy50b1BhaXJzKEpTT04ucGFyc2Uoc3Rkb3V0KS5kZXZpY2VzKSkge1xuICAgICAgY29uc3QgdmVyc2lvbk1hdGNoID0gdmVyc2lvbk1hdGNoUmUuZXhlYyhzZGtOYW1lKTtcbiAgICAgIGlmICghdmVyc2lvbk1hdGNoKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgZGV2aWNlc1t2ZXJzaW9uTWF0Y2hbMV1dID0gZW50cmllcy5tYXAoKGVsKSA9PiB7XG4gICAgICAgIGRlbGV0ZSBlbC5hdmFpbGFiaWxpdHk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uZWwsXG4gICAgICAgICAgc2RrOiB2ZXJzaW9uTWF0Y2hbMV1cbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbG9nLmRlYnVnKGBVbmFibGUgdG8gZ2V0IEpTT04gZGV2aWNlIGxpc3Q6ICR7ZXJyLnN0YWNrfWApO1xuICAgIGxvZy5kZWJ1ZygnRmFsbGluZyBiYWNrIHRvIG1hbnVhbCBwYXJzaW5nJyk7XG4gICAgZGV2aWNlcyA9IGF3YWl0IGdldERldmljZXNCeVBhcnNpbmcocGxhdGZvcm0pO1xuICB9XG5cbiAgaWYgKCFmb3JTZGspIHtcbiAgICByZXR1cm4gZGV2aWNlcztcbiAgfVxuICAvLyBpZiBhIGBmb3JTZGtgIHdhcyBwYXNzZWQgaW4sIHJldHVybiBvbmx5IHRoZSBjb3JyZXNwb25kaW5nIGxpc3RcbiAgaWYgKGRldmljZXNbZm9yU2RrXSkge1xuICAgIHJldHVybiBkZXZpY2VzW2ZvclNka107XG4gIH1cblxuICBsZXQgZXJyTXNnID0gYCcke2ZvclNka30nIGRvZXMgbm90IGV4aXN0IGluIHRoZSBsaXN0IG9mIHNpbWN0bCBTREtzLmA7XG4gIGNvbnN0IGF2YWlsYWJsZVNES3MgPSBfLmtleXMoZGV2aWNlcyk7XG4gIGVyck1zZyArPSBhdmFpbGFibGVTREtzLmxlbmd0aFxuICAgID8gYCBPbmx5IHRoZSBmb2xsb3dpbmcgU2ltdWxhdG9yIFNESyB2ZXJzaW9ucyBhcmUgYXZhaWxhYmxlIG9uIHlvdXIgc3lzdGVtOiAke2F2YWlsYWJsZVNES3Muam9pbignLCAnKX1gXG4gICAgOiBgIE5vIFNpbXVsYXRvciBTREsgdmVyc2lvbnMgYXJlIGF2YWlsYWJsZSBvbiB5b3VyIHN5c3RlbS4gUGxlYXNlIGluc3RhbGwgc29tZSB2aWEgWGNvZGUgcHJlZmVyZW5jZXMuYDtcbiAgdGhyb3cgbmV3IEVycm9yKGVyck1zZyk7XG59XG5cbi8qKlxuICogR2V0IHRoZSBydW50aW1lIGZvciB0aGUgcGFydGljdWxhciBwbGF0Zm9ybSB2ZXJzaW9uLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwbGF0Zm9ybVZlcnNpb24gLSBUaGUgcGxhdGZvcm0gdmVyc2lvbiBuYW1lLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciBleGFtcGxlICcxMC4zJy5cbiAqIEBwYXJhbSB7P3N0cmluZ30gcGxhdGZvcm0gW2lPU10gLSBUaGUgcGxhdGZvcm0gbmFtZSwgZm9yIGV4YW1wbGUgJ3dhdGNoT1MnLlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgY29ycmVzcG9uZGluZyBydW50aW1lIG5hbWUgZm9yIHRoZSBnaXZlblxuICogICAgICAgICAgICAgICAgICBwbGF0Zm9ybSB2ZXJzaW9uLlxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRSdW50aW1lRm9yUGxhdGZvcm1WZXJzaW9uIChwbGF0Zm9ybVZlcnNpb24sIHBsYXRmb3JtID0gJ2lPUycpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7c3Rkb3V0fSA9IGF3YWl0IHNpbUV4ZWMoJ2xpc3QnLCAwLCBbJ3J1bnRpbWVzJ10pO1xuICAgIC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvVXlralFaLzFcbiAgICBjb25zdCBydW50aW1lUmUgPSBuZXcgUmVnRXhwKGAke18uZXNjYXBlUmVnRXhwKHBsYXRmb3JtKX1cXFxccysoXFxcXGQrXFxcXC5cXFxcZCspXFxcXHMrXFxcXCgoXFxcXGQrXFxcXC5cXFxcZCtcXFxcLipcXFxcZCopYCwgJ2knKTtcbiAgICBmb3IgKGNvbnN0IGxpbmUgb2Ygc3Rkb3V0LnNwbGl0KCdcXG4nKSkge1xuICAgICAgY29uc3QgbWF0Y2ggPSBydW50aW1lUmUuZXhlYyhsaW5lKTtcbiAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSA9PT0gcGxhdGZvcm1WZXJzaW9uKSB7XG4gICAgICAgIHJldHVybiBtYXRjaFsyXTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGlnbikge31cblxuICAvLyBpZiBub3RoaW5nIHdhcyBmb3VuZCwgcGFzcyBwbGF0Zm9ybSB2ZXJzaW9uIGJhY2tcbiAgcmV0dXJuIHBsYXRmb3JtVmVyc2lvbjtcbn1cblxuLyoqXG4gKiBHZXRzIGJhc2U2NCBzY3JlZW5zaG90IGZvciBkZXZpY2UgKHhjb2RlID49IDguMSBvbmx5KS5cbiAqIEl0IGlzIHJlcXVpcmVkIHRoYXQgU2ltdWxhdG9yIGlzIGluIF9ib290ZWRfIHN0YXRlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1ZGlkIC0gVGhlIFVESUQgb2YgYW4gZXhpc3RpbmcgU2ltdWxhdG9yLlxuICogQHJldHVybiB7c3RyaW5nfSBCYXNlNjQtZW5jb2RlZCBTaW11bGF0b3Igc2NyZWVuc2hvdC5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgY29ycmVzcG9uZGluZyBzaW1jdGwgc3ViY29tbWFuZCBjb21tYW5kXG4gKiAgICAgICAgICAgICAgICAgcmV0dXJucyBub24temVybyByZXR1cm4gY29kZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0U2NyZWVuc2hvdCAodWRpZCkge1xuICBsZXQgcGF0aFRvU2NyZWVuc2hvdFBuZyA9IGF3YWl0IHRlbXBEaXIucGF0aCh7cHJlZml4OiBgc2NyZWVuc2hvdC0ke3VkaWR9YCwgc3VmZml4OiAnLnBuZyd9KTtcbiAgYXdhaXQgc2ltRXhlYygnaW8nLCAwLCBbdWRpZCwgJ3NjcmVlbnNob3QnLCBwYXRoVG9TY3JlZW5zaG90UG5nXSk7XG4gIGxldCBzY3JlZW5zaG90SW1nID0gYXdhaXQgZnMucmVhZEZpbGUocGF0aFRvU2NyZWVuc2hvdFBuZyk7XG4gIGF3YWl0IGZzLnJpbXJhZihwYXRoVG9TY3JlZW5zaG90UG5nKTtcbiAgcmV0dXJuIHNjcmVlbnNob3RJbWcudG9TdHJpbmcoJ2Jhc2U2NCcpO1xufVxuXG4vKipcbiAqIFNldCB0aGUgY29udGVudCBvZiBTaW11bGF0b3IgcGFzdGVib2FyZCAoeGNvZGUgPj0gOC4xIG9ubHkpLlxuICogSXQgaXMgcmVxdWlyZWQgdGhhdCBTaW11bGF0b3IgaXMgaW4gX2Jvb3RlZF8gc3RhdGUuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVkaWQgLSBEZXZpY2UgVURJRC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBjb250ZW50IC0gVGhlIGFjdHVhbCBzdHJpbmcgY29udGVudCB0byBiZSBzZXQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZW5jb2RpbmcgWyd1dGYtOCddIC0gVGhlIGVuY29kaW5nIG9mIHRoZSBnaXZlbiBwYXN0ZWJvYXJkIGNvbnRlbnQuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVVRGLTggYnkgZGVmYXVsdC5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgY29ycmVzcG9uZGluZyBzaW1jdGwgc3ViY29tbWFuZCBjb21tYW5kXG4gKiAgICAgICAgICAgICAgICAgcmV0dXJucyBub24temVybyByZXR1cm4gY29kZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gc2V0UGFzdGVib2FyZCAodWRpZCwgY29udGVudCwgZW5jb2RpbmcgPSAndXRmLTgnKSB7XG4gIGNvbnN0IHBiQ29weVN1YnByb2Nlc3MgPSBuZXcgU3ViUHJvY2VzcygneGNydW4nLCBbJ3NpbWN0bCcsICdwYmNvcHknLCB1ZGlkXSk7XG4gIGF3YWl0IHBiQ29weVN1YnByb2Nlc3Muc3RhcnQoMCk7XG4gIGNvbnN0IGV4aXRDb2RlVmVyaWZpZXIgPSBwYkNvcHlTdWJwcm9jZXNzLmpvaW4oKTtcbiAgY29uc3Qgc3RkaW4gPSBwYkNvcHlTdWJwcm9jZXNzLnByb2Muc3RkaW47XG4gIHN0ZGluLnNldEVuY29kaW5nKGVuY29kaW5nKTtcbiAgc3RkaW4ud3JpdGUoY29udGVudCk7XG4gIHN0ZGluLmVuZCgpO1xuICBhd2FpdCBleGl0Q29kZVZlcmlmaWVyO1xufVxuXG4vKipcbiAqIEdldCB0aGUgY29udGVudCBvZiBTaW11bGF0b3IgcGFzdGVib2FyZCAoeGNvZGUgPj0gOC4xIG9ubHkpLlxuICogSXQgaXMgcmVxdWlyZWQgdGhhdCBTaW11bGF0b3IgaXMgaW4gX2Jvb3RlZF8gc3RhdGUuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVkaWQgLSBEZXZpY2UgVURJRC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBlbmNvZGluZyBbJ3V0Zi04J10gLSBUaGUgZW5jb2Rpbmcgb2YgdGhlIHJldHVybmVkIHBhc3RlYm9hcmQgY29udGVudC5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBVVEYtOCBieSBkZWZhdWx0LlxuICogQHJldHVybiB7c3RyaW5nfSBDdXJyZW50IGNvbnRlbnQgb2YgU2ltdWxhdG9yIHBhc3RlYm9hcmQgb3IgYW4gZW1wdHkgc3RyaW5nLlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZSBjb3JyZXNwb25kaW5nIHNpbWN0bCBzdWJjb21tYW5kIGNvbW1hbmRcbiAqICAgICAgICAgICAgICAgICByZXR1cm5zIG5vbi16ZXJvIHJldHVybiBjb2RlLlxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRQYXN0ZWJvYXJkICh1ZGlkLCBlbmNvZGluZyA9ICd1dGYtOCcpIHtcbiAgY29uc3QgYXJncyA9IFsnc2ltY3RsJywgJ3BicGFzdGUnLCB1ZGlkXTtcbiAgdHJ5IHtcbiAgICBjb25zdCB7c3Rkb3V0fSA9IGF3YWl0IGV4ZWMoJ3hjcnVuJywgYXJncywge3RpbWVvdXQ6IDAsIGVuY29kaW5nfSk7XG4gICAgcmV0dXJuIHN0ZG91dDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChlLnN0ZGVycikge1xuICAgICAgbG9nLmVycm9yQW5kVGhyb3coYEVycm9yIHJ1bm5pbmcgJ3hjcnVuICR7YXJncy5qb2luKCcgJyl9JzogJHtlLnN0ZGVyci50cmltKCl9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZy5lcnJvckFuZFRocm93KGUpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEdldCB0aGUgbGlzdCBvZiBkZXZpY2UgdHlwZXMgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IFhjb2RlIGluc3RhbGxhdGlvblxuICpcbiAqIEByZXR1cm4ge0FycmF5PHN0cmluZz59IExpc3Qgb2YgdGhlIHR5cGVzIG9mIGRldmljZXMgYXZhaWxhYmxlXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIGNvcnJlc3BvbmRpbmcgc2ltY3RsIGNvbW1hbmQgZmFpbHNcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0RGV2aWNlVHlwZXMgKCkge1xuICB0cnkge1xuICAgIGNvbnN0IHtzdGRvdXR9ID0gYXdhaXQgc2ltRXhlYygnbGlzdCcsIDAsIFsnZGV2aWNldHlwZXMnLCAnLWonXSk7XG4gICAgLypcbiAgICAgKiBKU09OIHdpbGwgYmUgbGlrZTpcbiAgICAgKiAgIHtcbiAgICAgKiAgICAgXCJkZXZpY2V0eXBlc1wiIDogW1xuICAgICAqICAgICAgIHtcbiAgICAgKiAgICAgICAgIFwibmFtZVwiIDogXCJpUGhvbmUgNHNcIixcbiAgICAgKiAgICAgICAgIFwiaWRlbnRpZmllclwiIDogXCJjb20uYXBwbGUuQ29yZVNpbXVsYXRvci5TaW1EZXZpY2VUeXBlLmlQaG9uZS00c1wiXG4gICAgICogICAgICAgfSxcbiAgICAgKiAgICAgICAuLi5cbiAgICAgKiAgIH1cbiAgICAgKi9cbiAgICBjb25zdCBkZXZpY2VUeXBlcyA9IEpTT04ucGFyc2Uoc3Rkb3V0LnRyaW0oKSk7XG4gICAgcmV0dXJuIGRldmljZVR5cGVzLmRldmljZXR5cGVzLm1hcCgodHlwZSkgPT4gdHlwZS5uYW1lKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbGV0IG1zZyA9IGBVbmFibGUgdG8gZ2V0IGxpc3Qgb2YgZGV2aWNlIHR5cGVzOiAke2Vyci5tZXNzYWdlfWA7XG4gICAgaWYgKGVyci5zdGRlcnIpIHtcbiAgICAgIG1zZyA9IGAke21zZ30uIFN0ZGVycjogJHtlcnIuc3RkZXJyfWA7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICB9XG59XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gQm9vdE1vbml0b3JPcHRpb25zXG4gKiBAcHJvcGVydHkgez9udW1iZXJ9IHRpbWVvdXQgWzI0MDAwMF0gLSBTaW11bGF0b3IgYm9vdGluZyB0aW1lb3V0IGluIG1zLlxuICogQHByb3BlcnR5IHs/RnVuY3Rpb259IG9uV2FpdGluZ0RhdGFNaWdyYXRpb24gLSBUaGlzIGV2ZW50IGlzIGZpcmVkIHdoZW4gZGF0YSBtaWdyYXRpb24gc3RhZ2Ugc3RhcnRzLlxuICogQHByb3BlcnR5IHs/RnVuY3Rpb259IG9uV2FpdGluZ1N5c3RlbUFwcCAtIFRoaXMgZXZlbnQgaXMgZmlyZWQgd2hlbiBzeXN0ZW0gYXBwIHdhaXQgc3RhZ2Ugc3RhcnRzLlxuICogQHByb3BlcnR5IHs/RnVuY3Rpb259IG9uRmluaXNoZWQgLSBUaGlzIGV2ZW50IGlzIGZpcmVkIHdoZW4gU2ltdWxhdG9yIGlzIGZ1bGx5IGJvb3RlZC5cbiAqIEBwcm9wZXJ0eSB7P0Z1bmN0aW9ufSBvbkVycm9yIC0gVGhpcyBldmVudCBpcyBmaXJlZCB3aGVuIHRoZXJlIHdhcyBhbiBlcnJvciB3aGlsZSBtb25pdG9yaW5nIHRoZSBib290aW5nIHByb2Nlc3NcbiAqIG9yIHdoZW4gdGhlIHRpbWVvdXQgaGFzIGV4cGlyZWQuXG4gKi9cblxuLyoqXG4gKiBTdGFydCBtb25pdG9yaW5nIGZvciBib290IHN0YXR1cyBvZiB0aGUgcGFydGljdWxhciBTaW11bGF0b3IuXG4gKiBJZiBvbkZpbmlzaGVkIHByb3BlcnR5IGlzIG5vdCBzZXQgdGhlbiB0aGUgbWV0aG9kIHdpbGwgYmxvY2tcbiAqIHVudGlsIFNpbXVsYXRvciBib290aW5nIGlzIGNvbXBsZXRlZC5cbiAqIFRoZSBtZXRob2QgaXMgb25seSBhdmFpbGFibGUgc2luY2UgWGNvZGU4LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1ZGlkIC0gRGV2aWNlIFVESUQuXG4gKiBAcGFyYW0gez9Cb290TW9uaXRvck9wdGlvbnN9IG9wdHMgLSBNb25pdG9yaW5nIG9wdGlvbnMuXG4gKiBAcmV0dXJucyB7U3ViUHJvY2Vzc30gVGhlIGluc3RhbmNlIG9mIHRoZSBjb3JyZXNwb25kaW5nIG1vbml0b3JpbmcgcHJvY2Vzcy5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgU2ltdWxhdG9yIGZhaWxzIHRvIGZpbmlzaCBib290aW5nIHdpdGhpbiB0aGUgZ2l2ZW4gdGltZW91dCBhbmQgb25GaW5pc2hlZFxuICogcHJvcGVydHkgaXMgbm90IHNldC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gc3RhcnRCb290TW9uaXRvciAodWRpZCwgb3B0cyA9IHt9KSB7XG4gIGNvbnN0IHtcbiAgICB0aW1lb3V0ID0gMjQwMDAwLFxuICAgIG9uV2FpdGluZ0RhdGFNaWdyYXRpb24sXG4gICAgb25XYWl0aW5nU3lzdGVtQXBwLFxuICAgIG9uRmluaXNoZWQsXG4gICAgb25FcnJvcixcbiAgfSA9IG9wdHM7XG5cbiAgbGV0IHN0YXR1cyA9ICcnO1xuICBsZXQgaXNCb290aW5nRmluaXNoZWQgPSBmYWxzZTtcbiAgbGV0IGVycm9yID0gbnVsbDtcbiAgbGV0IHRpbWVvdXRIYW5kbGVyID0gbnVsbDtcbiAgY29uc3QgYm9vdE1vbml0b3IgPSBhd2FpdCBzaW1TdWJQcm9jZXNzKCdib290c3RhdHVzJywgMCwgW3VkaWRdKTtcbiAgYm9vdE1vbml0b3Iub24oJ291dHB1dCcsIChzdGRvdXQsIHN0ZGVycikgPT4ge1xuICAgIHN0YXR1cyArPSBzdGRvdXQgfHwgc3RkZXJyO1xuICAgIGlmIChzdGRvdXQpIHtcbiAgICAgIGlmIChzdGRvdXQuaW5jbHVkZXMoJ1dhaXRpbmcgb24gRGF0YSBNaWdyYXRpb24nKSAmJiBvbldhaXRpbmdEYXRhTWlncmF0aW9uKSB7XG4gICAgICAgIG9uV2FpdGluZ0RhdGFNaWdyYXRpb24oKTtcbiAgICAgIH0gZWxzZSBpZiAoc3Rkb3V0LmluY2x1ZGVzKCdXYWl0aW5nIG9uIFN5c3RlbSBBcHAnKSAmJiBvbldhaXRpbmdTeXN0ZW1BcHApIHtcbiAgICAgICAgb25XYWl0aW5nU3lzdGVtQXBwKCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgYm9vdE1vbml0b3Iub24oJ2V4aXQnLCAoY29kZSwgc2lnbmFsKSA9PiB7XG4gICAgaWYgKHRpbWVvdXRIYW5kbGVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dEhhbmRsZXIpO1xuICAgIH1cbiAgICBpZiAoY29kZSA9PT0gMCkge1xuICAgICAgaWYgKG9uRmluaXNoZWQpIHtcbiAgICAgICAgb25GaW5pc2hlZCgpO1xuICAgICAgfVxuICAgICAgaXNCb290aW5nRmluaXNoZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0dXMgPSBzdGF0dXMgfHwgc2lnbmFsO1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3Ioc3RhdHVzKTtcbiAgICAgIGlmIChvbkVycm9yKSB7XG4gICAgICAgIG9uRXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIGF3YWl0IGJvb3RNb25pdG9yLnN0YXJ0KDApO1xuICBjb25zdCBzdG9wTW9uaXRvciA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAoYm9vdE1vbml0b3IuaXNSdW5uaW5nKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBib290TW9uaXRvci5zdG9wKCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGxvZy53YXJuKGUubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBjb25zdCB0aW1lU3RhcnRlZCA9IHByb2Nlc3MuaHJ0aW1lKCk7XG4gIGlmIChvbkZpbmlzaGVkKSB7XG4gICAgdGltZW91dEhhbmRsZXIgPSBzZXRUaW1lb3V0KHN0b3BNb25pdG9yLCB0aW1lb3V0KTtcbiAgfSBlbHNlIHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgd2FpdEZvckNvbmRpdGlvbigoKSA9PiB7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc0Jvb3RpbmdGaW5pc2hlZDtcbiAgICAgIH0sIHt3YWl0TXM6IHRpbWVvdXQsIGludGVydmFsTXM6IDUwMH0pO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgYXdhaXQgc3RvcE1vbml0b3IoKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIHNpbXVsYXRvciAke3VkaWR9IGhhcyBmYWlsZWQgdG8gZmluaXNoIGJvb3RpbmcgYWZ0ZXIgJHtwcm9jZXNzLmhydGltZSh0aW1lU3RhcnRlZClbMF19cy4gYCArXG4gICAgICAgIGBPcmlnaW5hbCBzdGF0dXM6ICR7c3RhdHVzfWApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYm9vdE1vbml0b3I7XG59XG5cblxuZXhwb3J0IHtcbiAgaW5zdGFsbEFwcCwgcmVtb3ZlQXBwLCBsYXVuY2gsIHNwYXduLCBzcGF3blN1YlByb2Nlc3MsIG9wZW5VcmwsIHRlcm1pbmF0ZSxcbiAgc2h1dGRvd24sIGNyZWF0ZURldmljZSwgZ2V0QXBwQ29udGFpbmVyLCBnZXRTY3JlZW5zaG90LCBkZWxldGVEZXZpY2UsXG4gIGVyYXNlRGV2aWNlLCBnZXREZXZpY2VzLCBnZXRSdW50aW1lRm9yUGxhdGZvcm1WZXJzaW9uLCBib290RGV2aWNlLFxuICBzZXRQYXN0ZWJvYXJkLCBnZXRQYXN0ZWJvYXJkLCBhZGRNZWRpYSwgYXBwSW5mbywgZ2V0RGV2aWNlVHlwZXMsXG4gIHN0YXJ0Qm9vdE1vbml0b3IsXG59O1xuIl0sImZpbGUiOiJsaWIvc2ltY3RsLmpzIiwic291cmNlUm9vdCI6Ii4uLy4uIn0=
