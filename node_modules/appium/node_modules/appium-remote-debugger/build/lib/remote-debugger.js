"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.RPC_RESPONSE_TIMEOUT_MS = exports.REMOTE_DEBUGGER_PORT = exports.DEBUGGER_TYPES = exports.RemoteDebugger = void 0;

require("source-map-support/register");

var _events = _interopRequireDefault(require("events"));

var _logger = _interopRequireDefault(require("./logger"));

var _appiumBaseDriver = require("appium-base-driver");

var _remoteDebuggerRpcClient = _interopRequireDefault(require("./remote-debugger-rpc-client"));

var _messageHandlers = _interopRequireDefault(require("./message-handlers"));

var _helpers = require("./helpers");

var _appiumSupport = require("appium-support");

var _lodash = _interopRequireDefault(require("lodash"));

var _bluebird = _interopRequireDefault(require("bluebird"));

const DEBUGGER_TYPES = {
  webkit: 1,
  webinspector: 2
};
exports.DEBUGGER_TYPES = DEBUGGER_TYPES;
const SELECT_APP_RETRIES = 20;
const REMOTE_DEBUGGER_PORT = 27753;
exports.REMOTE_DEBUGGER_PORT = REMOTE_DEBUGGER_PORT;
const RPC_RESPONSE_TIMEOUT_MS = 5000;
exports.RPC_RESPONSE_TIMEOUT_MS = RPC_RESPONSE_TIMEOUT_MS;
const PAGE_READY_TIMEOUT = 5000;
const RESPONSE_LOG_LENGTH = 100;
const GARBAGE_COLLECT_TIMEOUT = 5000;

class RemoteDebugger extends _events.default.EventEmitter {
  constructor(opts = {}) {
    super();
    const {
      bundleId,
      platformVersion,
      debuggerType = DEBUGGER_TYPES.webinspector,
      isSafari = true,
      useNewSafari = false,
      pageLoadMs,
      host,
      port = REMOTE_DEBUGGER_PORT,
      socketPath,
      pageReadyTimeout = PAGE_READY_TIMEOUT,
      remoteDebugProxy,
      garbageCollectOnExecute = false
    } = opts;
    this.bundleId = bundleId;
    this.platformVersion = platformVersion;
    this.isSafari = isSafari;
    this.debuggerType = debuggerType;

    if (this.debuggerType === DEBUGGER_TYPES.webinspector) {
      this.useNewSafari = useNewSafari;
      this.pageLoadMs = pageLoadMs;

      _logger.default.debug(`useNewSafari --> ${this.useNewSafari}`);
    }

    this.garbageCollectOnExecute = garbageCollectOnExecute;
    this.host = host;
    this.port = port;
    this.socketPath = socketPath;
    this.remoteDebugProxy = remoteDebugProxy;
    this.pageReadyTimeout = pageReadyTimeout;
  }

  setup() {
    this.appDict = {};
    this.appIdKey = null;
    this.pageIdKey = null;
    this.pageLoading = false;
    this._navigatingToPage = false;
    this.specialCbs = {
      '_rpc_reportIdentifier:': _lodash.default.noop,
      '_rpc_forwardGetListing:': this.onPageChange.bind(this),
      '_rpc_reportConnectedApplicationList:': _lodash.default.noop,
      '_rpc_applicationConnected:': this.onAppConnect.bind(this),
      '_rpc_applicationDisconnected:': this.onAppDisconnect.bind(this),
      '_rpc_applicationUpdated:': this.onAppUpdate.bind(this),
      '_rpc_reportConnectedDriverList:': this.onReportDriverList.bind(this),
      pageLoad: this.pageLoad.bind(this),
      frameDetached: this.frameDetached.bind(this),
      targetCreated: this.onTargetCreated.bind(this),
      targetDestroyed: this.onTargetDestroyed.bind(this)
    };
    this.rpcClient = null;
  }

  teardown() {
    _logger.default.debug('Cleaning up listeners');

    this.appDict = {};
    this.appIdKey = null;
    this.pageIdKey = null;
    this.pageLoading = false;
    this.specialCbs = {};
    this.rpcClient = null;
    this.removeAllListeners(RemoteDebugger.EVENT_PAGE_CHANGE);
    this.removeAllListeners(RemoteDebugger.EVENT_DISCONNECT);
  }

  async connect() {
    this.setup();
    this.rpcClient = new _remoteDebuggerRpcClient.default({
      platformVersion: this.platformVersion,
      isSafari: this.isSafari,
      host: this.host,
      port: this.port,
      socketPath: this.socketPath,
      specialMessageHandlers: this.specialCbs,
      messageProxy: this.remoteDebugProxy
    });
    await this.rpcClient.connect();

    try {
      const appInfo = await this.setConnectionKey();

      _logger.default.debug('Connected to application');

      return appInfo;
    } catch (err) {
      await this.disconnect();
      return null;
    }
  }

  async disconnect() {
    await this.rpcClient.disconnect();
    this.emit(RemoteDebugger.EVENT_DISCONNECT, true);
    this.teardown();
  }

  isConnected() {
    return !!(this.rpcClient && this.rpcClient.isConnected());
  }

  async setConnectionKey() {
    return await new _bluebird.default((resolve, reject) => {
      let connectCb = apps => {
        if (_lodash.default.isUndefined(apps) || _lodash.default.keys(apps).length === 0) {
          _logger.default.debug('Received no apps from remote debugger. Unable to connect.');

          return resolve(this.appDict);
        }

        let newDict = {};

        for (const dict of _lodash.default.values(apps)) {
          let [id, entry] = (0, _helpers.appInfoFromDict)(dict);
          newDict[id] = entry;
        }

        _lodash.default.defaults(this.appDict, newDict);

        resolve(newDict);
      };

      this.rpcClient.setSpecialMessageHandler('_rpc_reportConnectedApplicationList:', reject, connectCb);

      _logger.default.debug('Sending connection key request');

      return (async () => {
        let [simNameKey, simBuildKey, simPlatformVersion] = await this.rpcClient.send('setConnectionKey');

        _logger.default.debug(`Sim name: ${simNameKey}`);

        _logger.default.debug(`Sim build: ${simBuildKey}`);

        _logger.default.debug(`Sim platform version: ${simPlatformVersion}`);
      })();
    });
  }

  updateAppsWithDict(dict) {
    this.appDict = this.appDict || {};
    let [id, entry] = (0, _helpers.appInfoFromDict)(dict);

    if (this.appDict[id]) {
      entry.pageArray = this.appDict[id].pageArray;
    }

    this.appDict[id] = entry;

    if (_lodash.default.isUndefined(entry.pageArray)) {
      entry.pageArray = (0, _helpers.deferredPromise)();
    }

    if (!this.appIdKey) {
      this.appIdKey = (0, _helpers.getDebuggerAppKey)(this.bundleId, this.platformVersion, this.appDict);
    }
  }

  logApplicationDictionary(apps) {
    function getValueString(key, value) {
      if (_lodash.default.isFunction(value)) {
        return '[Function]';
      }

      if (key === 'pageDict' && !_lodash.default.isArray(value)) {
        return `'Waiting for data'`;
      }

      return JSON.stringify(value);
    }

    _logger.default.debug('Current applications available:');

    for (const [app, info] of _lodash.default.toPairs(apps)) {
      _logger.default.debug(`    Application: '${app}'`);

      for (const [key, value] of _lodash.default.toPairs(info)) {
        if (key === 'pageArray' && Array.isArray(value) && value.length) {
          _logger.default.debug(`        ${key}:`);

          for (const page of value) {
            let prefix = '- ';

            for (const [k, v] of _lodash.default.toPairs(page)) {
              _logger.default.debug(`          ${prefix}${k}: ${JSON.stringify(v)}`);

              prefix = '  ';
            }
          }
        } else {
          const valueString = getValueString(key, value);

          _logger.default.debug(`        ${key}: ${valueString}`);
        }
      }
    }
  }

  async selectApp(currentUrl = null, maxTries = SELECT_APP_RETRIES, ignoreAboutBlankUrl = false) {
    _logger.default.debug('Selecting application');

    if (!this.appDict || _lodash.default.keys(this.appDict).length === 0) {
      _logger.default.debug('No applications currently connected.');

      return [];
    }

    let pageDict, appIdKey;

    appLoop: for (let i = 0; i < maxTries; i++) {
      this.logApplicationDictionary(this.appDict);
      let possibleAppIds = (0, _helpers.getPossibleDebuggerAppKeys)(this.bundleId, this.platformVersion, this.appDict);

      _logger.default.debug(`Trying out the possible app ids: ${possibleAppIds.join(', ')}`);

      for (const attemptedAppIdKey of possibleAppIds) {
        try {
          _logger.default.debug(`Selecting app ${attemptedAppIdKey} (try #${i + 1} of ${maxTries})`);

          [appIdKey, pageDict] = await this.rpcClient.selectApp(attemptedAppIdKey, this.onAppConnect.bind(this));

          if (_lodash.default.isEmpty(pageDict)) {
            _logger.default.debug('Empty page dictionary received. Trying again.');

            continue;
          }

          this.appDict[appIdKey].pageArray = (0, _helpers.pageArrayFromDict)(pageDict);
          let found = false;

          dictLoop: for (const appDict of _lodash.default.values(this.appDict)) {
            if (found) break;

            if (!appDict || !appDict.pageArray) {
              continue;
            }

            if (appDict.pageArray.promise) {
              try {
                await _bluebird.default.resolve(appDict.pageArray.promise).timeout(10000);
              } catch (err) {
                if (!(err instanceof _bluebird.default.TimeoutError)) {
                  throw err;
                }

                continue;
              }
            }

            for (const dict of appDict.pageArray || []) {
              if ((!ignoreAboutBlankUrl || dict.url !== 'about:blank') && (!currentUrl || dict.url === currentUrl || dict.url === `${currentUrl}/`)) {
                appIdKey = appDict.id;
                pageDict = dict;
                found = true;
                break dictLoop;
              }
            }
          }

          if (!found) {
            if (currentUrl) {
              _logger.default.debug(`Received app, but expected url ('${currentUrl}') was not found. Trying again.`);
            } else {
              _logger.default.debug('Received app, but no match was found. Trying again.');
            }

            pageDict = null;
            continue;
          }

          break appLoop;
        } catch (err) {
          _logger.default.debug(`Error checking application: '${err.message}'. Retrying connection`);
        }
      }
    }

    if (!pageDict) {
      _logger.default.errorAndThrow(`Could not connect to a valid app after ${maxTries} tries.`);
    }

    if (this.appIdKey !== appIdKey) {
      _logger.default.debug(`Received altered app id, updating from '${this.appIdKey}' to '${appIdKey}'`);

      this.appIdKey = appIdKey;
    }

    const pagePromises = Object.values(this.appDict).filter(app => !!app.pageArray && !!app.pageArray.promise).map(app => app.pageArray.promise);

    if (pagePromises.length) {
      _logger.default.debug(`Waiting for ${pagePromises.length} pages to be fulfilled`);

      await _bluebird.default.any([_bluebird.default.delay(30000), _bluebird.default.all(pagePromises)]);
    }

    const pageArray = _lodash.default.isEmpty(this.appDict[appIdKey].pageArray) ? (0, _helpers.pageArrayFromDict)(pageDict) : this.appDict[appIdKey].pageArray;

    _logger.default.debug(`Finally selecting app ${this.appIdKey}: ${(0, _helpers.simpleStringify)(pageArray)}`);

    let fullPageArray = [];

    for (const [app, info] of _lodash.default.toPairs(this.appDict)) {
      if (!_lodash.default.isArray(info.pageArray)) continue;
      let id = app.replace('PID:', '');

      for (const page of info.pageArray) {
        if (page.url && (!ignoreAboutBlankUrl || page.url !== 'about:blank') && (!currentUrl || page.url === currentUrl || page.url === `${currentUrl}/`)) {
          let pageDict = _lodash.default.clone(page);

          pageDict.id = `${id}.${pageDict.id}`;
          fullPageArray.push(pageDict);
        }
      }
    }

    return fullPageArray;
  }

  async selectPage(appIdKey, pageIdKey, skipReadyCheck = false) {
    this.appIdKey = `PID:${appIdKey}`;
    this.pageIdKey = pageIdKey;

    _logger.default.debug(`Selecting page '${pageIdKey}' on app '${this.appIdKey}' and forwarding socket setup`);

    await this.rpcClient.send('setSenderKey', {
      appIdKey: this.appIdKey,
      pageIdKey: this.pageIdKey
    });

    _logger.default.debug('Sender key set');

    await this.rpcClient.send('enablePage', {
      appIdKey: this.appIdKey,
      pageIdKey: this.pageIdKey,
      debuggerType: this.debuggerType,
      targetId: 'page-1'
    });

    _logger.default.debug('Enabled activity on page');

    if (!skipReadyCheck && !(await this.checkPageIsReady())) {
      await this.pageUnload();
    }
  }

  async executeAtom(atom, args, frames) {
    if (!this.rpcClient.connected) throw new Error('Remote debugger is not connected');

    _logger.default.debug(`Executing atom '${atom}'`);

    const script = await (0, _helpers.getScriptForAtom)(atom, args, frames);
    const value = await this.execute(script, true);

    _logger.default.debug(`Received result for atom '${atom}' execution: ${_lodash.default.truncate((0, _helpers.simpleStringify)(value), {
      length: RESPONSE_LOG_LENGTH
    })}`);

    return value;
  }

  async executeAtomAsync(atom, args, frames, responseUrl) {
    let asyncCallBack = `function (res) { xmlHttp = new XMLHttpRequest(); ` + `xmlHttp.open('POST', '${responseUrl}', true);` + `xmlHttp.setRequestHeader('Content-type','application/json'); ` + `xmlHttp.send(res); }`;
    let script = await (0, _helpers.getScriptForAtom)(atom, args, frames, asyncCallBack);
    await this.execute(script);
  }

  frameDetached() {
    this.emit(RemoteDebugger.EVENT_FRAMES_DETACHED);
  }

  async pageLoad(startPageLoadMs, pageLoadVerifyHook) {
    let timeoutMs = 500;
    let start = startPageLoadMs || Date.now();

    _logger.default.debug('Page loaded, verifying whether ready');

    const verify = async () => {
      this.pageLoadDelay = _appiumSupport.util.cancellableDelay(timeoutMs);

      try {
        await this.pageLoadDelay;
      } catch (err) {
        if (err instanceof _bluebird.default.CancellationError) {
          return;
        }
      }

      if (!this.appIdKey) {
        _logger.default.debug('Not connected to an application. Ignoring page load');

        return;
      }

      if (_lodash.default.isFunction(pageLoadVerifyHook)) {
        await pageLoadVerifyHook();
      }

      const ready = await this.checkPageIsReady();

      if (ready || this.pageLoadMs > 0 && start + this.pageLoadMs < Date.now()) {
        _logger.default.debug('Page is ready');

        this.pageLoading = false;
      } else {
        _logger.default.debug('Page was not ready, retrying');

        await verify();
      }
    };

    await verify();
  }

  cancelPageLoad() {
    _logger.default.debug('Unregistering from page readiness notifications');

    this.pageLoading = false;

    if (this.pageLoadDelay) {
      this.pageLoadDelay.cancel();
    }
  }

  async pageUnload() {
    _logger.default.debug('Page unloading');

    this.pageLoading = true;
    await this.waitForDom();
  }

  async waitForDom(startPageLoadMs, pageLoadVerifyHook) {
    _logger.default.debug('Waiting for dom...');

    await this.pageLoad(startPageLoadMs, pageLoadVerifyHook);
  }

  async checkPageIsReady() {
    const errors = (0, _helpers.checkParams)({
      appIdKey: this.appIdKey
    });
    if (errors) throw new Error(errors);

    _logger.default.debug('Checking document readyState');

    const readyCmd = '(function (){ return document.readyState; })()';
    let readyState = 'loading';

    try {
      readyState = await _bluebird.default.resolve(this.execute(readyCmd, true)).timeout(this.pageReadyTimeout);
    } catch (err) {
      if (!(err instanceof _bluebird.default.TimeoutError)) {
        throw err;
      }

      _logger.default.debug(`Page readiness check timed out after ${this.pageReadyTimeout}ms`);

      return false;
    }

    _logger.default.debug(`Document readyState is '${readyState}'`);

    return readyState === 'complete';
  }

  async navToUrl(url, pageLoadVerifyHook) {
    if (this.debuggerType === DEBUGGER_TYPES.webinspector) {
      const errors = (0, _helpers.checkParams)({
        appIdKey: this.appIdKey,
        pageIdKey: this.pageIdKey
      });
      if (errors) throw new Error(errors);
    }

    this._navigatingToPage = true;

    try {
      _logger.default.debug(`Navigating to new URL: '${url}'`);

      await this.rpcClient.send('setUrl', {
        url,
        appIdKey: this.appIdKey,
        pageIdKey: this.pageIdKey,
        debuggerType: this.debuggerType
      });

      if (!this.useNewSafari) {
        await _bluebird.default.delay(1000);
      }

      if (this.debuggerType === DEBUGGER_TYPES.webinspector) {
        await this.waitForFrameNavigated();
      }

      await this.waitForDom(Date.now(), pageLoadVerifyHook);
    } finally {
      this._navigatingToPage = false;
    }
  }

  async waitForFrameNavigated() {
    return await new _bluebird.default(async (resolve, reject) => {
      _logger.default.debug('Waiting for frame navigated message...');

      let startMs = Date.now();

      let navEventListener = value => {
        _logger.default.debug(`Frame navigated in ${(Date.now() - startMs) / 1000} sec from source: ${value}`);

        if (this.navigationDelay) {
          this.navigationDelay.cancel();
        }

        resolve(value);
      };

      this.rpcClient.setSpecialMessageHandler('Page.frameNavigated', reject, navEventListener);

      if (!this.useNewSafari || this.pageLoadMs >= 0) {
        let timeout = this.useNewSafari ? this.pageLoadMs : 500;
        this.navigationDelay = _appiumSupport.util.cancellableDelay(timeout);

        try {
          await this.navigationDelay;
          navEventListener('timeout');
        } catch (err) {}
      }
    });
  }

  async startTimeline(fn) {
    _logger.default.debug('Starting to record the timeline');

    this.rpcClient.setTimelineEventHandler(fn);
    return await this.rpcClient.send('startTimeline', {
      appIdKey: this.appIdKey,
      pageIdKey: this.pageIdKey,
      debuggerType: this.debuggerType
    });
  }

  async stopTimeline() {
    _logger.default.debug('Stopping to record the timeline');

    await this.rpcClient.send('stopTimeline', {
      appIdKey: this.appIdKey,
      pageIdKey: this.pageIdKey,
      debuggerType: this.debuggerType
    });
  }

  async startConsole(fn) {
    _logger.default.debug('Starting to listen for JavaScript console');

    this.rpcClient.setConsoleLogEventHandler(fn);
    return await this.rpcClient.send('startConsole', {
      appIdKey: this.appIdKey,
      pageIdKey: this.pageIdKey,
      debuggerType: this.debuggerType
    });
  }

  async stopConsole() {
    _logger.default.debug('Stopping to listen for JavaScript console');

    await this.rpcClient.send('stopConsole', {
      appIdKey: this.appIdKey,
      pageIdKey: this.pageIdKey,
      debuggerType: this.debuggerType
    });
  }

  async startNetwork(fn) {
    _logger.default.debug('Starting to listen for network events');

    this.rpcClient.setNetworkLogEventHandler(fn);
    return await this.rpcClient.send('startNetwork', {
      appIdKey: this.appIdKey,
      pageIdKey: this.pageIdKey,
      debuggerType: this.debuggerType
    });
  }

  async stopNetwork() {
    _logger.default.debug('Stopping to listen for network events');

    await this.rpcClient.send('stopNetwork', {
      appIdKey: this.appIdKey,
      pageIdKey: this.pageIdKey,
      debuggerType: this.debuggerType
    });
  }

  async execute(command, override) {
    if (this.pageLoading && !override) {
      _logger.default.debug('Trying to execute but page is not loaded.');

      await this.waitForDom();
    }

    if (this.debuggerType === DEBUGGER_TYPES.webinspector) {
      let errors = (0, _helpers.checkParams)({
        appIdKey: this.appIdKey,
        pageIdKey: this.pageIdKey
      });
      if (errors) throw new Error(errors);
    }

    if (this.garbageCollectOnExecute) {
      await this.garbageCollect();
    }

    _logger.default.debug(`Sending javascript command ${_lodash.default.truncate(command, {
      length: 50
    })}`);

    let res = await this.rpcClient.send('sendJSCommand', {
      command,
      appIdKey: this.appIdKey,
      pageIdKey: this.pageIdKey,
      debuggerType: this.debuggerType
    });
    return this.convertResult(res);
  }

  async callFunction(objId, fn, args) {
    let errors = (0, _helpers.checkParams)({
      appIdKey: this.appIdKey,
      pageIdKey: this.pageIdKey
    });
    if (errors) throw new Error(errors);

    if (this.garbageCollectOnExecute) {
      await this.garbageCollect();
    }

    _logger.default.debug('Calling javascript function');

    const res = await this.rpcClient.send('callJSFunction', {
      objId,
      fn,
      args,
      appIdKey: this.appIdKey,
      pageIdKey: this.pageIdKey,
      debuggerType: this.debuggerType
    });
    return this.convertResult(res);
  }

  convertResult(res) {
    if (_lodash.default.isUndefined(res)) {
      throw new Error(`Did not get OK result from remote debugger. Result was: ${_lodash.default.truncate((0, _helpers.simpleStringify)(res), {
        length: RESPONSE_LOG_LENGTH
      })}`);
    } else if (_lodash.default.isString(res)) {
      try {
        res = JSON.parse(res);
      } catch (err) {}
    } else if (!_lodash.default.isObject(res)) {
      throw new Error(`Result has unexpected type: (${typeof res}).`);
    }

    if (res.status && res.status !== 0) {
      throw (0, _appiumBaseDriver.errorFromCode)(res.status, res.value.message || res.value);
    }

    return res.hasOwnProperty('value') ? res.value : res;
  }

  allowNavigationWithoutReload(allow = true) {
    if (_lodash.default.isFunction(this.rpcClient.allowNavigationWithoutReload)) {
      this.rpcClient.allowNavigationWithoutReload(allow);
    }
  }

  async getCookies(urls) {
    _logger.default.debug('Getting network cookies');

    return await this.rpcClient.send('getCookies', {
      appIdKey: this.appIdKey,
      pageIdKey: this.pageIdKey,
      debuggerType: this.debuggerType,
      urls
    });
  }

  async deleteCookie(cookieName, url) {
    _logger.default.debug(`Deleting cookie '${cookieName}' on '${url}'`);

    return await this.rpcClient.send('deleteCookie', {
      appIdKey: this.appIdKey,
      pageIdKey: this.pageIdKey,
      debuggerType: this.debuggerType,
      cookieName,
      url
    });
  }

  async garbageCollect(timeoutMs = GARBAGE_COLLECT_TIMEOUT) {
    _logger.default.debug(`Garbage collecting with ${timeoutMs}ms timeout`);

    const errors = (0, _helpers.checkParams)({
      appIdKey: this.appIdKey,
      pageIdKey: this.pageIdKey
    });

    if (errors) {
      _logger.default.debug(`Unable to collect garbage at this time`);

      return;
    }

    await _bluebird.default.resolve(this.rpcClient.send('garbageCollect', {
      appIdKey: this.appIdKey,
      pageIdKey: this.pageIdKey,
      debuggerType: this.debuggerType
    })).timeout(timeoutMs).then(function gcSuccess() {
      _logger.default.debug(`Garbage collection successful`);
    }).catch(function gcError(err) {
      if (err instanceof _bluebird.default.TimeoutError) {
        _logger.default.debug(`Garbage collection timed out after ${timeoutMs}ms`);
      } else {
        _logger.default.debug(`Unable to collect garbage: ${err.message}`);
      }
    });
  }

}

exports.RemoteDebugger = RemoteDebugger;
RemoteDebugger.EVENT_PAGE_CHANGE = 'remote_debugger_page_change';
RemoteDebugger.EVENT_FRAMES_DETACHED = 'remote_debugger_frames_detached';
RemoteDebugger.EVENT_DISCONNECT = 'remote_debugger_disconnect';

for (const [name, handler] of _lodash.default.toPairs(_messageHandlers.default)) {
  RemoteDebugger.prototype[name] = handler;
}require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9yZW1vdGUtZGVidWdnZXIuanMiXSwibmFtZXMiOlsiREVCVUdHRVJfVFlQRVMiLCJ3ZWJraXQiLCJ3ZWJpbnNwZWN0b3IiLCJTRUxFQ1RfQVBQX1JFVFJJRVMiLCJSRU1PVEVfREVCVUdHRVJfUE9SVCIsIlJQQ19SRVNQT05TRV9USU1FT1VUX01TIiwiUEFHRV9SRUFEWV9USU1FT1VUIiwiUkVTUE9OU0VfTE9HX0xFTkdUSCIsIkdBUkJBR0VfQ09MTEVDVF9USU1FT1VUIiwiUmVtb3RlRGVidWdnZXIiLCJldmVudHMiLCJFdmVudEVtaXR0ZXIiLCJjb25zdHJ1Y3RvciIsIm9wdHMiLCJidW5kbGVJZCIsInBsYXRmb3JtVmVyc2lvbiIsImRlYnVnZ2VyVHlwZSIsImlzU2FmYXJpIiwidXNlTmV3U2FmYXJpIiwicGFnZUxvYWRNcyIsImhvc3QiLCJwb3J0Iiwic29ja2V0UGF0aCIsInBhZ2VSZWFkeVRpbWVvdXQiLCJyZW1vdGVEZWJ1Z1Byb3h5IiwiZ2FyYmFnZUNvbGxlY3RPbkV4ZWN1dGUiLCJsb2ciLCJkZWJ1ZyIsInNldHVwIiwiYXBwRGljdCIsImFwcElkS2V5IiwicGFnZUlkS2V5IiwicGFnZUxvYWRpbmciLCJfbmF2aWdhdGluZ1RvUGFnZSIsInNwZWNpYWxDYnMiLCJfIiwibm9vcCIsIm9uUGFnZUNoYW5nZSIsImJpbmQiLCJvbkFwcENvbm5lY3QiLCJvbkFwcERpc2Nvbm5lY3QiLCJvbkFwcFVwZGF0ZSIsIm9uUmVwb3J0RHJpdmVyTGlzdCIsInBhZ2VMb2FkIiwiZnJhbWVEZXRhY2hlZCIsInRhcmdldENyZWF0ZWQiLCJvblRhcmdldENyZWF0ZWQiLCJ0YXJnZXREZXN0cm95ZWQiLCJvblRhcmdldERlc3Ryb3llZCIsInJwY0NsaWVudCIsInRlYXJkb3duIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiRVZFTlRfUEFHRV9DSEFOR0UiLCJFVkVOVF9ESVNDT05ORUNUIiwiY29ubmVjdCIsIlJlbW90ZURlYnVnZ2VyUnBjQ2xpZW50Iiwic3BlY2lhbE1lc3NhZ2VIYW5kbGVycyIsIm1lc3NhZ2VQcm94eSIsImFwcEluZm8iLCJzZXRDb25uZWN0aW9uS2V5IiwiZXJyIiwiZGlzY29ubmVjdCIsImVtaXQiLCJpc0Nvbm5lY3RlZCIsIkIiLCJyZXNvbHZlIiwicmVqZWN0IiwiY29ubmVjdENiIiwiYXBwcyIsImlzVW5kZWZpbmVkIiwia2V5cyIsImxlbmd0aCIsIm5ld0RpY3QiLCJkaWN0IiwidmFsdWVzIiwiaWQiLCJlbnRyeSIsImRlZmF1bHRzIiwic2V0U3BlY2lhbE1lc3NhZ2VIYW5kbGVyIiwic2ltTmFtZUtleSIsInNpbUJ1aWxkS2V5Iiwic2ltUGxhdGZvcm1WZXJzaW9uIiwic2VuZCIsInVwZGF0ZUFwcHNXaXRoRGljdCIsInBhZ2VBcnJheSIsImxvZ0FwcGxpY2F0aW9uRGljdGlvbmFyeSIsImdldFZhbHVlU3RyaW5nIiwia2V5IiwidmFsdWUiLCJpc0Z1bmN0aW9uIiwiaXNBcnJheSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhcHAiLCJpbmZvIiwidG9QYWlycyIsIkFycmF5IiwicGFnZSIsInByZWZpeCIsImsiLCJ2IiwidmFsdWVTdHJpbmciLCJzZWxlY3RBcHAiLCJjdXJyZW50VXJsIiwibWF4VHJpZXMiLCJpZ25vcmVBYm91dEJsYW5rVXJsIiwicGFnZURpY3QiLCJhcHBMb29wIiwiaSIsInBvc3NpYmxlQXBwSWRzIiwiam9pbiIsImF0dGVtcHRlZEFwcElkS2V5IiwiaXNFbXB0eSIsImZvdW5kIiwiZGljdExvb3AiLCJwcm9taXNlIiwidGltZW91dCIsIlRpbWVvdXRFcnJvciIsInVybCIsIm1lc3NhZ2UiLCJlcnJvckFuZFRocm93IiwicGFnZVByb21pc2VzIiwiT2JqZWN0IiwiZmlsdGVyIiwibWFwIiwiYW55IiwiZGVsYXkiLCJhbGwiLCJmdWxsUGFnZUFycmF5IiwicmVwbGFjZSIsImNsb25lIiwicHVzaCIsInNlbGVjdFBhZ2UiLCJza2lwUmVhZHlDaGVjayIsInRhcmdldElkIiwiY2hlY2tQYWdlSXNSZWFkeSIsInBhZ2VVbmxvYWQiLCJleGVjdXRlQXRvbSIsImF0b20iLCJhcmdzIiwiZnJhbWVzIiwiY29ubmVjdGVkIiwiRXJyb3IiLCJzY3JpcHQiLCJleGVjdXRlIiwidHJ1bmNhdGUiLCJleGVjdXRlQXRvbUFzeW5jIiwicmVzcG9uc2VVcmwiLCJhc3luY0NhbGxCYWNrIiwiRVZFTlRfRlJBTUVTX0RFVEFDSEVEIiwic3RhcnRQYWdlTG9hZE1zIiwicGFnZUxvYWRWZXJpZnlIb29rIiwidGltZW91dE1zIiwic3RhcnQiLCJEYXRlIiwibm93IiwidmVyaWZ5IiwicGFnZUxvYWREZWxheSIsInV0aWwiLCJjYW5jZWxsYWJsZURlbGF5IiwiQ2FuY2VsbGF0aW9uRXJyb3IiLCJyZWFkeSIsImNhbmNlbFBhZ2VMb2FkIiwiY2FuY2VsIiwid2FpdEZvckRvbSIsImVycm9ycyIsInJlYWR5Q21kIiwicmVhZHlTdGF0ZSIsIm5hdlRvVXJsIiwid2FpdEZvckZyYW1lTmF2aWdhdGVkIiwic3RhcnRNcyIsIm5hdkV2ZW50TGlzdGVuZXIiLCJuYXZpZ2F0aW9uRGVsYXkiLCJzdGFydFRpbWVsaW5lIiwiZm4iLCJzZXRUaW1lbGluZUV2ZW50SGFuZGxlciIsInN0b3BUaW1lbGluZSIsInN0YXJ0Q29uc29sZSIsInNldENvbnNvbGVMb2dFdmVudEhhbmRsZXIiLCJzdG9wQ29uc29sZSIsInN0YXJ0TmV0d29yayIsInNldE5ldHdvcmtMb2dFdmVudEhhbmRsZXIiLCJzdG9wTmV0d29yayIsImNvbW1hbmQiLCJvdmVycmlkZSIsImdhcmJhZ2VDb2xsZWN0IiwicmVzIiwiY29udmVydFJlc3VsdCIsImNhbGxGdW5jdGlvbiIsIm9iaklkIiwiaXNTdHJpbmciLCJwYXJzZSIsImlzT2JqZWN0Iiwic3RhdHVzIiwiaGFzT3duUHJvcGVydHkiLCJhbGxvd05hdmlnYXRpb25XaXRob3V0UmVsb2FkIiwiYWxsb3ciLCJnZXRDb29raWVzIiwidXJscyIsImRlbGV0ZUNvb2tpZSIsImNvb2tpZU5hbWUiLCJ0aGVuIiwiZ2NTdWNjZXNzIiwiY2F0Y2gi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QU9HLFNBQVNDLE9BQVQsQ0FBa0JoSixHQUFsQixFQUF1QjtBQUM5QixVQUFJQSxHQUFHLFlBQVlJLGtCQUFFcUQsWUFBckIsRUFBbUM7QUFDakMzRix3QkFBSUMsS0FBSixDQUFXLHNDQUFxQzZILFNBQVUsSUFBMUQ7QUFDRCxPQUZELE1BRU87QUFDTDlILHdCQUFJQyxLQUFKLENBQVcsOEJBQTZCaUMsR0FBRyxDQUFDMkQsT0FBUSxFQUFwRDtBQUNEO0FBQ0YsS0FiSyxDQUFOO0FBY0Q7O0FBeHNCOEM7OztBQTRzQmpEOUcsY0FBYyxDQUFDMkMsaUJBQWYsR0FBbUMsNkJBQW5DO0FBQ0EzQyxjQUFjLENBQUM0SSxxQkFBZixHQUF1QyxpQ0FBdkM7QUFDQTVJLGNBQWMsQ0FBQzRDLGdCQUFmLEdBQWtDLDRCQUFsQzs7QUFHQSxLQUFLLE1BQU0sQ0FBQ3dKLElBQUQsRUFBT0MsT0FBUCxDQUFYLElBQThCM0ssZ0JBQUU0RCxPQUFGLENBQVVnSCx3QkFBVixDQUE5QixFQUEwRDtBQUN4RHRNLEVBQUFBLGNBQWMsQ0FBQ3VNLFNBQWYsQ0FBeUJILElBQXpCLElBQWlDQyxPQUFqQztBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiLy8gdHJhbnNwaWxlOm1haW5cbmltcG9ydCBldmVudHMgZnJvbSAnZXZlbnRzJztcbmltcG9ydCBsb2cgZnJvbSAnLi9sb2dnZXInO1xuaW1wb3J0IHsgZXJyb3JGcm9tQ29kZSB9IGZyb20gJ2FwcGl1bS1iYXNlLWRyaXZlcic7XG5pbXBvcnQgUmVtb3RlRGVidWdnZXJScGNDbGllbnQgZnJvbSAnLi9yZW1vdGUtZGVidWdnZXItcnBjLWNsaWVudCc7XG5pbXBvcnQgbWVzc2FnZUhhbmRsZXJzIGZyb20gJy4vbWVzc2FnZS1oYW5kbGVycyc7XG5pbXBvcnQgeyBhcHBJbmZvRnJvbURpY3QsIHBhZ2VBcnJheUZyb21EaWN0LCBnZXREZWJ1Z2dlckFwcEtleSxcbiAgICAgICAgIGdldFBvc3NpYmxlRGVidWdnZXJBcHBLZXlzLCBjaGVja1BhcmFtcywgZ2V0U2NyaXB0Rm9yQXRvbSxcbiAgICAgICAgIHNpbXBsZVN0cmluZ2lmeSwgZGVmZXJyZWRQcm9taXNlIH0gZnJvbSAnLi9oZWxwZXJzJztcbmltcG9ydCB7IHV0aWwgfSBmcm9tICdhcHBpdW0tc3VwcG9ydCc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuXG5cbmNvbnN0IERFQlVHR0VSX1RZUEVTID0ge1xuICB3ZWJraXQ6IDEsXG4gIHdlYmluc3BlY3RvcjogMlxufTtcbmNvbnN0IFNFTEVDVF9BUFBfUkVUUklFUyA9IDIwO1xuY29uc3QgUkVNT1RFX0RFQlVHR0VSX1BPUlQgPSAyNzc1MztcblxuLyogSG93IG1hbnkgbWlsbGlzZWNvbmRzIHRvIHdhaXQgZm9yIHdlYmtpdCB0byByZXR1cm4gYSByZXNwb25zZSBiZWZvcmUgdGltaW5nIG91dCAqL1xuY29uc3QgUlBDX1JFU1BPTlNFX1RJTUVPVVRfTVMgPSA1MDAwO1xuXG5jb25zdCBQQUdFX1JFQURZX1RJTUVPVVQgPSA1MDAwO1xuXG5jb25zdCBSRVNQT05TRV9MT0dfTEVOR1RIID0gMTAwO1xuXG5jb25zdCBHQVJCQUdFX0NPTExFQ1RfVElNRU9VVCA9IDUwMDA7XG5cblxuY2xhc3MgUmVtb3RlRGVidWdnZXIgZXh0ZW5kcyBldmVudHMuRXZlbnRFbWl0dGVyIHtcbiAgLypcbiAgICogVGhlIGNvbnN0cnVjdG9yIHRha2VzIGFuIG9wdHMgaGFzaCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICogICAtIGJ1bmRsZUlkIC0gaWQgb2YgdGhlIGFwcCBiZWluZyBjb25uZWN0ZWQgdG9cbiAgICogICAtIHBsYXRmb3JtVmVyc2lvbiAtIHZlcnNpb24gb2YgaU9TXG4gICAqICAgLSBkZWJ1Z2dlclR5cGUgLSBvbmUgb2YgdGhlIERFQlVHR0VSX1RZUEVTXG4gICAqICAgLSB1c2VOZXdTYWZhcmkgLSBmb3Igd2ViIGluc3BlY3Rvciwgd2hldGhlciB0aGlzIGlzIGEgbmV3IFNhZmFyaSBpbnN0YW5jZVxuICAgKiAgIC0gcGFnZUxvYWRNcyAtIHRoZSB0aW1lLCBpbiBtcywgdGhhdCBzaG91bGQgYmUgd2FpdGVkIGZvciBwYWdlIGxvYWRpbmdcbiAgICogICAtIGhvc3QgLSB0aGUgcmVtb3RlIGRlYnVnZ2VyJ3MgaG9zdCBhZGRyZXNzXG4gICAqICAgLSBwb3J0IC0gdGhlIHJlbW90ZSBkZWJ1Z2dlciBwb3J0IHRocm91Z2ggd2hpY2ggdG8gY29tbXVuaWNhdGVcbiAgICovXG4gIGNvbnN0cnVjdG9yIChvcHRzID0ge30pIHtcbiAgICBzdXBlcigpO1xuXG4gICAgY29uc3Qge1xuICAgICAgYnVuZGxlSWQsXG4gICAgICBwbGF0Zm9ybVZlcnNpb24sXG4gICAgICBkZWJ1Z2dlclR5cGUgPSBERUJVR0dFUl9UWVBFUy53ZWJpbnNwZWN0b3IsXG4gICAgICBpc1NhZmFyaSA9IHRydWUsXG4gICAgICB1c2VOZXdTYWZhcmkgPSBmYWxzZSxcbiAgICAgIHBhZ2VMb2FkTXMsXG4gICAgICBob3N0LFxuICAgICAgcG9ydCA9IFJFTU9URV9ERUJVR0dFUl9QT1JULFxuICAgICAgc29ja2V0UGF0aCxcbiAgICAgIHBhZ2VSZWFkeVRpbWVvdXQgPSBQQUdFX1JFQURZX1RJTUVPVVQsXG4gICAgICByZW1vdGVEZWJ1Z1Byb3h5LFxuICAgICAgZ2FyYmFnZUNvbGxlY3RPbkV4ZWN1dGUgPSBmYWxzZSxcbiAgICB9ID0gb3B0cztcblxuICAgIHRoaXMuYnVuZGxlSWQgPSBidW5kbGVJZDtcbiAgICB0aGlzLnBsYXRmb3JtVmVyc2lvbiA9IHBsYXRmb3JtVmVyc2lvbjtcbiAgICB0aGlzLmlzU2FmYXJpID0gaXNTYWZhcmk7XG4gICAgdGhpcy5kZWJ1Z2dlclR5cGUgPSBkZWJ1Z2dlclR5cGU7XG4gICAgaWYgKHRoaXMuZGVidWdnZXJUeXBlID09PSBERUJVR0dFUl9UWVBFUy53ZWJpbnNwZWN0b3IpIHtcbiAgICAgIHRoaXMudXNlTmV3U2FmYXJpID0gdXNlTmV3U2FmYXJpO1xuICAgICAgdGhpcy5wYWdlTG9hZE1zID0gcGFnZUxvYWRNcztcbiAgICAgIGxvZy5kZWJ1ZyhgdXNlTmV3U2FmYXJpIC0tPiAke3RoaXMudXNlTmV3U2FmYXJpfWApO1xuICAgIH1cbiAgICB0aGlzLmdhcmJhZ2VDb2xsZWN0T25FeGVjdXRlID0gZ2FyYmFnZUNvbGxlY3RPbkV4ZWN1dGU7XG5cbiAgICB0aGlzLmhvc3QgPSBob3N0O1xuICAgIHRoaXMucG9ydCA9IHBvcnQ7XG4gICAgdGhpcy5zb2NrZXRQYXRoID0gc29ja2V0UGF0aDtcbiAgICB0aGlzLnJlbW90ZURlYnVnUHJveHkgPSByZW1vdGVEZWJ1Z1Byb3h5O1xuICAgIHRoaXMucGFnZVJlYWR5VGltZW91dCA9IHBhZ2VSZWFkeVRpbWVvdXQ7XG4gIH1cblxuICBzZXR1cCAoKSB7XG4gICAgLy8gYXBwIGhhbmRsaW5nIGNvbmZpZ3VyYXRpb25cbiAgICB0aGlzLmFwcERpY3QgPSB7fTtcbiAgICB0aGlzLmFwcElkS2V5ID0gbnVsbDtcbiAgICB0aGlzLnBhZ2VJZEtleSA9IG51bGw7XG4gICAgdGhpcy5wYWdlTG9hZGluZyA9IGZhbHNlO1xuICAgIHRoaXMuX25hdmlnYXRpbmdUb1BhZ2UgPSBmYWxzZTtcblxuICAgIC8vIHNldCB1cCB0aGUgc3BlY2lhbCBjYWxsYmFja3MgZm9yIGhhbmRsaW5nIHJkIGV2ZW50c1xuICAgIHRoaXMuc3BlY2lhbENicyA9IHtcbiAgICAgICdfcnBjX3JlcG9ydElkZW50aWZpZXI6JzogXy5ub29wLFxuICAgICAgJ19ycGNfZm9yd2FyZEdldExpc3Rpbmc6JzogdGhpcy5vblBhZ2VDaGFuZ2UuYmluZCh0aGlzKSxcbiAgICAgICdfcnBjX3JlcG9ydENvbm5lY3RlZEFwcGxpY2F0aW9uTGlzdDonOiBfLm5vb3AsXG4gICAgICAnX3JwY19hcHBsaWNhdGlvbkNvbm5lY3RlZDonOiB0aGlzLm9uQXBwQ29ubmVjdC5iaW5kKHRoaXMpLFxuICAgICAgJ19ycGNfYXBwbGljYXRpb25EaXNjb25uZWN0ZWQ6JzogdGhpcy5vbkFwcERpc2Nvbm5lY3QuYmluZCh0aGlzKSxcbiAgICAgICdfcnBjX2FwcGxpY2F0aW9uVXBkYXRlZDonOiB0aGlzLm9uQXBwVXBkYXRlLmJpbmQodGhpcyksXG4gICAgICAnX3JwY19yZXBvcnRDb25uZWN0ZWREcml2ZXJMaXN0Oic6IHRoaXMub25SZXBvcnREcml2ZXJMaXN0LmJpbmQodGhpcyksXG4gICAgICBwYWdlTG9hZDogdGhpcy5wYWdlTG9hZC5iaW5kKHRoaXMpLFxuICAgICAgZnJhbWVEZXRhY2hlZDogdGhpcy5mcmFtZURldGFjaGVkLmJpbmQodGhpcyksXG4gICAgICB0YXJnZXRDcmVhdGVkOiB0aGlzLm9uVGFyZ2V0Q3JlYXRlZC5iaW5kKHRoaXMpLFxuICAgICAgdGFyZ2V0RGVzdHJveWVkOiB0aGlzLm9uVGFyZ2V0RGVzdHJveWVkLmJpbmQodGhpcyksXG4gICAgfTtcblxuICAgIHRoaXMucnBjQ2xpZW50ID0gbnVsbDtcbiAgfVxuXG4gIHRlYXJkb3duICgpIHtcbiAgICBsb2cuZGVidWcoJ0NsZWFuaW5nIHVwIGxpc3RlbmVycycpO1xuXG4gICAgdGhpcy5hcHBEaWN0ID0ge307XG4gICAgdGhpcy5hcHBJZEtleSA9IG51bGw7XG4gICAgdGhpcy5wYWdlSWRLZXkgPSBudWxsO1xuICAgIHRoaXMucGFnZUxvYWRpbmcgPSBmYWxzZTtcblxuICAgIHRoaXMuc3BlY2lhbENicyA9IHt9O1xuXG4gICAgdGhpcy5ycGNDbGllbnQgPSBudWxsO1xuXG4gICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoUmVtb3RlRGVidWdnZXIuRVZFTlRfUEFHRV9DSEFOR0UpO1xuICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKFJlbW90ZURlYnVnZ2VyLkVWRU5UX0RJU0NPTk5FQ1QpO1xuICB9XG5cbiAgYXN5bmMgY29ubmVjdCAoKSB7XG4gICAgdGhpcy5zZXR1cCgpO1xuXG4gICAgLy8gaW5pdGlhbGl6ZSB0aGUgcnBjIGNsaWVudFxuICAgIHRoaXMucnBjQ2xpZW50ID0gbmV3IFJlbW90ZURlYnVnZ2VyUnBjQ2xpZW50KHtcbiAgICAgIHBsYXRmb3JtVmVyc2lvbjogdGhpcy5wbGF0Zm9ybVZlcnNpb24sXG4gICAgICBpc1NhZmFyaTogdGhpcy5pc1NhZmFyaSxcbiAgICAgIGhvc3Q6IHRoaXMuaG9zdCxcbiAgICAgIHBvcnQ6IHRoaXMucG9ydCxcbiAgICAgIHNvY2tldFBhdGg6IHRoaXMuc29ja2V0UGF0aCxcbiAgICAgIHNwZWNpYWxNZXNzYWdlSGFuZGxlcnM6IHRoaXMuc3BlY2lhbENicyxcbiAgICAgIG1lc3NhZ2VQcm94eTogdGhpcy5yZW1vdGVEZWJ1Z1Byb3h5LFxuXG4gICAgfSk7XG4gICAgYXdhaXQgdGhpcy5ycGNDbGllbnQuY29ubmVjdCgpO1xuXG4gICAgLy8gZ2V0IHRoZSBjb25uZWN0aW9uIGluZm9ybWF0aW9uIGFib3V0IHRoZSBhcHBcbiAgICB0cnkge1xuICAgICAgY29uc3QgYXBwSW5mbyA9IGF3YWl0IHRoaXMuc2V0Q29ubmVjdGlvbktleSgpO1xuICAgICAgbG9nLmRlYnVnKCdDb25uZWN0ZWQgdG8gYXBwbGljYXRpb24nKTtcbiAgICAgIHJldHVybiBhcHBJbmZvO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgYXdhaXQgdGhpcy5kaXNjb25uZWN0KCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBhc3luYyBkaXNjb25uZWN0ICgpIHtcbiAgICBhd2FpdCB0aGlzLnJwY0NsaWVudC5kaXNjb25uZWN0KCk7XG4gICAgdGhpcy5lbWl0KFJlbW90ZURlYnVnZ2VyLkVWRU5UX0RJU0NPTk5FQ1QsIHRydWUpO1xuICAgIHRoaXMudGVhcmRvd24oKTtcbiAgfVxuXG4gIGlzQ29ubmVjdGVkICgpIHtcbiAgICByZXR1cm4gISEodGhpcy5ycGNDbGllbnQgJiYgdGhpcy5ycGNDbGllbnQuaXNDb25uZWN0ZWQoKSk7XG4gIH1cblxuICBhc3luYyBzZXRDb25uZWN0aW9uS2V5ICgpIHtcbiAgICAvLyBvbmx5IHJlc29sdmUgd2hlbiB0aGUgY29ubmVjdGlvbiByZXNwb25zZSBpcyByZWNlaXZlZFxuICAgIHJldHVybiBhd2FpdCBuZXcgQigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAvLyBsb2NhbCBjYWxsYmFjaywgY2FsbGVkIHdoZW4gdGhlIHJlbW90ZSBkZWJ1Z2dlciBoYXMgZXN0YWJsaXNoZWRcbiAgICAgIC8vIGEgY29ubmVjdGlvbiB0byB0aGUgYXBwIHVuZGVyIHRlc3RcbiAgICAgIC8vIGBhcHBgIHdpbGwgYmUgYW4gYXJyYXkgb2YgZGljdGlvbmFyaWVzIG9mIGFwcCBpbmZvcm1hdGlvblxuICAgICAgbGV0IGNvbm5lY3RDYiA9IChhcHBzKSA9PiB7XG4gICAgICAgIGlmIChfLmlzVW5kZWZpbmVkKGFwcHMpIHx8IF8ua2V5cyhhcHBzKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBsb2cuZGVidWcoJ1JlY2VpdmVkIG5vIGFwcHMgZnJvbSByZW1vdGUgZGVidWdnZXIuIFVuYWJsZSB0byBjb25uZWN0LicpO1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKHRoaXMuYXBwRGljdCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG5ld0RpY3QgPSB7fTtcblxuICAgICAgICAvLyB0cmFuc2xhdGUgdGhlIHJlY2VpdmVkIGluZm9ybWF0aW9uIGludG8gYW4gZWFzaWVyLXRvLW1hbmFnZVxuICAgICAgICAvLyBoYXNoIHdpdGggYXBwIGlkIGFzIGtleSwgYW5kIGFwcCBpbmZvIGFzIHZhbHVlXG4gICAgICAgIGZvciAoY29uc3QgZGljdCBvZiBfLnZhbHVlcyhhcHBzKSkge1xuICAgICAgICAgIGxldCBbaWQsIGVudHJ5XSA9IGFwcEluZm9Gcm9tRGljdChkaWN0KTtcbiAgICAgICAgICBuZXdEaWN0W2lkXSA9IGVudHJ5O1xuICAgICAgICB9XG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgb2JqZWN0J3MgbGlzdCBvZiBhcHBzLCBhbmQgcmV0dXJuIGl0IHRocm91Z2ggdGhlIHByb21pc2VcbiAgICAgICAgXy5kZWZhdWx0cyh0aGlzLmFwcERpY3QsIG5ld0RpY3QpO1xuICAgICAgICByZXNvbHZlKG5ld0RpY3QpO1xuICAgICAgfTtcbiAgICAgIHRoaXMucnBjQ2xpZW50LnNldFNwZWNpYWxNZXNzYWdlSGFuZGxlcignX3JwY19yZXBvcnRDb25uZWN0ZWRBcHBsaWNhdGlvbkxpc3Q6JywgcmVqZWN0LCBjb25uZWN0Q2IpO1xuXG4gICAgICBsb2cuZGVidWcoJ1NlbmRpbmcgY29ubmVjdGlvbiBrZXkgcmVxdWVzdCcpO1xuICAgICAgcmV0dXJuIChhc3luYyAoKSA9PiB7XG4gICAgICAgIGxldCBbc2ltTmFtZUtleSwgc2ltQnVpbGRLZXksIHNpbVBsYXRmb3JtVmVyc2lvbl0gPSBhd2FpdCB0aGlzLnJwY0NsaWVudC5zZW5kKCdzZXRDb25uZWN0aW9uS2V5Jyk7XG4gICAgICAgIGxvZy5kZWJ1ZyhgU2ltIG5hbWU6ICR7c2ltTmFtZUtleX1gKTtcbiAgICAgICAgbG9nLmRlYnVnKGBTaW0gYnVpbGQ6ICR7c2ltQnVpbGRLZXl9YCk7XG4gICAgICAgIGxvZy5kZWJ1ZyhgU2ltIHBsYXRmb3JtIHZlcnNpb246ICR7c2ltUGxhdGZvcm1WZXJzaW9ufWApO1xuICAgICAgfSkoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZUFwcHNXaXRoRGljdCAoZGljdCkge1xuICAgIC8vIGdldCB0aGUgZGljdGlvbmFyeSBlbnRyeSBpbnRvIGEgbmljZSBmb3JtLCBhbmQgYWRkIGl0IHRvIHRoZVxuICAgIC8vIGFwcGxpY2F0aW9uIGRpY3Rpb25hcnlcbiAgICB0aGlzLmFwcERpY3QgPSB0aGlzLmFwcERpY3QgfHwge307XG4gICAgbGV0IFtpZCwgZW50cnldID0gYXBwSW5mb0Zyb21EaWN0KGRpY3QpO1xuICAgIGlmICh0aGlzLmFwcERpY3RbaWRdKSB7XG4gICAgICAvLyBwcmVzZXJ2ZSB0aGUgcGFnZSBkaWN0aW9uYXJ5IGZvciB0aGlzIGVudHJ5XG4gICAgICBlbnRyeS5wYWdlQXJyYXkgPSB0aGlzLmFwcERpY3RbaWRdLnBhZ2VBcnJheTtcbiAgICB9XG4gICAgdGhpcy5hcHBEaWN0W2lkXSA9IGVudHJ5O1xuXG4gICAgLy8gYWRkIGEgcHJvbWlzZSB0byBnZXQgdGhlIHBhZ2UgZGljdGlvbmFyeVxuICAgIGlmIChfLmlzVW5kZWZpbmVkKGVudHJ5LnBhZ2VBcnJheSkpIHtcbiAgICAgIGVudHJ5LnBhZ2VBcnJheSA9IGRlZmVycmVkUHJvbWlzZSgpO1xuICAgIH1cblxuICAgIC8vIHRyeSB0byBnZXQgdGhlIGFwcCBpZCBmcm9tIG91ciBjb25uZWN0ZWQgYXBwc1xuICAgIGlmICghdGhpcy5hcHBJZEtleSkge1xuICAgICAgdGhpcy5hcHBJZEtleSA9IGdldERlYnVnZ2VyQXBwS2V5KHRoaXMuYnVuZGxlSWQsIHRoaXMucGxhdGZvcm1WZXJzaW9uLCB0aGlzLmFwcERpY3QpO1xuICAgIH1cbiAgfVxuXG4gIGxvZ0FwcGxpY2F0aW9uRGljdGlvbmFyeSAoYXBwcykge1xuICAgIGZ1bmN0aW9uIGdldFZhbHVlU3RyaW5nIChrZXksIHZhbHVlKSB7XG4gICAgICBpZiAoXy5pc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gJ1tGdW5jdGlvbl0nO1xuICAgICAgfVxuICAgICAgaWYgKGtleSA9PT0gJ3BhZ2VEaWN0JyAmJiAhXy5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gYCdXYWl0aW5nIGZvciBkYXRhJ2A7XG4gICAgICB9XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgIH1cbiAgICBsb2cuZGVidWcoJ0N1cnJlbnQgYXBwbGljYXRpb25zIGF2YWlsYWJsZTonKTtcbiAgICBmb3IgKGNvbnN0IFthcHAsIGluZm9dIG9mIF8udG9QYWlycyhhcHBzKSkge1xuICAgICAgbG9nLmRlYnVnKGAgICAgQXBwbGljYXRpb246ICcke2FwcH0nYCk7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBfLnRvUGFpcnMoaW5mbykpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gJ3BhZ2VBcnJheScgJiYgQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgbG9nLmRlYnVnKGAgICAgICAgICR7a2V5fTpgKTtcbiAgICAgICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgdmFsdWUpIHtcbiAgICAgICAgICAgIGxldCBwcmVmaXggPSAnLSAnO1xuICAgICAgICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgXy50b1BhaXJzKHBhZ2UpKSB7XG4gICAgICAgICAgICAgIGxvZy5kZWJ1ZyhgICAgICAgICAgICR7cHJlZml4fSR7a306ICR7SlNPTi5zdHJpbmdpZnkodil9YCk7XG4gICAgICAgICAgICAgIHByZWZpeCA9ICcgICc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHZhbHVlU3RyaW5nID0gZ2V0VmFsdWVTdHJpbmcoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgbG9nLmRlYnVnKGAgICAgICAgICR7a2V5fTogJHt2YWx1ZVN0cmluZ31gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNlbGVjdEFwcCAoY3VycmVudFVybCA9IG51bGwsIG1heFRyaWVzID0gU0VMRUNUX0FQUF9SRVRSSUVTLCBpZ25vcmVBYm91dEJsYW5rVXJsID0gZmFsc2UpIHtcbiAgICBsb2cuZGVidWcoJ1NlbGVjdGluZyBhcHBsaWNhdGlvbicpO1xuICAgIGlmICghdGhpcy5hcHBEaWN0IHx8IF8ua2V5cyh0aGlzLmFwcERpY3QpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbG9nLmRlYnVnKCdObyBhcHBsaWNhdGlvbnMgY3VycmVudGx5IGNvbm5lY3RlZC4nKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICAvLyBpdGVyYXRpdmUgc29sdXRpb24sIGFzIHJlY3Vyc2lvbiB3YXMgc3dhbGxvd2luZyB0aGUgcHJvbWlzZSBhdCBzb21lIHBvaW50XG4gICAgbGV0IHBhZ2VEaWN0LCBhcHBJZEtleTtcbiAgICBhcHBMb29wOiBmb3IgKGxldCBpID0gMDsgaSA8IG1heFRyaWVzOyBpKyspIHtcbiAgICAgIHRoaXMubG9nQXBwbGljYXRpb25EaWN0aW9uYXJ5KHRoaXMuYXBwRGljdCk7XG4gICAgICBsZXQgcG9zc2libGVBcHBJZHMgPSBnZXRQb3NzaWJsZURlYnVnZ2VyQXBwS2V5cyh0aGlzLmJ1bmRsZUlkLCB0aGlzLnBsYXRmb3JtVmVyc2lvbiwgdGhpcy5hcHBEaWN0KTtcbiAgICAgIGxvZy5kZWJ1ZyhgVHJ5aW5nIG91dCB0aGUgcG9zc2libGUgYXBwIGlkczogJHtwb3NzaWJsZUFwcElkcy5qb2luKCcsICcpfWApO1xuICAgICAgZm9yIChjb25zdCBhdHRlbXB0ZWRBcHBJZEtleSBvZiBwb3NzaWJsZUFwcElkcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGxvZy5kZWJ1ZyhgU2VsZWN0aW5nIGFwcCAke2F0dGVtcHRlZEFwcElkS2V5fSAodHJ5ICMke2kgKyAxfSBvZiAke21heFRyaWVzfSlgKTtcbiAgICAgICAgICBbYXBwSWRLZXksIHBhZ2VEaWN0XSA9IGF3YWl0IHRoaXMucnBjQ2xpZW50LnNlbGVjdEFwcChhdHRlbXB0ZWRBcHBJZEtleSwgdGhpcy5vbkFwcENvbm5lY3QuYmluZCh0aGlzKSk7XG4gICAgICAgICAgLy8gaW4gaU9TIDguMiB0aGUgY29ubmVjdCBsb2dpYyBoYXBwZW5zLCBidXQgd2l0aCBhbiBlbXB0eSBkaWN0aW9uYXJ5XG4gICAgICAgICAgLy8gd2hpY2ggbGVhZHMgdG8gdGhlIHJlbW90ZSBkZWJ1Z2dlciBnZXR0aW5nIGRpc2Nvbm5lY3RlZCwgYW5kIGludG8gYSBsb29wXG4gICAgICAgICAgaWYgKF8uaXNFbXB0eShwYWdlRGljdCkpIHtcbiAgICAgICAgICAgIGxvZy5kZWJ1ZygnRW1wdHkgcGFnZSBkaWN0aW9uYXJ5IHJlY2VpdmVkLiBUcnlpbmcgYWdhaW4uJyk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBzYXZlIHRoZSBwYWdlIGFycmF5IGZvciB0aGlzIGFwcFxuICAgICAgICAgIHRoaXMuYXBwRGljdFthcHBJZEtleV0ucGFnZUFycmF5ID0gcGFnZUFycmF5RnJvbURpY3QocGFnZURpY3QpO1xuXG4gICAgICAgICAgLy8gaWYgd2UgYXJlIGxvb2tpbmcgZm9yIGEgcGFydGljdWxhciB1cmwsIG1ha2Ugc3VyZSB3ZSBoYXZlIHRoZSByaWdodCBwYWdlLiBJZ25vcmUgZW1wdHkgb3IgdW5kZWZpbmVkIHVybHMuIElnbm9yZSBhYm91dDpibGFuayBpZiByZXF1ZXN0ZWQuXG4gICAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgZGljdExvb3A6IGZvciAoY29uc3QgYXBwRGljdCBvZiBfLnZhbHVlcyh0aGlzLmFwcERpY3QpKSB7XG4gICAgICAgICAgICBpZiAoZm91bmQpIGJyZWFrOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGN1cmx5XG5cbiAgICAgICAgICAgIGlmICghYXBwRGljdCB8fCAhYXBwRGljdC5wYWdlQXJyYXkpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlmIHRoZSBwYWdlIGRpY3Rpb25hcnkgaGFzIG5vdCBiZWVuIGxvYWRlZCB5ZXQgZnJvbSB0aGUgd2ViXG4gICAgICAgICAgICAvLyBpbnNwZWN0b3IsIHdhaXQgZm9yIGl0IG9yIHRpbWUgb3V0IGFmdGVyIDEwc1xuICAgICAgICAgICAgaWYgKGFwcERpY3QucGFnZUFycmF5LnByb21pc2UpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBCLnJlc29sdmUoYXBwRGljdC5wYWdlQXJyYXkucHJvbWlzZSkudGltZW91dCgxMDAwMCk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGlmICghKGVyciBpbnN0YW5jZW9mIEIuVGltZW91dEVycm9yKSkge1xuICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBvbiB0aW1lb3V0LCBqdXN0IGdvIG9uXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChjb25zdCBkaWN0IG9mIChhcHBEaWN0LnBhZ2VBcnJheSB8fCBbXSkpIHtcbiAgICAgICAgICAgICAgaWYgKCghaWdub3JlQWJvdXRCbGFua1VybCB8fCBkaWN0LnVybCAhPT0gJ2Fib3V0OmJsYW5rJykgJiZcbiAgICAgICAgICAgICAgICAgICghY3VycmVudFVybCB8fCBkaWN0LnVybCA9PT0gY3VycmVudFVybCB8fCBkaWN0LnVybCA9PT0gYCR7Y3VycmVudFVybH0vYCkpIHtcbiAgICAgICAgICAgICAgICAvLyBzYXZlIHdoZXJlIHdlIGZvdW5kIHRoZSByaWdodCBwYWdlXG4gICAgICAgICAgICAgICAgYXBwSWRLZXkgPSBhcHBEaWN0LmlkO1xuICAgICAgICAgICAgICAgIHBhZ2VEaWN0ID0gZGljdDtcbiAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWsgZGljdExvb3A7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRVcmwpIHtcbiAgICAgICAgICAgICAgbG9nLmRlYnVnKGBSZWNlaXZlZCBhcHAsIGJ1dCBleHBlY3RlZCB1cmwgKCcke2N1cnJlbnRVcmx9Jykgd2FzIG5vdCBmb3VuZC4gVHJ5aW5nIGFnYWluLmApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbG9nLmRlYnVnKCdSZWNlaXZlZCBhcHAsIGJ1dCBubyBtYXRjaCB3YXMgZm91bmQuIFRyeWluZyBhZ2Fpbi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhZ2VEaWN0ID0gbnVsbDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHdlIGhhdmUgZ290dGVuIHRoZSBjb3JyZWN0IGFwcGxpY2F0aW9uIGJ5IHRoaXMgcG9pbnQsIHNvIHNob3J0IGNpcmN1aXQgZXZlcnl0aGluZ1xuICAgICAgICAgIGJyZWFrIGFwcExvb3A7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGxvZy5kZWJ1ZyhgRXJyb3IgY2hlY2tpbmcgYXBwbGljYXRpb246ICcke2Vyci5tZXNzYWdlfScuIFJldHJ5aW5nIGNvbm5lY3Rpb25gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGlmLCBhZnRlciBhbGwgdGhpcywgd2UgaGF2ZSBubyBkaWN0aW9uYXJ5LCB3ZSBoYXZlIGZhaWxlZFxuICAgIGlmICghcGFnZURpY3QpIHtcbiAgICAgIGxvZy5lcnJvckFuZFRocm93KGBDb3VsZCBub3QgY29ubmVjdCB0byBhIHZhbGlkIGFwcCBhZnRlciAke21heFRyaWVzfSB0cmllcy5gKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hcHBJZEtleSAhPT0gYXBwSWRLZXkpIHtcbiAgICAgIGxvZy5kZWJ1ZyhgUmVjZWl2ZWQgYWx0ZXJlZCBhcHAgaWQsIHVwZGF0aW5nIGZyb20gJyR7dGhpcy5hcHBJZEtleX0nIHRvICcke2FwcElkS2V5fSdgKTtcbiAgICAgIHRoaXMuYXBwSWRLZXkgPSBhcHBJZEtleTtcbiAgICB9XG5cbiAgICAvLyB3YWl0IGZvciBhbGwgdGhlIHByb21pc2VzIGFyZSBiYWNrLCBvciAzMHMgcGFzc2VzXG4gICAgY29uc3QgcGFnZVByb21pc2VzID0gT2JqZWN0LnZhbHVlcyh0aGlzLmFwcERpY3QpXG4gICAgICAuZmlsdGVyKChhcHApID0+ICEhYXBwLnBhZ2VBcnJheSAmJiAhIWFwcC5wYWdlQXJyYXkucHJvbWlzZSlcbiAgICAgIC5tYXAoKGFwcCkgPT4gYXBwLnBhZ2VBcnJheS5wcm9taXNlKTtcbiAgICBpZiAocGFnZVByb21pc2VzLmxlbmd0aCkge1xuICAgICAgbG9nLmRlYnVnKGBXYWl0aW5nIGZvciAke3BhZ2VQcm9taXNlcy5sZW5ndGh9IHBhZ2VzIHRvIGJlIGZ1bGZpbGxlZGApO1xuICAgICAgYXdhaXQgQi5hbnkoW0IuZGVsYXkoMzAwMDApLCBCLmFsbChwYWdlUHJvbWlzZXMpXSk7XG4gICAgfVxuXG4gICAgLy8gdHJhbnNsYXRlIHRoZSBkaWN0aW9uYXJ5IGludG8gYSB1c2VmdWwgZm9ybSwgYW5kIHJldHVybiB0byBzZW5kZXJcbiAgICBjb25zdCBwYWdlQXJyYXkgPSBfLmlzRW1wdHkodGhpcy5hcHBEaWN0W2FwcElkS2V5XS5wYWdlQXJyYXkpXG4gICAgICA/IHBhZ2VBcnJheUZyb21EaWN0KHBhZ2VEaWN0KVxuICAgICAgOiB0aGlzLmFwcERpY3RbYXBwSWRLZXldLnBhZ2VBcnJheTtcbiAgICBsb2cuZGVidWcoYEZpbmFsbHkgc2VsZWN0aW5nIGFwcCAke3RoaXMuYXBwSWRLZXl9OiAke3NpbXBsZVN0cmluZ2lmeShwYWdlQXJyYXkpfWApO1xuXG4gICAgbGV0IGZ1bGxQYWdlQXJyYXkgPSBbXTtcbiAgICBmb3IgKGNvbnN0IFthcHAsIGluZm9dIG9mIF8udG9QYWlycyh0aGlzLmFwcERpY3QpKSB7XG4gICAgICBpZiAoIV8uaXNBcnJheShpbmZvLnBhZ2VBcnJheSkpIGNvbnRpbnVlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGN1cmx5XG4gICAgICBsZXQgaWQgPSBhcHAucmVwbGFjZSgnUElEOicsICcnKTtcbiAgICAgIGZvciAoY29uc3QgcGFnZSBvZiBpbmZvLnBhZ2VBcnJheSkge1xuICAgICAgICBpZiAocGFnZS51cmwgJiYgKCFpZ25vcmVBYm91dEJsYW5rVXJsIHx8IHBhZ2UudXJsICE9PSAnYWJvdXQ6YmxhbmsnKSAmJiAoIWN1cnJlbnRVcmwgfHwgcGFnZS51cmwgPT09IGN1cnJlbnRVcmwgfHwgcGFnZS51cmwgPT09IGAke2N1cnJlbnRVcmx9L2ApKSB7XG4gICAgICAgICAgbGV0IHBhZ2VEaWN0ID0gXy5jbG9uZShwYWdlKTtcbiAgICAgICAgICBwYWdlRGljdC5pZCA9IGAke2lkfS4ke3BhZ2VEaWN0LmlkfWA7XG4gICAgICAgICAgZnVsbFBhZ2VBcnJheS5wdXNoKHBhZ2VEaWN0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmdWxsUGFnZUFycmF5O1xuICB9XG5cbiAgYXN5bmMgc2VsZWN0UGFnZSAoYXBwSWRLZXksIHBhZ2VJZEtleSwgc2tpcFJlYWR5Q2hlY2sgPSBmYWxzZSkge1xuICAgIHRoaXMuYXBwSWRLZXkgPSBgUElEOiR7YXBwSWRLZXl9YDtcbiAgICB0aGlzLnBhZ2VJZEtleSA9IHBhZ2VJZEtleTtcblxuICAgIGxvZy5kZWJ1ZyhgU2VsZWN0aW5nIHBhZ2UgJyR7cGFnZUlkS2V5fScgb24gYXBwICcke3RoaXMuYXBwSWRLZXl9JyBhbmQgZm9yd2FyZGluZyBzb2NrZXQgc2V0dXBgKTtcblxuICAgIGF3YWl0IHRoaXMucnBjQ2xpZW50LnNlbmQoJ3NldFNlbmRlcktleScsIHtcbiAgICAgIGFwcElkS2V5OiB0aGlzLmFwcElkS2V5LFxuICAgICAgcGFnZUlkS2V5OiB0aGlzLnBhZ2VJZEtleVxuICAgIH0pO1xuICAgIGxvZy5kZWJ1ZygnU2VuZGVyIGtleSBzZXQnKTtcblxuICAgIGF3YWl0IHRoaXMucnBjQ2xpZW50LnNlbmQoJ2VuYWJsZVBhZ2UnLCB7XG4gICAgICBhcHBJZEtleTogdGhpcy5hcHBJZEtleSxcbiAgICAgIHBhZ2VJZEtleTogdGhpcy5wYWdlSWRLZXksXG4gICAgICBkZWJ1Z2dlclR5cGU6IHRoaXMuZGVidWdnZXJUeXBlLFxuICAgICAgdGFyZ2V0SWQ6ICdwYWdlLTEnLFxuICAgIH0pO1xuICAgIGxvZy5kZWJ1ZygnRW5hYmxlZCBhY3Rpdml0eSBvbiBwYWdlJyk7XG5cbiAgICAvLyBtYWtlIHN1cmUgZXZlcnl0aGluZyBpcyByZWFkeSB0byBnb1xuICAgIGlmICghc2tpcFJlYWR5Q2hlY2sgJiYgIWF3YWl0IHRoaXMuY2hlY2tQYWdlSXNSZWFkeSgpKSB7XG4gICAgICBhd2FpdCB0aGlzLnBhZ2VVbmxvYWQoKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBleGVjdXRlQXRvbSAoYXRvbSwgYXJncywgZnJhbWVzKSB7XG4gICAgaWYgKCF0aGlzLnJwY0NsaWVudC5jb25uZWN0ZWQpIHRocm93IG5ldyBFcnJvcignUmVtb3RlIGRlYnVnZ2VyIGlzIG5vdCBjb25uZWN0ZWQnKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBjdXJseVxuXG4gICAgbG9nLmRlYnVnKGBFeGVjdXRpbmcgYXRvbSAnJHthdG9tfSdgKTtcbiAgICBjb25zdCBzY3JpcHQgPSBhd2FpdCBnZXRTY3JpcHRGb3JBdG9tKGF0b20sIGFyZ3MsIGZyYW1lcyk7XG4gICAgY29uc3QgdmFsdWUgPSBhd2FpdCB0aGlzLmV4ZWN1dGUoc2NyaXB0LCB0cnVlKTtcbiAgICBsb2cuZGVidWcoYFJlY2VpdmVkIHJlc3VsdCBmb3IgYXRvbSAnJHthdG9tfScgZXhlY3V0aW9uOiAke18udHJ1bmNhdGUoc2ltcGxlU3RyaW5naWZ5KHZhbHVlKSwge2xlbmd0aDogUkVTUE9OU0VfTE9HX0xFTkdUSH0pfWApO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIGFzeW5jIGV4ZWN1dGVBdG9tQXN5bmMgKGF0b20sIGFyZ3MsIGZyYW1lcywgcmVzcG9uc2VVcmwpIHtcbiAgICBsZXQgYXN5bmNDYWxsQmFjayA9IGBmdW5jdGlvbiAocmVzKSB7IHhtbEh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsgYCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgeG1sSHR0cC5vcGVuKCdQT1NUJywgJyR7cmVzcG9uc2VVcmx9JywgdHJ1ZSk7YCArXG4gICAgICAgICAgICAgICAgICAgICAgICBgeG1sSHR0cC5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LXR5cGUnLCdhcHBsaWNhdGlvbi9qc29uJyk7IGAgK1xuICAgICAgICAgICAgICAgICAgICAgICAgYHhtbEh0dHAuc2VuZChyZXMpOyB9YDtcbiAgICBsZXQgc2NyaXB0ID0gYXdhaXQgZ2V0U2NyaXB0Rm9yQXRvbShhdG9tLCBhcmdzLCBmcmFtZXMsIGFzeW5jQ2FsbEJhY2spO1xuICAgIGF3YWl0IHRoaXMuZXhlY3V0ZShzY3JpcHQpO1xuICB9XG5cbiAgZnJhbWVEZXRhY2hlZCAoKSB7XG4gICAgdGhpcy5lbWl0KFJlbW90ZURlYnVnZ2VyLkVWRU5UX0ZSQU1FU19ERVRBQ0hFRCk7XG4gIH1cblxuICBhc3luYyBwYWdlTG9hZCAoc3RhcnRQYWdlTG9hZE1zLCBwYWdlTG9hZFZlcmlmeUhvb2spIHtcbiAgICBsZXQgdGltZW91dE1zID0gNTAwO1xuICAgIGxldCBzdGFydCA9IHN0YXJ0UGFnZUxvYWRNcyB8fCBEYXRlLm5vdygpO1xuICAgIGxvZy5kZWJ1ZygnUGFnZSBsb2FkZWQsIHZlcmlmeWluZyB3aGV0aGVyIHJlYWR5Jyk7XG5cbiAgICBjb25zdCB2ZXJpZnkgPSBhc3luYyAoKSA9PiB7XG4gICAgICB0aGlzLnBhZ2VMb2FkRGVsYXkgPSB1dGlsLmNhbmNlbGxhYmxlRGVsYXkodGltZW91dE1zKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMucGFnZUxvYWREZWxheTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgQi5DYW5jZWxsYXRpb25FcnJvcikge1xuICAgICAgICAgIC8vIGlmIHRoZSBwcm9taXNlIGhhcyBiZWVuIGNhbmNlbGxlZFxuICAgICAgICAgIC8vIHdlIHdhbnQgdG8gc2tpcCBjaGVja2luZyB0aGUgcmVhZGluZXNzXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHdlIGNhbiBnZXQgdGhpcyBjYWxsZWQgaW4gdGhlIG1pZGRsZSBvZiB0cnlpbmcgdG8gZmluZCBhIG5ldyBhcHBcbiAgICAgIGlmICghdGhpcy5hcHBJZEtleSkge1xuICAgICAgICBsb2cuZGVidWcoJ05vdCBjb25uZWN0ZWQgdG8gYW4gYXBwbGljYXRpb24uIElnbm9yaW5nIHBhZ2UgbG9hZCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChfLmlzRnVuY3Rpb24ocGFnZUxvYWRWZXJpZnlIb29rKSkge1xuICAgICAgICBhd2FpdCBwYWdlTG9hZFZlcmlmeUhvb2soKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVhZHkgPSBhd2FpdCB0aGlzLmNoZWNrUGFnZUlzUmVhZHkoKTtcblxuICAgICAgLy8gaWYgd2UgYXJlIHJlYWR5LCBvciB3ZSd2ZSBzcGVuZCB0b28gbXVjaCB0aW1lIG9uIHRoaXNcbiAgICAgIGlmIChyZWFkeSB8fCAodGhpcy5wYWdlTG9hZE1zID4gMCAmJiAoc3RhcnQgKyB0aGlzLnBhZ2VMb2FkTXMpIDwgRGF0ZS5ub3coKSkpIHtcbiAgICAgICAgbG9nLmRlYnVnKCdQYWdlIGlzIHJlYWR5Jyk7XG4gICAgICAgIHRoaXMucGFnZUxvYWRpbmcgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZy5kZWJ1ZygnUGFnZSB3YXMgbm90IHJlYWR5LCByZXRyeWluZycpO1xuICAgICAgICBhd2FpdCB2ZXJpZnkoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGF3YWl0IHZlcmlmeSgpO1xuICB9XG5cbiAgY2FuY2VsUGFnZUxvYWQgKCkge1xuICAgIGxvZy5kZWJ1ZygnVW5yZWdpc3RlcmluZyBmcm9tIHBhZ2UgcmVhZGluZXNzIG5vdGlmaWNhdGlvbnMnKTtcbiAgICB0aGlzLnBhZ2VMb2FkaW5nID0gZmFsc2U7XG4gICAgaWYgKHRoaXMucGFnZUxvYWREZWxheSkge1xuICAgICAgdGhpcy5wYWdlTG9hZERlbGF5LmNhbmNlbCgpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHBhZ2VVbmxvYWQgKCkge1xuICAgIGxvZy5kZWJ1ZygnUGFnZSB1bmxvYWRpbmcnKTtcbiAgICB0aGlzLnBhZ2VMb2FkaW5nID0gdHJ1ZTtcbiAgICBhd2FpdCB0aGlzLndhaXRGb3JEb20oKTtcbiAgfVxuXG4gIGFzeW5jIHdhaXRGb3JEb20gKHN0YXJ0UGFnZUxvYWRNcywgcGFnZUxvYWRWZXJpZnlIb29rKSB7XG4gICAgbG9nLmRlYnVnKCdXYWl0aW5nIGZvciBkb20uLi4nKTtcbiAgICBhd2FpdCB0aGlzLnBhZ2VMb2FkKHN0YXJ0UGFnZUxvYWRNcywgcGFnZUxvYWRWZXJpZnlIb29rKTtcbiAgfVxuXG4gIGFzeW5jIGNoZWNrUGFnZUlzUmVhZHkgKCkge1xuICAgIGNvbnN0IGVycm9ycyA9IGNoZWNrUGFyYW1zKHthcHBJZEtleTogdGhpcy5hcHBJZEtleX0pO1xuICAgIGlmIChlcnJvcnMpIHRocm93IG5ldyBFcnJvcihlcnJvcnMpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGN1cmx5XG5cbiAgICBsb2cuZGVidWcoJ0NoZWNraW5nIGRvY3VtZW50IHJlYWR5U3RhdGUnKTtcbiAgICBjb25zdCByZWFkeUNtZCA9ICcoZnVuY3Rpb24gKCl7IHJldHVybiBkb2N1bWVudC5yZWFkeVN0YXRlOyB9KSgpJztcbiAgICBsZXQgcmVhZHlTdGF0ZSA9ICdsb2FkaW5nJztcbiAgICB0cnkge1xuICAgICAgcmVhZHlTdGF0ZSA9IGF3YWl0IEIucmVzb2x2ZSh0aGlzLmV4ZWN1dGUocmVhZHlDbWQsIHRydWUpKS50aW1lb3V0KHRoaXMucGFnZVJlYWR5VGltZW91dCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBpZiAoIShlcnIgaW5zdGFuY2VvZiBCLlRpbWVvdXRFcnJvcikpIHtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgICAgbG9nLmRlYnVnKGBQYWdlIHJlYWRpbmVzcyBjaGVjayB0aW1lZCBvdXQgYWZ0ZXIgJHt0aGlzLnBhZ2VSZWFkeVRpbWVvdXR9bXNgKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgbG9nLmRlYnVnKGBEb2N1bWVudCByZWFkeVN0YXRlIGlzICcke3JlYWR5U3RhdGV9J2ApO1xuXG4gICAgcmV0dXJuIHJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZSc7XG4gIH1cblxuICBhc3luYyBuYXZUb1VybCAodXJsLCBwYWdlTG9hZFZlcmlmeUhvb2spIHtcbiAgICAvLyBubyBuZWVkIHRvIGRvIHRoaXMgY2hlY2sgd2hlbiB1c2luZyB3ZWJraXRcbiAgICBpZiAodGhpcy5kZWJ1Z2dlclR5cGUgPT09IERFQlVHR0VSX1RZUEVTLndlYmluc3BlY3Rvcikge1xuICAgICAgY29uc3QgZXJyb3JzID0gY2hlY2tQYXJhbXMoe2FwcElkS2V5OiB0aGlzLmFwcElkS2V5LCBwYWdlSWRLZXk6IHRoaXMucGFnZUlkS2V5fSk7XG4gICAgICBpZiAoZXJyb3JzKSB0aHJvdyBuZXcgRXJyb3IoZXJyb3JzKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBjdXJseVxuICAgIH1cblxuICAgIHRoaXMuX25hdmlnYXRpbmdUb1BhZ2UgPSB0cnVlO1xuXG4gICAgdHJ5IHtcbiAgICAgIGxvZy5kZWJ1ZyhgTmF2aWdhdGluZyB0byBuZXcgVVJMOiAnJHt1cmx9J2ApO1xuICAgICAgYXdhaXQgdGhpcy5ycGNDbGllbnQuc2VuZCgnc2V0VXJsJywge1xuICAgICAgICB1cmwsXG4gICAgICAgIGFwcElkS2V5OiB0aGlzLmFwcElkS2V5LFxuICAgICAgICBwYWdlSWRLZXk6IHRoaXMucGFnZUlkS2V5LFxuICAgICAgICBkZWJ1Z2dlclR5cGU6IHRoaXMuZGVidWdnZXJUeXBlXG4gICAgICB9KTtcblxuICAgICAgaWYgKCF0aGlzLnVzZU5ld1NhZmFyaSkge1xuICAgICAgICAvLyBhIHNtYWxsIHBhdXNlIGZvciB0aGUgYnJvd3NlciB0byBjYXRjaCB1cFxuICAgICAgICBhd2FpdCBCLmRlbGF5KDEwMDApO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5kZWJ1Z2dlclR5cGUgPT09IERFQlVHR0VSX1RZUEVTLndlYmluc3BlY3Rvcikge1xuICAgICAgICBhd2FpdCB0aGlzLndhaXRGb3JGcmFtZU5hdmlnYXRlZCgpO1xuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy53YWl0Rm9yRG9tKERhdGUubm93KCksIHBhZ2VMb2FkVmVyaWZ5SG9vayk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuX25hdmlnYXRpbmdUb1BhZ2UgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyB3YWl0Rm9yRnJhbWVOYXZpZ2F0ZWQgKCkge1xuICAgIHJldHVybiBhd2FpdCBuZXcgQihhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsb2cuZGVidWcoJ1dhaXRpbmcgZm9yIGZyYW1lIG5hdmlnYXRlZCBtZXNzYWdlLi4uJyk7XG4gICAgICBsZXQgc3RhcnRNcyA9IERhdGUubm93KCk7XG5cbiAgICAgIC8vIGFkZCBhIGhhbmRsZXIgZm9yIHRoZSBgUGFnZS5mcmFtZU5hdmlnYXRlZGAgbWVzc2FnZVxuICAgICAgLy8gZnJvbSB0aGUgcmVtb3RlIGRlYnVnZ2VyXG4gICAgICBsZXQgbmF2RXZlbnRMaXN0ZW5lciA9ICh2YWx1ZSkgPT4ge1xuICAgICAgICBsb2cuZGVidWcoYEZyYW1lIG5hdmlnYXRlZCBpbiAkeygoRGF0ZS5ub3coKSAtIHN0YXJ0TXMpIC8gMTAwMCl9IHNlYyBmcm9tIHNvdXJjZTogJHt2YWx1ZX1gKTtcbiAgICAgICAgaWYgKHRoaXMubmF2aWdhdGlvbkRlbGF5KSB7XG4gICAgICAgICAgdGhpcy5uYXZpZ2F0aW9uRGVsYXkuY2FuY2VsKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICB9O1xuICAgICAgdGhpcy5ycGNDbGllbnQuc2V0U3BlY2lhbE1lc3NhZ2VIYW5kbGVyKCdQYWdlLmZyYW1lTmF2aWdhdGVkJywgcmVqZWN0LCBuYXZFdmVudExpc3RlbmVyKTtcblxuICAgICAgLy8gdGltZW91dCwgaW4gY2FzZSByZW1vdGUgZGVidWdnZXIgZG9lc24ndCByZXNwb25kLFxuICAgICAgLy8gb3IgdGFrZXMgYSBsb25nIHRpbWVcbiAgICAgIGlmICghdGhpcy51c2VOZXdTYWZhcmkgfHwgdGhpcy5wYWdlTG9hZE1zID49IDApIHtcbiAgICAgICAgLy8gdXNlIHBhZ2VMb2FkTXMsIG9yIGEgc21hbGwgYW1vdW50IG9mIHRpbWVcbiAgICAgICAgbGV0IHRpbWVvdXQgPSB0aGlzLnVzZU5ld1NhZmFyaSA/IHRoaXMucGFnZUxvYWRNcyA6IDUwMDtcbiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uRGVsYXkgPSB1dGlsLmNhbmNlbGxhYmxlRGVsYXkodGltZW91dCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5uYXZpZ2F0aW9uRGVsYXk7XG4gICAgICAgICAgbmF2RXZlbnRMaXN0ZW5lcigndGltZW91dCcpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAvLyBub3RoaW5nIHRvIGRvOiB3ZSBvbmx5IGdldCBoZXJlIGlmIHRoZSByZW1vdGUgZGVidWdnZXJcbiAgICAgICAgICAvLyBhbHJlYWR5IG5vdGlmaWVkIG9mIGZyYW1lIG5hdmlnYXRpb24sIGFuZCB0aGUgZGVsYXlcbiAgICAgICAgICAvLyB3YXMgY2FuY2VsbGVkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHN0YXJ0VGltZWxpbmUgKGZuKSB7XG4gICAgbG9nLmRlYnVnKCdTdGFydGluZyB0byByZWNvcmQgdGhlIHRpbWVsaW5lJyk7XG4gICAgdGhpcy5ycGNDbGllbnQuc2V0VGltZWxpbmVFdmVudEhhbmRsZXIoZm4pO1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnJwY0NsaWVudC5zZW5kKCdzdGFydFRpbWVsaW5lJywge1xuICAgICAgYXBwSWRLZXk6IHRoaXMuYXBwSWRLZXksXG4gICAgICBwYWdlSWRLZXk6IHRoaXMucGFnZUlkS2V5LFxuICAgICAgZGVidWdnZXJUeXBlOiB0aGlzLmRlYnVnZ2VyVHlwZVxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgc3RvcFRpbWVsaW5lICgpIHtcbiAgICBsb2cuZGVidWcoJ1N0b3BwaW5nIHRvIHJlY29yZCB0aGUgdGltZWxpbmUnKTtcbiAgICBhd2FpdCB0aGlzLnJwY0NsaWVudC5zZW5kKCdzdG9wVGltZWxpbmUnLCB7XG4gICAgICBhcHBJZEtleTogdGhpcy5hcHBJZEtleSxcbiAgICAgIHBhZ2VJZEtleTogdGhpcy5wYWdlSWRLZXksXG4gICAgICBkZWJ1Z2dlclR5cGU6IHRoaXMuZGVidWdnZXJUeXBlXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBzdGFydENvbnNvbGUgKGZuKSB7XG4gICAgbG9nLmRlYnVnKCdTdGFydGluZyB0byBsaXN0ZW4gZm9yIEphdmFTY3JpcHQgY29uc29sZScpO1xuICAgIHRoaXMucnBjQ2xpZW50LnNldENvbnNvbGVMb2dFdmVudEhhbmRsZXIoZm4pO1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnJwY0NsaWVudC5zZW5kKCdzdGFydENvbnNvbGUnLCB7XG4gICAgICBhcHBJZEtleTogdGhpcy5hcHBJZEtleSxcbiAgICAgIHBhZ2VJZEtleTogdGhpcy5wYWdlSWRLZXksXG4gICAgICBkZWJ1Z2dlclR5cGU6IHRoaXMuZGVidWdnZXJUeXBlXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBzdG9wQ29uc29sZSAoKSB7XG4gICAgbG9nLmRlYnVnKCdTdG9wcGluZyB0byBsaXN0ZW4gZm9yIEphdmFTY3JpcHQgY29uc29sZScpO1xuICAgIGF3YWl0IHRoaXMucnBjQ2xpZW50LnNlbmQoJ3N0b3BDb25zb2xlJywge1xuICAgICAgYXBwSWRLZXk6IHRoaXMuYXBwSWRLZXksXG4gICAgICBwYWdlSWRLZXk6IHRoaXMucGFnZUlkS2V5LFxuICAgICAgZGVidWdnZXJUeXBlOiB0aGlzLmRlYnVnZ2VyVHlwZVxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgc3RhcnROZXR3b3JrIChmbikge1xuICAgIGxvZy5kZWJ1ZygnU3RhcnRpbmcgdG8gbGlzdGVuIGZvciBuZXR3b3JrIGV2ZW50cycpO1xuICAgIHRoaXMucnBjQ2xpZW50LnNldE5ldHdvcmtMb2dFdmVudEhhbmRsZXIoZm4pO1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnJwY0NsaWVudC5zZW5kKCdzdGFydE5ldHdvcmsnLCB7XG4gICAgICBhcHBJZEtleTogdGhpcy5hcHBJZEtleSxcbiAgICAgIHBhZ2VJZEtleTogdGhpcy5wYWdlSWRLZXksXG4gICAgICBkZWJ1Z2dlclR5cGU6IHRoaXMuZGVidWdnZXJUeXBlXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBzdG9wTmV0d29yayAoKSB7XG4gICAgbG9nLmRlYnVnKCdTdG9wcGluZyB0byBsaXN0ZW4gZm9yIG5ldHdvcmsgZXZlbnRzJyk7XG4gICAgYXdhaXQgdGhpcy5ycGNDbGllbnQuc2VuZCgnc3RvcE5ldHdvcmsnLCB7XG4gICAgICBhcHBJZEtleTogdGhpcy5hcHBJZEtleSxcbiAgICAgIHBhZ2VJZEtleTogdGhpcy5wYWdlSWRLZXksXG4gICAgICBkZWJ1Z2dlclR5cGU6IHRoaXMuZGVidWdnZXJUeXBlXG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBleGVjdXRlIChjb21tYW5kLCBvdmVycmlkZSkge1xuICAgIC8vIGlmIHRoZSBwYWdlIGlzIG5vdCBsb2FkZWQgeWV0LCB3YWl0IGZvciBpdFxuICAgIGlmICh0aGlzLnBhZ2VMb2FkaW5nICYmICFvdmVycmlkZSkge1xuICAgICAgbG9nLmRlYnVnKCdUcnlpbmcgdG8gZXhlY3V0ZSBidXQgcGFnZSBpcyBub3QgbG9hZGVkLicpO1xuICAgICAgYXdhaXQgdGhpcy53YWl0Rm9yRG9tKCk7XG4gICAgfVxuXG4gICAgLy8gbm8gbmVlZCB0byBjaGVjayBlcnJvcnMgaWYgaXQgaXMgd2Via2l0XG4gICAgaWYgKHRoaXMuZGVidWdnZXJUeXBlID09PSBERUJVR0dFUl9UWVBFUy53ZWJpbnNwZWN0b3IpIHtcbiAgICAgIGxldCBlcnJvcnMgPSBjaGVja1BhcmFtcyh7YXBwSWRLZXk6IHRoaXMuYXBwSWRLZXksIHBhZ2VJZEtleTogdGhpcy5wYWdlSWRLZXl9KTtcbiAgICAgIGlmIChlcnJvcnMpIHRocm93IG5ldyBFcnJvcihlcnJvcnMpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGN1cmx5XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZ2FyYmFnZUNvbGxlY3RPbkV4ZWN1dGUpIHtcbiAgICAgIGF3YWl0IHRoaXMuZ2FyYmFnZUNvbGxlY3QoKTtcbiAgICB9XG5cbiAgICBsb2cuZGVidWcoYFNlbmRpbmcgamF2YXNjcmlwdCBjb21tYW5kICR7Xy50cnVuY2F0ZShjb21tYW5kLCB7bGVuZ3RoOiA1MH0pfWApO1xuICAgIGxldCByZXMgPSBhd2FpdCB0aGlzLnJwY0NsaWVudC5zZW5kKCdzZW5kSlNDb21tYW5kJywge1xuICAgICAgY29tbWFuZCxcbiAgICAgIGFwcElkS2V5OiB0aGlzLmFwcElkS2V5LFxuICAgICAgcGFnZUlkS2V5OiB0aGlzLnBhZ2VJZEtleSxcbiAgICAgIGRlYnVnZ2VyVHlwZTogdGhpcy5kZWJ1Z2dlclR5cGUsXG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5jb252ZXJ0UmVzdWx0KHJlcyk7XG4gIH1cblxuICBhc3luYyBjYWxsRnVuY3Rpb24gKG9iaklkLCBmbiwgYXJncykge1xuICAgIGxldCBlcnJvcnMgPSBjaGVja1BhcmFtcyh7YXBwSWRLZXk6IHRoaXMuYXBwSWRLZXksIHBhZ2VJZEtleTogdGhpcy5wYWdlSWRLZXl9KTtcbiAgICBpZiAoZXJyb3JzKSB0aHJvdyBuZXcgRXJyb3IoZXJyb3JzKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBjdXJseVxuXG4gICAgaWYgKHRoaXMuZ2FyYmFnZUNvbGxlY3RPbkV4ZWN1dGUpIHtcbiAgICAgIGF3YWl0IHRoaXMuZ2FyYmFnZUNvbGxlY3QoKTtcbiAgICB9XG5cbiAgICBsb2cuZGVidWcoJ0NhbGxpbmcgamF2YXNjcmlwdCBmdW5jdGlvbicpO1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMucnBjQ2xpZW50LnNlbmQoJ2NhbGxKU0Z1bmN0aW9uJywge1xuICAgICAgb2JqSWQsXG4gICAgICBmbixcbiAgICAgIGFyZ3MsXG4gICAgICBhcHBJZEtleTogdGhpcy5hcHBJZEtleSxcbiAgICAgIHBhZ2VJZEtleTogdGhpcy5wYWdlSWRLZXksXG4gICAgICBkZWJ1Z2dlclR5cGU6IHRoaXMuZGVidWdnZXJUeXBlXG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5jb252ZXJ0UmVzdWx0KHJlcyk7XG4gIH1cblxuICBjb252ZXJ0UmVzdWx0IChyZXMpIHtcbiAgICBpZiAoXy5pc1VuZGVmaW5lZChyZXMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYERpZCBub3QgZ2V0IE9LIHJlc3VsdCBmcm9tIHJlbW90ZSBkZWJ1Z2dlci4gUmVzdWx0IHdhczogJHtfLnRydW5jYXRlKHNpbXBsZVN0cmluZ2lmeShyZXMpLCB7bGVuZ3RoOiBSRVNQT05TRV9MT0dfTEVOR1RIfSl9YCk7XG4gICAgfSBlbHNlIGlmIChfLmlzU3RyaW5nKHJlcykpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlcyA9IEpTT04ucGFyc2UocmVzKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyB3ZSBtaWdodCBnZXQgYSBzZXJpYWxpemVkIG9iamVjdCwgYnV0IHdlIG1pZ2h0IG5vdFxuICAgICAgICAvLyBpZiB3ZSBnZXQgaGVyZSwgaXQgaXMganVzdCBhIHZhbHVlXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghXy5pc09iamVjdChyZXMpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFJlc3VsdCBoYXMgdW5leHBlY3RlZCB0eXBlOiAoJHt0eXBlb2YgcmVzfSkuYCk7XG4gICAgfVxuXG4gICAgaWYgKHJlcy5zdGF0dXMgJiYgcmVzLnN0YXR1cyAhPT0gMCkge1xuICAgICAgLy8gd2UgZ290IHNvbWUgZm9ybSBvZiBlcnJvci5cbiAgICAgIHRocm93IGVycm9yRnJvbUNvZGUocmVzLnN0YXR1cywgcmVzLnZhbHVlLm1lc3NhZ2UgfHwgcmVzLnZhbHVlKTtcbiAgICB9XG5cbiAgICAvLyB3aXRoIGVpdGhlciBoYXZlIGFuIG9iamVjdCB3aXRoIGEgYHZhbHVlYCBwcm9wZXJ0eSAoZXZlbiBpZiBgbnVsbGApLFxuICAgIC8vIG9yIGEgcGxhaW4gb2JqZWN0XG4gICAgcmV0dXJuIHJlcy5oYXNPd25Qcm9wZXJ0eSgndmFsdWUnKSA/IHJlcy52YWx1ZSA6IHJlcztcbiAgfVxuXG4gIGFsbG93TmF2aWdhdGlvbldpdGhvdXRSZWxvYWQgKGFsbG93ID0gdHJ1ZSkge1xuICAgIGlmIChfLmlzRnVuY3Rpb24odGhpcy5ycGNDbGllbnQuYWxsb3dOYXZpZ2F0aW9uV2l0aG91dFJlbG9hZCkpIHtcbiAgICAgIHRoaXMucnBjQ2xpZW50LmFsbG93TmF2aWdhdGlvbldpdGhvdXRSZWxvYWQoYWxsb3cpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldENvb2tpZXMgKHVybHMpIHtcbiAgICBsb2cuZGVidWcoJ0dldHRpbmcgbmV0d29yayBjb29raWVzJyk7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucnBjQ2xpZW50LnNlbmQoJ2dldENvb2tpZXMnLCB7XG4gICAgICBhcHBJZEtleTogdGhpcy5hcHBJZEtleSxcbiAgICAgIHBhZ2VJZEtleTogdGhpcy5wYWdlSWRLZXksXG4gICAgICBkZWJ1Z2dlclR5cGU6IHRoaXMuZGVidWdnZXJUeXBlLFxuICAgICAgdXJscyxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZUNvb2tpZSAoY29va2llTmFtZSwgdXJsKSB7XG4gICAgbG9nLmRlYnVnKGBEZWxldGluZyBjb29raWUgJyR7Y29va2llTmFtZX0nIG9uICcke3VybH0nYCk7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucnBjQ2xpZW50LnNlbmQoJ2RlbGV0ZUNvb2tpZScsIHtcbiAgICAgIGFwcElkS2V5OiB0aGlzLmFwcElkS2V5LFxuICAgICAgcGFnZUlkS2V5OiB0aGlzLnBhZ2VJZEtleSxcbiAgICAgIGRlYnVnZ2VyVHlwZTogdGhpcy5kZWJ1Z2dlclR5cGUsXG4gICAgICBjb29raWVOYW1lLFxuICAgICAgdXJsLFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZ2FyYmFnZUNvbGxlY3QgKHRpbWVvdXRNcyA9IEdBUkJBR0VfQ09MTEVDVF9USU1FT1VUKSB7XG4gICAgbG9nLmRlYnVnKGBHYXJiYWdlIGNvbGxlY3Rpbmcgd2l0aCAke3RpbWVvdXRNc31tcyB0aW1lb3V0YCk7XG4gICAgY29uc3QgZXJyb3JzID0gY2hlY2tQYXJhbXMoe1xuICAgICAgYXBwSWRLZXk6IHRoaXMuYXBwSWRLZXksXG4gICAgICBwYWdlSWRLZXk6IHRoaXMucGFnZUlkS2V5LFxuICAgIH0pO1xuICAgIGlmIChlcnJvcnMpIHtcbiAgICAgIGxvZy5kZWJ1ZyhgVW5hYmxlIHRvIGNvbGxlY3QgZ2FyYmFnZSBhdCB0aGlzIHRpbWVgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBhd2FpdCBCLnJlc29sdmUodGhpcy5ycGNDbGllbnQuc2VuZCgnZ2FyYmFnZUNvbGxlY3QnLCB7XG4gICAgICBhcHBJZEtleTogdGhpcy5hcHBJZEtleSxcbiAgICAgIHBhZ2VJZEtleTogdGhpcy5wYWdlSWRLZXksXG4gICAgICBkZWJ1Z2dlclR5cGU6IHRoaXMuZGVidWdnZXJUeXBlXG4gICAgfSkpLnRpbWVvdXQodGltZW91dE1zKVxuICAgIC50aGVuKGZ1bmN0aW9uIGdjU3VjY2VzcyAoKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcHJvbWlzZS9wcmVmZXItYXdhaXQtdG8tdGhlblxuICAgICAgbG9nLmRlYnVnKGBHYXJiYWdlIGNvbGxlY3Rpb24gc3VjY2Vzc2Z1bGApO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uIGdjRXJyb3IgKGVycikgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHByb21pc2UvcHJlZmVyLWF3YWl0LXRvLWNhbGxiYWNrc1xuICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIEIuVGltZW91dEVycm9yKSB7XG4gICAgICAgIGxvZy5kZWJ1ZyhgR2FyYmFnZSBjb2xsZWN0aW9uIHRpbWVkIG91dCBhZnRlciAke3RpbWVvdXRNc31tc2ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9nLmRlYnVnKGBVbmFibGUgdG8gY29sbGVjdCBnYXJiYWdlOiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbi8vIGV2ZW50IGVtaXR0ZWQgcHVibGljYWxseVxuUmVtb3RlRGVidWdnZXIuRVZFTlRfUEFHRV9DSEFOR0UgPSAncmVtb3RlX2RlYnVnZ2VyX3BhZ2VfY2hhbmdlJztcblJlbW90ZURlYnVnZ2VyLkVWRU5UX0ZSQU1FU19ERVRBQ0hFRCA9ICdyZW1vdGVfZGVidWdnZXJfZnJhbWVzX2RldGFjaGVkJztcblJlbW90ZURlYnVnZ2VyLkVWRU5UX0RJU0NPTk5FQ1QgPSAncmVtb3RlX2RlYnVnZ2VyX2Rpc2Nvbm5lY3QnO1xuXG4vLyBhZGQgZ2VuZXJpYyBjYWxsYmFja3NcbmZvciAoY29uc3QgW25hbWUsIGhhbmRsZXJdIG9mIF8udG9QYWlycyhtZXNzYWdlSGFuZGxlcnMpKSB7XG4gIFJlbW90ZURlYnVnZ2VyLnByb3RvdHlwZVtuYW1lXSA9IGhhbmRsZXI7XG59XG5cbmV4cG9ydCB7XG4gIFJlbW90ZURlYnVnZ2VyLCBERUJVR0dFUl9UWVBFUywgUkVNT1RFX0RFQlVHR0VSX1BPUlQsIFJQQ19SRVNQT05TRV9USU1FT1VUX01TLFxufTtcbiJdLCJmaWxlIjoibGliL3JlbW90ZS1kZWJ1Z2dlci5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLiJ9
