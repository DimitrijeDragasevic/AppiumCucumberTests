"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getAllUdids = getAllUdids;
exports.extensions = void 0;

require("source-map-support/register");

var _nodeSimctl = require("node-simctl");

var _logger = _interopRequireDefault(require("../logger"));

var _lodash = _interopRequireDefault(require("lodash"));

let extensions = {};
exports.extensions = extensions;

async function getAllUdids() {
  let devices = await (0, _nodeSimctl.getDevices)();
  return _lodash.default.chain(devices).values().flatten().map('udid').value();
}

extensions.isolateSim = async function () {
  _logger.default.debug('Isolating the requested simulator by deleting all others');

  let udids = await getAllUdids();

  for (let udid of _lodash.default.without(udids, this.udid)) {
    await (0, _nodeSimctl.deleteDevice)(udid);
  }
};require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9leHRlbnNpb25zL2lzb2xhdGUtc2ltLmpzIl0sIm5hbWVzIjpbImV4dGVuc2lvbnMiLCJnZXRBbGxVZGlkcyIsImRldmljZXMiLCJfIiwiY2hhaW4iLCJ2YWx1ZXMiLCJmbGF0dGVuIiwibWFwIiwidmFsdWUiLCJpc29sYXRlU2ltIiwibG9nIiwiZGVidWciLCJ1ZGlkcyIsInVkaWQiLCJ3aXRob3V0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFHQSxJQUFJQSxVQUFVLEdBQUcsRUFBakI7OztBQUVBLGVBQWVDLFdBQWYsR0FBOEI7QUFDNUIsTUFBSUMsT0FBTyxHQUFHLE1BQU0sNkJBQXBCO0FBRUEsU0FBT0MsZ0JBQUVDLEtBQUYsQ0FBUUYsT0FBUixFQUNKRyxNQURJLEdBRUpDLE9BRkksR0FHSkMsR0FISSxDQUdBLE1BSEEsRUFJSkMsS0FKSSxFQUFQO0FBS0Q7O0FBRURSLFVBQVUsQ0FBQ1MsVUFBWCxHQUF3QixrQkFBa0I7QUFDeENDLGtCQUFJQyxLQUFKLENBQVUsMERBQVY7O0FBQ0EsTUFBSUMsS0FBSyxHQUFHLE1BQU1YLFdBQVcsRUFBN0I7O0FBRUEsT0FBSyxJQUFJWSxJQUFULElBQWlCVixnQkFBRVcsT0FBRixDQUFVRixLQUFWLEVBQWlCLEtBQUtDLElBQXRCLENBQWpCLEVBQThDO0FBQzVDLFVBQU0sOEJBQWFBLElBQWIsQ0FBTjtBQUNEO0FBQ0YsQ0FQRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldERldmljZXMsIGRlbGV0ZURldmljZSB9IGZyb20gJ25vZGUtc2ltY3RsJztcbmltcG9ydCBsb2cgZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cblxubGV0IGV4dGVuc2lvbnMgPSB7fTtcblxuYXN5bmMgZnVuY3Rpb24gZ2V0QWxsVWRpZHMgKCkge1xuICBsZXQgZGV2aWNlcyA9IGF3YWl0IGdldERldmljZXMoKTtcblxuICByZXR1cm4gXy5jaGFpbihkZXZpY2VzKVxuICAgIC52YWx1ZXMoKVxuICAgIC5mbGF0dGVuKClcbiAgICAubWFwKCd1ZGlkJylcbiAgICAudmFsdWUoKTtcbn1cblxuZXh0ZW5zaW9ucy5pc29sYXRlU2ltID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICBsb2cuZGVidWcoJ0lzb2xhdGluZyB0aGUgcmVxdWVzdGVkIHNpbXVsYXRvciBieSBkZWxldGluZyBhbGwgb3RoZXJzJyk7XG4gIGxldCB1ZGlkcyA9IGF3YWl0IGdldEFsbFVkaWRzKCk7XG5cbiAgZm9yIChsZXQgdWRpZCBvZiBfLndpdGhvdXQodWRpZHMsIHRoaXMudWRpZCkpIHtcbiAgICBhd2FpdCBkZWxldGVEZXZpY2UodWRpZCk7XG4gIH1cbn07XG5cblxuZXhwb3J0IHsgZXh0ZW5zaW9ucywgZ2V0QWxsVWRpZHMgfTtcbiJdLCJmaWxlIjoibGliL2V4dGVuc2lvbnMvaXNvbGF0ZS1zaW0uanMiLCJzb3VyY2VSb290IjoiLi4vLi4vLi4ifQ==
